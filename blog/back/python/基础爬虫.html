<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>åŸºç¡€çˆ¬è™« | ä¼šèµ°è·¯çš„ä¸‰ç™¾å—</title>
    <meta name="description" content="å¹´è½»äººçš„åšå®¢">
    <link rel="icon" href="/logo1.ico" type="image/x-icon">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.d22626bb.css" as="style"><link rel="preload" href="/assets/js/app.64171550.js" as="script"><link rel="preload" href="/assets/js/18.78f0824a.js" as="script"><link rel="preload" href="/assets/js/38.34e99c36.js" as="script"><link rel="prefetch" href="/assets/js/10.f30e4bf5.js"><link rel="prefetch" href="/assets/js/100.14a8b555.js"><link rel="prefetch" href="/assets/js/101.9e257240.js"><link rel="prefetch" href="/assets/js/11.c050169c.js"><link rel="prefetch" href="/assets/js/12.9abd0678.js"><link rel="prefetch" href="/assets/js/13.ca763ee5.js"><link rel="prefetch" href="/assets/js/14.69f05fca.js"><link rel="prefetch" href="/assets/js/15.db5225be.js"><link rel="prefetch" href="/assets/js/16.c6de58f6.js"><link rel="prefetch" href="/assets/js/17.a33727a2.js"><link rel="prefetch" href="/assets/js/19.20a4f3cf.js"><link rel="prefetch" href="/assets/js/20.15fb9aec.js"><link rel="prefetch" href="/assets/js/21.c2410e24.js"><link rel="prefetch" href="/assets/js/22.6423d49a.js"><link rel="prefetch" href="/assets/js/23.1b0b2120.js"><link rel="prefetch" href="/assets/js/24.93132bac.js"><link rel="prefetch" href="/assets/js/25.a334198a.js"><link rel="prefetch" href="/assets/js/26.c1c7aaa3.js"><link rel="prefetch" href="/assets/js/27.2c86a0cd.js"><link rel="prefetch" href="/assets/js/28.a9d5d0ae.js"><link rel="prefetch" href="/assets/js/29.82f2e489.js"><link rel="prefetch" href="/assets/js/3.465cd447.js"><link rel="prefetch" href="/assets/js/30.d0c8250c.js"><link rel="prefetch" href="/assets/js/31.e6286844.js"><link rel="prefetch" href="/assets/js/32.116769da.js"><link rel="prefetch" href="/assets/js/33.38e22b91.js"><link rel="prefetch" href="/assets/js/34.21d15ece.js"><link rel="prefetch" href="/assets/js/35.53517849.js"><link rel="prefetch" href="/assets/js/36.9b848dcf.js"><link rel="prefetch" href="/assets/js/37.bf3574bb.js"><link rel="prefetch" href="/assets/js/39.10a54121.js"><link rel="prefetch" href="/assets/js/4.9d750d27.js"><link rel="prefetch" href="/assets/js/40.0ead9dc2.js"><link rel="prefetch" href="/assets/js/41.16bfab2f.js"><link rel="prefetch" href="/assets/js/42.b0388f8b.js"><link rel="prefetch" href="/assets/js/43.1d51bbcb.js"><link rel="prefetch" href="/assets/js/44.9e15a8ac.js"><link rel="prefetch" href="/assets/js/45.c9a7ee30.js"><link rel="prefetch" href="/assets/js/46.0821d6b3.js"><link rel="prefetch" href="/assets/js/47.fdd4b2c4.js"><link rel="prefetch" href="/assets/js/48.c86a3241.js"><link rel="prefetch" href="/assets/js/49.29d7cdaf.js"><link rel="prefetch" href="/assets/js/5.b5540d72.js"><link rel="prefetch" href="/assets/js/50.88cae993.js"><link rel="prefetch" href="/assets/js/51.39b0672d.js"><link rel="prefetch" href="/assets/js/52.47b9c89c.js"><link rel="prefetch" href="/assets/js/53.561866dc.js"><link rel="prefetch" href="/assets/js/54.44ad8aef.js"><link rel="prefetch" href="/assets/js/55.999cd3f5.js"><link rel="prefetch" href="/assets/js/56.0fc25a14.js"><link rel="prefetch" href="/assets/js/57.fbeec51d.js"><link rel="prefetch" href="/assets/js/58.c2c3e960.js"><link rel="prefetch" href="/assets/js/59.388b8a2f.js"><link rel="prefetch" href="/assets/js/6.9305fa77.js"><link rel="prefetch" href="/assets/js/60.3bab7106.js"><link rel="prefetch" href="/assets/js/61.fab74e1f.js"><link rel="prefetch" href="/assets/js/62.b8451d9d.js"><link rel="prefetch" href="/assets/js/63.1ea19cc7.js"><link rel="prefetch" href="/assets/js/64.21f37b67.js"><link rel="prefetch" href="/assets/js/65.79da4678.js"><link rel="prefetch" href="/assets/js/66.2276f1ea.js"><link rel="prefetch" href="/assets/js/67.cf3e97e4.js"><link rel="prefetch" href="/assets/js/68.3b9433a6.js"><link rel="prefetch" href="/assets/js/69.a6723b19.js"><link rel="prefetch" href="/assets/js/7.8235c05c.js"><link rel="prefetch" href="/assets/js/70.eff0cc02.js"><link rel="prefetch" href="/assets/js/71.577ad016.js"><link rel="prefetch" href="/assets/js/72.ee1b8084.js"><link rel="prefetch" href="/assets/js/73.ce23853b.js"><link rel="prefetch" href="/assets/js/74.e51d0dc7.js"><link rel="prefetch" href="/assets/js/75.3fbf6e41.js"><link rel="prefetch" href="/assets/js/76.1ad79723.js"><link rel="prefetch" href="/assets/js/77.05aaa2f4.js"><link rel="prefetch" href="/assets/js/78.9e4bf317.js"><link rel="prefetch" href="/assets/js/79.028f9c41.js"><link rel="prefetch" href="/assets/js/8.a4265244.js"><link rel="prefetch" href="/assets/js/80.a83e9fee.js"><link rel="prefetch" href="/assets/js/81.e20ef630.js"><link rel="prefetch" href="/assets/js/82.0a2c28d1.js"><link rel="prefetch" href="/assets/js/83.84f22d3a.js"><link rel="prefetch" href="/assets/js/84.8c0c443d.js"><link rel="prefetch" href="/assets/js/85.1473a2e2.js"><link rel="prefetch" href="/assets/js/86.4683653f.js"><link rel="prefetch" href="/assets/js/87.9507aa61.js"><link rel="prefetch" href="/assets/js/88.77ce595e.js"><link rel="prefetch" href="/assets/js/89.d25806a8.js"><link rel="prefetch" href="/assets/js/9.56b90d44.js"><link rel="prefetch" href="/assets/js/90.231b245f.js"><link rel="prefetch" href="/assets/js/91.cb1ec410.js"><link rel="prefetch" href="/assets/js/92.10cedbd9.js"><link rel="prefetch" href="/assets/js/93.575cc043.js"><link rel="prefetch" href="/assets/js/94.9233e13a.js"><link rel="prefetch" href="/assets/js/95.fafa9bc4.js"><link rel="prefetch" href="/assets/js/96.8b941223.js"><link rel="prefetch" href="/assets/js/97.49080105.js"><link rel="prefetch" href="/assets/js/98.82d1cc72.js"><link rel="prefetch" href="/assets/js/99.d78b0b9a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0cd5f832.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d22626bb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div><header id="navbarWrapper" class="navbar"><div class="sidebar-button"><i class="iconfont reco-menu"></i></div> <a href="/" class="home-link router-link-active"><img src="/head3.png" alt="ä¼šèµ°è·¯çš„ä¸‰ç™¾å—" class="logo"> <span class="site-name">ä¼šèµ°è·¯çš„ä¸‰ç™¾å—</span></a> <div class="links" style="max-width:nullpx;"><div class="side-search-wrapper"><div class="search-box" data-v-1b2e3b29><input aria-label="Search" autocomplete="off" spellcheck="false" value="" data-v-1b2e3b29> <i class="iconfont reco-search" data-v-1b2e3b29></i> <!----></div></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/backEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  åç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/frontEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/bigData.html" class="nav-link"><i class="iconfont undefined"></i>
  å¤§æ•°æ®
</a></li><li class="dropdown-item"><!----> <a href="/categories/Distributed.html" class="nav-link"><i class="iconfont undefined"></i>
  åˆ†å¸ƒå¼
</a></li><li class="dropdown-item"><!----> <a href="/categories/life.html" class="nav-link"><i class="iconfont undefined"></i>
  æ—¥è®°
</a></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/categories/article.html" class="nav-link"><i class="iconfont reco-up"></i>
  Library
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/about.html" class="nav-link"><i class="iconfont reco-account"></i>
  about me
</a></div><div class="nav-item"><a href="https://www.jianshu.com/u/04777e91e2ef" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  ç®€ä¹¦
  </a></div><div class="nav-item"><a href="https://github.com/Castleeee" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  </a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><div class="side-search-wrapper"><div class="search-box" data-v-1b2e3b29><input aria-label="Search" autocomplete="off" spellcheck="false" value="" data-v-1b2e3b29> <i class="iconfont reco-search" data-v-1b2e3b29></i> <!----></div></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/backEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  åç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/frontEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/bigData.html" class="nav-link"><i class="iconfont undefined"></i>
  å¤§æ•°æ®
</a></li><li class="dropdown-item"><!----> <a href="/categories/Distributed.html" class="nav-link"><i class="iconfont undefined"></i>
  åˆ†å¸ƒå¼
</a></li><li class="dropdown-item"><!----> <a href="/categories/life.html" class="nav-link"><i class="iconfont undefined"></i>
  æ—¥è®°
</a></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/categories/article.html" class="nav-link"><i class="iconfont reco-up"></i>
  Library
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/about.html" class="nav-link"><i class="iconfont reco-account"></i>
  about me
</a></div><div class="nav-item"><a href="https://www.jianshu.com/u/04777e91e2ef" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  ç®€ä¹¦
  </a></div><div class="nav-item"><a href="https://github.com/Castleeee" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  </a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><!----></p> <ul class="sidebar-group-items"><li><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#çˆ¬è™«çš„åŸºæœ¬åŸç†" class="sidebar-link">çˆ¬è™«çš„åŸºæœ¬åŸç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#è¯·æ±‚" class="sidebar-link">è¯·æ±‚</a></li><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#å¤„ç†" class="sidebar-link">å¤„ç†</a></li><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#å­˜å‚¨" class="sidebar-link">å­˜å‚¨</a></li><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#å»é‡" class="sidebar-link">å»é‡</a></li></ul></li><li><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#è¯·æ±‚-2" class="sidebar-link">è¯·æ±‚</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#requests" class="sidebar-link">requests</a></li><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#selenium" class="sidebar-link">selenium</a></li><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#aiohttp" class="sidebar-link">aiohttp</a></li></ul></li><li><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#å¤„ç†-2" class="sidebar-link">å¤„ç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#beautifulsoup" class="sidebar-link">BeautifulSoup</a></li><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#pyquery" class="sidebar-link">pyQuery</a></li><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#xpath-cssselector" class="sidebar-link">Xpath&amp;CssSelector</a></li></ul></li><li><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#å­˜å‚¨-2" class="sidebar-link">å­˜å‚¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#pymysql" class="sidebar-link">pymysql</a></li><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#pymongo" class="sidebar-link">PyMongo</a></li><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#redis" class="sidebar-link">redis</a></li><li class="sidebar-sub-header"><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#aiomysql" class="sidebar-link">aiomysql</a></li></ul></li><li><a href="/blog/back/python/%E5%9F%BA%E7%A1%80%E7%88%AC%E8%99%AB.html#scrapy" class="sidebar-link">Scrapy</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page" data-v-cdcae5a4> <div class="page-title" data-v-cdcae5a4><h1 data-v-cdcae5a4>åŸºç¡€çˆ¬è™«</h1> <hr data-v-cdcae5a4> <div data-v-2c25cede data-v-cdcae5a4><i class="iconfont reco-account" data-v-2c25cede><span data-v-2c25cede>ä¼šèµ°è·¯çš„ä¸‰ç™¾å—</span></i> <i class="iconfont reco-date" data-v-2c25cede><span data-v-2c25cede>7/13/2018</span></i> <!----> <i class="iconfont reco-tag tags" data-v-2c25cede><span class="tag-item" data-v-2c25cede>
      çˆ¬è™«ğŸ•·
    </span><span class="tag-item" data-v-2c25cede>
      åç«¯
    </span><span class="tag-item" data-v-2c25cede>
      ç¬¬ä¸‰æ–¹åº“
    </span><span class="tag-item" data-v-2c25cede>
      pythonğŸ
    </span><span class="tag-item" data-v-2c25cede>
      å¼‚æ­¥
    </span><span class="tag-item" data-v-2c25cede>
      æ‰€æœ‰æ–‡ç« 
    </span></i></div></div> <div class="content" data-v-cdcae5a4><div class="tip custom-block"><p class="custom-block-title">åŸºæœ¬çŸ¥é“çš„çˆ¬è™«</p> <p>å¥½å¤šè‡ªå·±çœ‹å§</p></div> <h2 id="çˆ¬è™«çš„åŸºæœ¬åŸç†"><a href="#çˆ¬è™«çš„åŸºæœ¬åŸç†" aria-hidden="true" class="header-anchor">#</a> çˆ¬è™«çš„åŸºæœ¬åŸç†</h2> <p>åŸºæœ¬å°±æ˜¯ä¸‰éƒ¨åˆ†</p> <h3 id="è¯·æ±‚"><a href="#è¯·æ±‚" aria-hidden="true" class="header-anchor">#</a> è¯·æ±‚</h3> <p>è¯·æ±‚å°±æ˜¯httpï¼ŒæŠŠç½‘é¡µçš„æºç ä¸‹è½½åˆ°æœ¬åœ°(å†…å­˜)è¿›è¡Œè®¿é—®çš„ï¼Œç»å¸¸ç”¨çš„æœ‰urlib(å¤ªè€ä¸€èˆ¬åªç”¨åˆ°urljoin)ï¼Œrequestsï¼Œscrapy(æ¡†æ¶)ï¼Œtwisted(å¼‚æ­¥äº‹ä»¶é©±åŠ¨)ï¼Œaiohttp(å¼‚æ­¥)
è¯·æ±‚ä¸€èˆ¬ç”¨get(ç›´æ¥è·å–èµ„æº)post(è¡¨å•éªŒè¯)setç­‰åé¢ä¸å¸¸ç”¨<br>è¿™é‡Œä¼šæ¶‰åŠåˆ°åçˆ¬<br></p> <ul><li>å¯¹ç½‘ç«™æ„Ÿå…´è¶£,åˆ†æç½‘ç»œè¯·æ±‚ï¼Œç”¨scrapyå†™çˆ¬è™«çˆ¬å–æ•°æ®<br>
ç›‘æ§å‘ç°æŸä¸ªæ—¶é—´æ®µè®¿é—®é™¡å¢ï¼Œipç›¸åŒï¼Œuserag-entéƒ½æ˜¯pythonï¼Œç›´æ¥é™åˆ¶è®¿é—®ï¼ˆä¸èƒ½å°ipï¼‰</li> <li>User-agenæ¨¡æ‹Ÿfirefoxï¼Œè·å–ipä»£ç†<br>
å‘ç°ipå˜åŒ–ï¼Œç›´æ¥è¦æ±‚ç™»å½•æ‰èƒ½è®¿é—®</li> <li>æ³¨å†Œè´¦å·ï¼Œæ¯æ¬¡è¯·æ±‚å¸¦cookieæˆ–è€…token<br>
å¥å…¨è´¦å·ä½“ç³»ï¼Œå³Aåªèƒ½è®¿é—®å¥½å‹çš„ä¿¡æ¯</li> <li>æ³¨å†Œå¤šä¸ªè´¦å·ï¼Œå¤šä¸ªè´¦å·è”åˆçˆ¬å–<br>
è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¿›ä¸€æ­¥åŠ å‰§ipè®¿é—®é¢‘ç‡é™åˆ¶</li> <li>æ¨¡ä»¿äººè¯·æ±‚ï¼Œé™åˆ¶è¯·æ±‚é€Ÿåº¦<br>
å¼¹å‡ºéªŒè¯ç ï¼Œè®©è¯†åˆ«éªŒè¯ç </li> <li>é€šè¿‡å„ç§æ‰‹æ®µè¯†åˆ«éªŒè¯ç <br>
å¢åŠ åŠ¨æ€ç½‘ç«™ï¼Œæ•°æ®é€šè¿‡jsåŠ¨æ€åŠ è½½ï¼Œå¢åŠ ç½‘ç»œåˆ†æå¤æ‚åº¦ï¼Œå‘ç°å¤§é‡è¯·æ±‚åªè¯·æ±‚htmlï¼Œä¸è¯·æ±‚imageå’ŒCSS</li> <li>é€šè¿‡seleniumå’Œphantomjså®Œå…¨æ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œ<br>
12æˆæœ¬å¤ªé«˜ï¼Œæ”¾å¼ƒäº†ï¼ï¼ï¼ï¼</li></ul> <h3 id="å¤„ç†"><a href="#å¤„ç†" aria-hidden="true" class="header-anchor">#</a> å¤„ç†</h3> <p>BS4,pyQuery,lxmlç­‰è§£æDOMå’Œæ–‡ä»¶æ¶‰åŠåˆ°å¯»æ‰¾å±æ€§å®šä½xpath,seletor,csså®šä½
æœ€åäº§ç”Ÿä¸€ä¸ªè‡ªå·±æƒ³è¦çš„æ•°æ®ç»“æ„</p> <h3 id="å­˜å‚¨"><a href="#å­˜å‚¨" aria-hidden="true" class="header-anchor">#</a> å­˜å‚¨</h3> <p>æ‹¿åˆ°è¿™ä¸ªç»“æ„çš„æ—¶å€™ï¼Œå­˜åˆ°æ•°æ®åº“ã€‚<br>
pymysql(æ¨è),aiomysql(å¼‚æ­¥),å­˜ä¸ºæ–‡ä»¶(FileIO)scrapyçš„pipline,æ¨é€æ¶ˆæ¯ç­‰ç­‰
twisted+pymysql(æ‰‹åŠ¨å¼‚æ­¥)while+eventloopé©±åŠ¨</p> <h3 id="å»é‡"><a href="#å»é‡" aria-hidden="true" class="header-anchor">#</a> å»é‡</h3> <p>çˆ¬è™«å»é‡ç­–ç•¥</p> <ol><li>å°†è®¿é—®è¿‡çš„urlä¿å­˜åˆ°æ•°æ®åº“ä¸­</li> <li>å°†è®¿é—®è¿‡çš„urlä¿å­˜åˆ°setä¸­ï¼Œåªéœ€è¦<em>O</em>(1)çš„ä»£ä»·å°±å¯ä»¥æŸ¥è¯¢urlæé™100000000*2byte*50ä¸ªå­—ç¬¦/1024/1024/1024=9G</li> <li>urlç»è¿‡md5ç­‰æ–¹æ³•å“ˆå¸Œåä¿å­˜åˆ°setä¸­</li> <li>ç”¨bitmapæ–¹æ³•ï¼Œå°†è®¿é—®è¿‡çš„urlé€šè¿‡hashå‡½æ•°æ˜ å°„åˆ°æŸä¸€</li> <li>bloomfilteræ–¹æ³•å¯¹bitmapè¿›è¡Œæ”¹è¿›ï¼Œå¤šé‡hashå‡½æ•°é™ä½å†²çª</li></ol> <div class="danger custom-block"><p class="custom-block-title">ç•™å‘</p> <p>å¸ƒéš†è¿‡æ»¤å™¨</p></div> <h2 id="è¯·æ±‚-2"><a href="#è¯·æ±‚-2" aria-hidden="true" class="header-anchor">#</a> è¯·æ±‚</h2> <h3 id="requests"><a href="#requests" aria-hidden="true" class="header-anchor">#</a> requests</h3> <p>requestçš„åŸºæœ¬ä½¿ç”¨<br>
è¿”å›çš„æ˜¯ä¸€ä¸ª
ä¸€èˆ¬postä¹‹å‰è¦æŸ¥çœ‹ä¸€ä¸‹æ­£å¸¸çš„postæœ‰æ²¡æœ‰åŠ å¯†ï¼Œè¦ä¸è¦é‡å†™ï¼Œ</p> <div class="danger custom-block"><p class="custom-block-title">ç•™å‘</p> <p>jsæ–­ç‚¹è°ƒè¯•fiddleræŠ“åŒ…</p></div> <h4 id="get-post"><a href="#get-post" aria-hidden="true" class="header-anchor">#</a> get()&amp;post()</h4> <ol><li>get(url,å‚æ•°),å†™å›¾ç‰‡
è¿”å›çš„æ˜¯ä¸€ä¸ªresponseå¯¹è±¡ï¼ŒåŒ…å«çŠ¶æ€ç è¯·æ±‚æˆåŠŸä¸å¦ç­‰ç­‰</li></ol> <div class="language-py extra-class"><pre class="language-py"><code>    data<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;zhizhi&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span><span class="token number">20</span>
    <span class="token punctuation">}</span>
    files<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;files&quot;</span><span class="token punctuation">:</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;baidu.png&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;rb&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    res<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;http://www.httpbin.org/get&quot;</span><span class="token punctuation">,</span>params<span class="token operator">=</span>data<span class="token punctuation">)</span><span class="token comment">#æ„é€ ä¸€ä¸ªå‚æ•°å¹¶ä¼ è¿›å»</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token comment">#ç›´æ¥è¿”å›å­—ç¬¦ä¸²</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#ç›´æ¥è§£æjson</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>contnet<span class="token punctuation">)</span><span class="token comment">#è¿”å›ç½‘é¡µåŸå§‹å†…å®¹</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>res0<span class="token punctuation">.</span>status_code<span class="token punctuation">)</span><span class="token comment">#è¯·æ±‚çš„çŠ¶æ€ç </span>
    res0<span class="token punctuation">.</span>encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token comment">#æŠŠç½‘é¡µçš„ç¼–ç è½¬æ¢</span>
    res1<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;https://www.baidu.com/img/bd_logo1.png&quot;</span><span class="token punctuation">)</span>
    <span class="token builtin">len</span><span class="token punctuation">(</span>res1<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token comment">#å›¾ç‰‡çš„äºŒè¿›åˆ¶</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;baidu.png&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;wb&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span><span class="token comment">#å†™äºŒè¿›åˆ¶å›¾ç‰‡</span>
        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>res1<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>ä½¿ç”¨header</li></ol> <div class="language-py extra-class"><pre class="language-py"><code>headers<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;Referer&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;https://www.zhihu.com/signup?next=%2F&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;User-Agent&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36&quot;</span><span class="token punctuation">}</span>
res3<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;https://www.zhihu.com&quot;</span><span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">)</span><span class="token comment">#æ·»åŠ headers,åƒæŸå‘¼è¿™ç§ä¸åŠ headerå°±ä¸ç»™è®¿é—®</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res3<span class="token punctuation">.</span>text<span class="token punctuation">)</span>

</code></pre></div><ol start="3"><li>ä¼ å…¥æ–‡ä»¶å¹¶ä½¿ç”¨cookie
<br>dataè¢«ä¼ å…¥äº†cookieä¸­å¯ä»¥è®¿é—®äº†</li></ol> <div class="language-py extra-class"><pre class="language-py"><code>res4 <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">&quot;http://www.httpbin.org/post&quot;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">,</span>headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> files<span class="token operator">=</span>files<span class="token punctuation">)</span>
 <span class="token comment"># æ„é€ ä¸€ä¸ªformå¹¶ä¼ è¿›å»</span>
pprint<span class="token punctuation">(</span>res4<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res4<span class="token punctuation">.</span>cookies<span class="token punctuation">)</span>
<span class="token keyword">for</span> k<span class="token punctuation">,</span>v <span class="token keyword">in</span> res4<span class="token punctuation">.</span>cookies<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">,</span>v<span class="token punctuation">)</span>
</code></pre></div><ol start="4"><li>sessionç»´æŒä¼šè¯ï¼Œä¸€èˆ¬sessionä¼šå¾ˆä¹…</li></ol> <div class="language-py extra-class"><pre class="language-py"><code>s<span class="token operator">=</span>requests<span class="token punctuation">.</span>session<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#ç»´æŒä¼šè¯</span>
s<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;http://www.httpbin.org/cookies/set/abc/svsvdhasb&quot;</span><span class="token punctuation">,</span>verify<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token comment"># ä¸è¿›è¡Œè¯ä¹¦éªŒè¯ï¼Œå¯ä½¿ç”¨cert=(&quot;path/server.crt&quot;,&quot;path/ket&quot;)è¿›è¡Œè¯ä¹¦éªŒè¯</span>
res5<span class="token operator">=</span>s<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;http://www.httpbin.org/cookies&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res5<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
</code></pre></div><ol start="5"><li>ä½¿ç”¨ipä»£ç†
å¸¸ç”¨çš„ä»£ç†æœ‰è¥¿åˆºä¹Ÿå¯ä»¥è‡ªå·±ä¹°</li></ol> <div class="language-py extra-class"><pre class="language-py"><code>proxies<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;https&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;127.0.0.1:9900&quot;</span><span class="token punctuation">}</span><span class="token comment">#ä½¿ç”¨ä»£ç†</span>
res6<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;http://www.httpbin.org/get&quot;</span><span class="token punctuation">,</span>proxies<span class="token operator">=</span>proxies<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>res6<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
</code></pre></div><h3 id="selenium"><a href="#selenium" aria-hidden="true" class="header-anchor">#</a> selenium</h3> <p>seleniumæµè§ˆå™¨é©±åŠ¨ã€‚<br>å½“æŸäº›ç½‘é¡µåŠ¨æ€åŠ è½½jsçš„æ—¶å€™(æ·˜å®)æˆ‘ä»¬éœ€è¦ç¨‹åºå»æ‰§è¡Œjsï¼Œ(æ•ˆç‡è‡ªç„¶ä¼šä½ä¸€äº›)è¿™å°±æ˜¯seleniumçš„ä½œç”¨
phantomjs(æ— ç•Œé¢æµè§ˆå™¨)ä¹Ÿè¡Œä½†æ˜¯åœ¨å¤šè¿›ç¨‹çš„æƒ…å†µä¸‹æ€§èƒ½ä¸‹é™ä¸¥é‡ã€‚
<br>
ä½¿ç”¨ä¹‹å‰å…ˆä¸‹è½½ä¸€ä¸ªdriver<a href="https://npm.taobao.org/mirrors/chromedriver/2.34/">æ·˜å®é•œåƒ</a></p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
broswer<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://www.baidu.com'</span><span class="token punctuation">)</span><span class="token comment">#æ‰“å¼€</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>broswer<span class="token punctuation">.</span>page_source<span class="token punctuation">)</span> <span class="token comment"># æ‹¿åˆ°F12çš„ä»£ç (ç»è¿‡æ¸²æŸ“çš„)</span>
broswer<span class="token punctuation">.</span>maximize_window<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#æœ€å¤§åŒ–çª—å£</span>
broswer<span class="token punctuation">.</span>set_window_size<span class="token punctuation">(</span><span class="token number">600</span><span class="token punctuation">,</span><span class="token number">800</span><span class="token punctuation">)</span><span class="token comment">#è®¾ç½®çª—å£å¤§å°</span>
broswer<span class="token punctuation">.</span>back<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#åé€€ä¸€æ­¥</span>
broswer<span class="token punctuation">.</span>forward<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#å‰è¿›ä¸€æ­¥</span>
broswer<span class="token punctuation">.</span>refresh<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#åˆ·æ–°</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>broswer<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token comment">#æ‹¿åˆ°æµè§ˆå™¨çš„æ ‡é¢˜</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>broswer<span class="token punctuation">.</span>current_url<span class="token punctuation">)</span><span class="token comment">#æ‹¿åˆ°url</span>
broswer<span class="token punctuation">.</span>get_cookies<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#æ‹¿åˆ°cookie</span>
broswer<span class="token punctuation">.</span>delete_all_cookies<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#åˆ é™¤æ‰€æœ‰çš„cookie</span>
broswer<span class="token punctuation">.</span>add_cookie<span class="token punctuation">(</span><span class="token punctuation">{</span>k<span class="token operator">-</span>v<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">#å¢åŠ cookie</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">å¯ç”¨çš„é©±åŠ¨</p> <p>webdriver.Firefox<br>
webdriver.FirefoxProfile<br>
webdriver.Chrome<br>
webdriver.ChromeOptions<br>
webdriver.Ie<br>
webdriver.Opera<br>
webdriver.PhantomJS<br>
webdriver.Remote<br>
webdriver.DesiredCapabilities<br>
webdriver.ActionChains<br>
webdriver.TouchActions<br></p></div> <h4 id="æŸ¥æ‰¾å…ƒç´ "><a href="#æŸ¥æ‰¾å…ƒç´ " aria-hidden="true" class="header-anchor">#</a> æŸ¥æ‰¾å…ƒç´ </h4> <p>ä¸å»ºè®®ä½¿ç”¨è‡ªå¸¦çš„ï¼Œå› ä¸ºä¼šæ‹–æ…¢é€Ÿåº¦ï¼Œæ€§èƒ½ä¼šå˜å·®ã€‚<br>
å¯ä»¥ç”¨å…¶ä»–çš„åŒ…lxml bsç­‰ä»£æ›¿ï¼Œä¸è¿‡æœ‰æ—¶å€™ä¸èƒ½ä»£æ›¿</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">print</span><span class="token punctuation">(</span>broswer<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span>id_<span class="token operator">=</span><span class="token string">&quot;lg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ol><li>idå®šä½ï¼šfind_element_by_id()</li> <li>nameå®šä½ï¼šfind_element_by_name()</li> <li>classå®šä½ï¼šfind_element_by_class()</li> <li>tagå®šä½ï¼šfind_element_by_tag_name()</li> <li>linkå®šä½ï¼šfind_element_by_link_text()</li> <li>partial link å®šä½ï¼š find_element_by_partial_link_text()</li> <li>Xpathå®šä½:<br> <ul><li>ç»å¯¹è·¯å¾„ï¼šfind_element_by_xpath(&quot;ç»å¯¹è·¯å¾„&quot;)</li> <li>å…ƒç´ å±æ€§ï¼šfind_element_by_xpath(&quot;//unput[@id='kw']&quot;)</li> <li>å±‚çº§ä¸å±æ€§ç»“åˆï¼šfind_element_by_xpath(&quot;//form[@id='loginForm']/ul/input[1]&quot;)</li> <li>é€»è¾‘è¿ç®—ç¬¦ï¼šfind_element_by_xpath(&quot;//input[@id='kw' and@class='s_ipt']&quot;)</li></ul></li> <li>CSSå®šä½ï¼šfind_element_by_css_selector()</li></ol> <h4 id="é€šè¿‡seleniumæ¨¡æ‹Ÿç™»é™†å¾®åš"><a href="#é€šè¿‡seleniumæ¨¡æ‹Ÿç™»é™†å¾®åš" aria-hidden="true" class="header-anchor">#</a> é€šè¿‡seleniumæ¨¡æ‹Ÿç™»é™†å¾®åš</h4> <div class="danger custom-block"><p class="custom-block-title">å¤±è´¥äº† ç•™å‘</p> <p>åé¢å†è¯•ï¼Œå¡«å€¼çš„æ—¶å€™å¡«ä¸ä¸Š</p></div> <h4> å¾€å…ƒç´ ä¸­å¡«å€¼å¹¶ç™»é™†</h4> <div class="language-py extra-class"><pre class="language-py"><code>ele0<span class="token operator">=</span>broswer<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span>id_<span class="token operator">=</span><span class="token string">&quot;lg&quot;</span><span class="token punctuation">)</span>
ele<span class="token operator">=</span>broswer<span class="token punctuation">.</span>find_element_by_id<span class="token punctuation">(</span>id_<span class="token operator">=</span><span class="token string">&quot;kw&quot;</span><span class="token punctuation">)</span>
ele<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">u&quot;qwe&quot;</span><span class="token punctuation">)</span><span class="token comment">#æ¨¡æ‹ŸæŒ‰é”®è¾“å…¥ï¼š</span>
ele<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#æ¸…é™¤æ–‡æœ¬ï¼š</span>
ele<span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span><span class="token string">u&quot;abc&quot;</span><span class="token punctuation">)</span><span class="token comment">#æ¨¡æ‹ŸæŒ‰é”®è¾“å…¥ï¼š</span>
ele1<span class="token operator">=</span>broswer<span class="token punctuation">.</span>find_element_by_class_name<span class="token punctuation">(</span><span class="token string">&quot;bg s_btn&quot;</span><span class="token punctuation">)</span>
ele1<span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#å•å‡»å…ƒç´ </span>
ele1<span class="token punctuation">.</span>submit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#æäº¤è¡¨å•ï¼ˆç›¸å½“äº&quot;å›è½¦&quot;ï¼‰</span>
broswer<span class="token punctuation">.</span>execute_script<span class="token punctuation">(</span><span class="token string">'alert(&quot;123&quot;);'</span><span class="token punctuation">)</span><span class="token comment">#æ‰§è¡Œjs</span>
</code></pre></div><p>åŠ è½½çš„æ—¶å€™ä¸åŠ è½½å›¾ç‰‡(èŠ‚çœæ€§èƒ½)ï¼Œå¦‚ä¸‹è®¾ç½®</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver

chrome_options <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span>
prefs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;profile.managed_default_content_settings.images&quot;</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">}</span>
chrome_options<span class="token punctuation">.</span>add_experimental_option<span class="token punctuation">(</span><span class="token string">&quot;prefs&quot;</span><span class="token punctuation">,</span>prefs<span class="token punctuation">)</span>

driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span>chrome_options<span class="token operator">=</span>chrome_options<span class="token punctuation">)</span>

</code></pre></div><h3 id="aiohttp"><a href="#aiohttp" aria-hidden="true" class="header-anchor">#</a> aiohttp</h3> <p>å¼‚æ­¥è¯·æ±‚çš„httpåº“</p> <div class="danger custom-block"><p class="custom-block-title">ç•™å‘</p> <p>å¼‚æ­¥ç­‰è¿‡ä¸€ä¸¤å¤©å†æ•´ç†</p></div> <h2 id="å¤„ç†-2"><a href="#å¤„ç†-2" aria-hidden="true" class="header-anchor">#</a> å¤„ç†</h2> <p>æ•°æ®å¤„ç†å°±æ˜¯æŠŠDOMçš„å…ƒç´ å†…å®¹æ‹¿å‡ºæ¥</p> <h3 id="beautifulsoup"><a href="#beautifulsoup" aria-hidden="true" class="header-anchor">#</a> BeautifulSoup</h3> <p>å¯¹domè¿›è¡Œè§£æ<br>
from bs4 import BeautifulSoup as BS <br>
domä¾‹å­</p> <pre><code>      &lt;li id=&quot;note-36396362&quot; data-note-id=&quot;36396362&quot; class=&quot;have-img&quot;&gt;
          &lt;a class=&quot;wrap-img&quot; href=&quot;www.baidu.com&quot; target=&quot;_blank&quot;&gt;
            &lt;img class=&quot;  img-blur-done&quot; src=&quot;//upload-images.jianshu.io/upload_images/12240181-bb9399878eae6ddd?imageMogr2/auto-orient/strip|imageView2/1/w/360/h/240&quot; alt=&quot;120&quot;&gt;
          &lt;/a&gt;
        &lt;div class=&quot;content&quot;&gt;
          &lt;a class=&quot;title&quot; target=&quot;_blank&quot; href=&quot;www.baidu.com&quot;&gt;ç½—æ°¸æµ©æœ€çˆ±çš„â€œè½¯ä»¶â€ä¸‹å‡¡äº†ï¼ è®©ä½ ä½“éªŒé«˜æ•ˆè®°å½•çš„æ„Ÿè§‰&lt;/a&gt;
          &lt;p class=&quot;abstract&quot;&gt;
            å¬è¯´é”¤å­åˆå‘å¸ƒäº†æ–°äº§å“ï¼ é”¤å­ç§‘æŠ€ä¸æ˜¯ä¸€ä¸ªå–æ‰‹æœºçš„å¥½å…¬å¸ï¼Œå´æ˜¯ä¸€ä¸ªæè½¯ä»¶çš„é¢†å¤´å†›ï¼Œæ——ä¸‹çš„é—ªå¿µèƒ¶å›Šå’ŒBigBangä¸€ç›´è¢«èµæ‰¬ï¼Œç½‘å‹æˆç§°ï¼š é”¤å­æœ‰ä¸‰...
          &lt;/p&gt;
          &lt;div class=&quot;meta&quot;&gt;
            &lt;a class=&quot;nickname&quot; target=&quot;_blank&quot; href=&quot;/u/00385c37e5de&quot;&gt;ToolsæŒ‡å—&lt;/a&gt;
              &lt;a target=&quot;_blank&quot; href=&quot;www.baidu.com#comments&quot;&gt;
                &lt;i class=&quot;iconfont ic-list-comments&quot;&gt;&lt;/i&gt; 3
      &lt;/a&gt;      &lt;span&gt;&lt;i class=&quot;iconfont ic-list-like&quot;&gt;&lt;/i&gt; 46&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/li&gt;
</code></pre> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup <span class="token keyword">as</span> BS
soup<span class="token operator">=</span>BS<span class="token punctuation">(</span>dom<span class="token punctuation">,</span><span class="token string">'lxml'</span><span class="token punctuation">)</span><span class="token comment">#ç”Ÿæˆäº†ä¸€ä¸ªsoupå¯¹è±¡ä½¿ç”¨unicodeç¼–ç </span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">æ³¨æ„æŒ‡å®šç¼–ç </p> <p>é»˜è®¤lxml<br>
BeautifulSoup(markup, &quot;lxml&quot;)é€Ÿåº¦å¿«<br>
BeautifulSoup(markup, &quot;html.parser&quot;)ç³»ç»Ÿè‡ªå¸¦<br>
BeautifulSoup(markup, &quot;xml&quot;)å”¯ä¸€æ”¯æŒxml<br>
BeautifulSoup(markup, &quot;html5lib&quot;)ç”Ÿæˆh5æµè§ˆå™¨æ–¹å¼è§£æ</p></div> <p>tag.nameæ ‡ç­¾åç§°å¯åµŒå¥—soup.head.tittle<br>
tag.attributesæ ‡ç­¾åé¢çš„å±æ€§,å¯æ·»åŠ æˆ–è€…ä¿®æ”¹,å’Œå­—å…¸ä¸€æ ·<br>
å¤šå€¼å±æ€§,classæœ€å¤š,æ¯ä¸ªtagå¯èƒ½ç”¨å¤šä¸ªcss<br>
å…¶ä»–çš„rel , rev , accept-charset , headers , accesskeyè¿”å›ä¸€ä¸ªlistéå¤šå€¼å±æ€§ä¼šè¿”å›str<br>
å°†tagè½¬æ¢ä¸ºstrçš„æ—¶å€™å¤šå€¼å±æ€§ä¼šè‡ªåŠ¨åˆä¸ºç”±ç©ºæ ¼éš”å¼€çš„å­—ç¬¦ä¸²,xmlæ²¡æœ‰å¤šå€¼</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>name<span class="token punctuation">,</span>soup<span class="token punctuation">.</span>attrs<span class="token punctuation">)</span><span class="token comment">#è·å–åå­—å’Œå±æ€§</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">&quot;meta&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">#è·å–äº†classä¸ºmetaçš„ç¬¬ä¸€ä¸ªå…ƒç´ </span>
soup<span class="token punctuation">.</span>find_all_next<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">&quot;meta&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">#è·è¿™ä¹Ÿå…ƒç´ çš„ä¸‹ä¸€ä¸ªé‚»å±…</span>
soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">&quot;meta&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#åˆ—è¡¨è·å–æ‰€æœ‰metaçš„å…ƒç´ </span>
tag<span class="token punctuation">.</span>parent<span class="token comment">#è·å¾—çˆ¶èŠ‚ç‚¹beautifulsoupçˆ¶èŠ‚ç‚¹ä¸ºNone</span>
tag<span class="token punctuation">.</span>descendants<span class="token comment">#å­å­™èŠ‚ç‚¹çš„é€’å½’è¿­ä»£å¯¹è±¡</span>
tag<span class="token punctuation">.</span>chlidren<span class="token comment">#æ˜¯åŒ…å«å­èŠ‚ç‚¹å¯¹è±¡å¯¹è±¡å¯¹è±¡çš„å¯è¿­ä»£å¯¹è±¡</span>
</code></pre></div><table><thead><tr><th>æ–¹æ³•</th> <th style="text-align:center">å‚æ•°</th> <th style="text-align:right">è¿”å›</th></tr></thead> <tbody><tr><td>find</td> <td style="text-align:center">(self, name, attrs, recursive, text,.â€¦ Tag</td> <td style="text-align:right">1</td></tr> <tr><td>find_all</td> <td style="text-align:center">(self, name, attrs, recursive, te.. Tag</td> <td style="text-align:right">2</td></tr> <tr><td>find_all_previous</td> <td style="text-align:center">(self, name, att.. PageElement</td> <td style="text-align:right">3</td></tr> <tr><td>find_next</td> <td style="text-align:center">(self, name, attrs, text.. PageElement</td> <td style="text-align:right">4</td></tr> <tr><td>find_next_sibling</td> <td style="text-align:center">(self, name, att.. PageElement</td> <td style="text-align:right">5</td></tr> <tr><td>find_next_siblings</td> <td style="text-align:center">(self, name, at.. PageElement</td> <td style="text-align:right">6</td></tr> <tr><td>find_parent</td> <td style="text-align:center">(self, name, attrs, kw.. PageElement</td> <td style="text-align:right">7</td></tr> <tr><td>find_parents</td> <td style="text-align:center">(self, name, attrs,1.. PageElement</td> <td style="text-align:right">8</td></tr> <tr><td>find_previous</td> <td style="text-align:center">(self, name, attrs,.. PageElement</td> <td style="text-align:right">9</td></tr> <tr><td>find_previous_sibling</td> <td style="text-align:center">(self, name,.â€¦ PageElement</td> <td style="text-align:right">10</td></tr> <tr><td>find previous siblings</td> <td style="text-align:center">(self, name.. PageElement</td> <td style="text-align:right">11</td></tr></tbody></table> <p>è¿™æ˜¯èŠ‚ç‚¹çš„ä¸€äº›å±æ€§ï¼Œå¯ä»¥è·å–å†…å®¹</p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>æ³¨æ„é¡¿å·ä»¥åŠæ¢è¡Œä¹Ÿç®—èŠ‚ç‚¹<br>
class_ç”¨æ¥æ ‡è¯†csså¯ä»¥éƒ¨åˆ†åŒ¹é…ä¹Ÿå¯å…¨åŒ¹é…,å…¨åŒ¹é…çš„æ—¶å€™æ³¨æ„é¡ºåºè‹¥ä¸ä¸€æ ·æ— æ³•åŒ¹é…</p></div> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">&quot;meta&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">#è·å–äº†classä¸ºmetaçš„ç¬¬ä¸€ä¸ªå…ƒç´ </span>
soup<span class="token punctuation">.</span>find_all_next<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">&quot;meta&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">#è·è¿™ä¹Ÿå…ƒç´ çš„ä¸‹ä¸€ä¸ªé‚»å±…</span>
soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span>class_<span class="token operator">=</span><span class="token string">&quot;meta&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span>
soup1<span class="token operator">=</span>soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'p'</span><span class="token punctuation">,</span>class_<span class="token operator">=</span><span class="token string">&quot;abstract&quot;</span><span class="token punctuation">)</span><span class="token comment">#è·å–æ ‡ç­¾ä¸ºpï¼Œclass=&quot;abstract&quot;çš„å…ƒç´ </span>
<span class="token keyword">print</span><span class="token punctuation">(</span>soup<span class="token punctuation">.</span>string<span class="token punctuation">)</span><span class="token comment">#æ²¡æœ‰å­èŠ‚ç‚¹çš„æƒ…å†µä¸‹å¾—åˆ°å­—ç¬¦ä¸²</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>soup1<span class="token punctuation">.</span>strings<span class="token punctuation">)</span><span class="token comment">#å¾—åˆ°å¤šä¸ªå­—ç¬¦ä¸² åˆ—è¡¨</span>
soup1<span class="token operator">=</span>soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span>class_<span class="token operator">=</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>soup1<span class="token punctuation">.</span>contents<span class="token punctuation">)</span><span class="token comment">#èŠ‚ç‚¹çš„å…ƒç´ ï¼Œæ˜¯ä¸ªåˆ—è¡¨</span>
soup<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#è¿”å›æ‰€æœ‰çš„åŠå…¶å­©å­çš„æ–‡æœ¬</span>
soup<span class="token punctuation">.</span>prettify<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#è‡ªåŠ¨å¯¹é½è¡¥å…¨html</span>
</code></pre></div><h3 id="pyquery"><a href="#pyquery" aria-hidden="true" class="header-anchor">#</a> pyQuery</h3> <p>pipå®‰è£…pyQuery</p> <h3>æ‰“å¼€</h3> <p>pq=PyQuery(&quot;http://www.baidu.com&quot;)#ä¹Ÿå¯ä»¥ç›´æ¥æ‰“å¼€æ–‡ä»¶pq=PyQuery(&quot;aa.html&quot;)</p> <table><thead><tr><th>ç±»å‹</th> <th style="text-align:center">å½¢å¼</th> <th style="text-align:right">å«ä¹‰</th></tr></thead> <tbody><tr><td>.class</td> <td style="text-align:center">.color</td> <td style="text-align:right">é€‰æ‹©class=&quot;colorâ€çš„æ‰€æœ‰å…ƒç´ </td></tr> <tr><td>#id</td> <td style="text-align:center">#info</td> <td style="text-align:right">é€‰æ‹©id=&quot;infoâ€çš„æ‰€æœ‰å…ƒç´ </td></tr> <tr><td>*</td> <td style="text-align:center">*</td> <td style="text-align:right">é€‰æ‹©æ‰€æœ‰å…ƒç´ </td></tr> <tr><td>element</td> <td style="text-align:center">p</td> <td style="text-align:right">é€‰æ‹©æ‰€æœ‰çš„på…ƒç´ </td></tr> <tr><td>element,element</td> <td style="text-align:center">div,pe</td> <td style="text-align:right">é€‰æ‹©æ‰€æœ‰divå…ƒç´ å’Œæ‰€æœ‰på…ƒç´ </td></tr> <tr><td>elemente lement</td> <td style="text-align:center">div pe</td> <td style="text-align:right">é€‰æ‹©æ‰€æœ‰divå…ƒç´ å†…æ‰€æœ‰på…ƒç´ </td></tr> <tr><td>[attribute]</td> <td style="text-align:center">[target]</td> <td style="text-align:right">é€‰æ‹©å¸¦æœ‰targeå±æ€§çš„æ‰€æœ‰å…ƒç´ ã€‚</td></tr> <tr><td>[arrtibute=value]</td> <td style="text-align:center">[target=_blank]</td> <td style="text-align:right">é€‰æ‹© target=&quot;_blankâ€çš„æ‰€æœ‰å…ƒç´ </td></tr></tbody></table> <p>å¯ä»¥ä½¿ç”¨ä¼ªç±»<br>
å¯è°ƒç”¨çš„å‡½æ•°<br></p> <ul><li>pq.find()#å‘ç°æ ‡ç­¾</li> <li>pq.parent()#å‘ç°æ ‡ç­¾çš„çˆ¶æ ‡ç­¾</li> <li>pq.parents()#é€’å½’å‘ç°çˆ¶æ ‡ç­¾</li> <li>pq.children()#å‘ç°å­æ ‡ç­¾</li> <li>pq.text()#è·å–æ‰€æœ‰æ–‡æœ¬,å¿½ç•¥æ ‡ç­¾</li></ul> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>pqæœ¬èº«æ˜¯å…·æœ‰æ ‡ç­¾çš„å­—ç¬¦ä¸²
pq.html()ä¸å«æœ¬èº«çš„æ ‡ç­¾</p></div> <p>ç¨‹åºå¦‚ä¸‹<br></p> <div class="language-py extra-class"><pre class="language-py"><code>ä½¿ç”¨ä¸Šé¢çš„dom
x<span class="token operator">=</span>pq<span class="token punctuation">(</span><span class="token string">'li a'</span><span class="token punctuation">)</span>
pq<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
pq<span class="token punctuation">.</span>parent<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
pq<span class="token punctuation">.</span>parents<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
pq<span class="token punctuation">.</span>children<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>attr<span class="token punctuation">(</span><span class="token string">&quot;target&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;_blank&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>attr<span class="token punctuation">.</span>target<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>ç»“æœ</p> <pre><code>&lt;a class=&quot;wrap-img&quot; href=&quot;www.baidu.com&quot; target=&quot;_blank&quot;&gt;
      &lt;img class=&quot;  img-blur-done&quot; src=&quot;//upload-images.jianshu.io/upload_images/12240181-bb9399878eae6ddd?imageMogr2/auto-orient/strip|imageView2/1/w/360/h/240&quot; alt=&quot;120&quot;/&gt;
    &lt;/a&gt;
  &lt;a class=&quot;title&quot; target=&quot;_blank&quot; href=&quot;www.baidu.com&quot;&gt;ç½—æ°¸æµ©æœ€çˆ±çš„â€œè½¯ä»¶â€ä¸‹å‡¡äº†ï¼ è®©ä½ ä½“éªŒé«˜æ•ˆè®°å½•çš„æ„Ÿè§‰&lt;/a&gt;
    &lt;a class=&quot;nickname&quot; target=&quot;_blank&quot; href=&quot;/u/00385c37e5de&quot;&gt;ToolsæŒ‡å—&lt;/a&gt;
        &lt;a target=&quot;_blank&quot; href=&quot;www.baidu.com#comments&quot;&gt;
          &lt;i class=&quot;iconfont ic-list-comments&quot;/&gt; 3
&lt;/a&gt;
_blank
 ç½—æ°¸æµ©æœ€çˆ±çš„â€œè½¯ä»¶â€ä¸‹å‡¡äº†ï¼ è®©ä½ ä½“éªŒé«˜æ•ˆè®°å½•çš„æ„Ÿè§‰ ToolsæŒ‡å— 3
</code></pre> <h3 id="xpath-cssselector"><a href="#xpath-cssselector" aria-hidden="true" class="header-anchor">#</a> Xpath&amp;CssSelector</h3> <p>åˆ©ç”¨è¿™äº›è¯­æ³•å®šä½domçš„å…ƒç´ 
F12å¼€å‘è€…æ¨¡å¼ï¼Œç›´æ¥å¤åˆ¶æ³¨æ„jsæ¸²æŸ“ä¼šæ‰°ä¹±xpathå’Œcss</p> <div align="center"><img src="/assets/img/pachong1.798cabeb.png"></div> <h3>Xpath</h3> <table><thead><tr><th>ç±»å‹</th> <th style="text-align:right">å½¢å¼</th></tr></thead> <tbody><tr><td>article</td> <td style="text-align:right">é€‰å–æ‰€æœ‰articleå…ƒç´ çš„æ‰€æœ‰å­èŠ‚ç‚¹</td></tr> <tr><td>/article</td> <td style="text-align:right">é€‰å–æ ¹å…ƒç´ article</td></tr> <tr><td>article/a</td> <td style="text-align:right">é€‰å–æ‰€æœ‰å±äºarticleçš„å­å…ƒç´ çš„aå…ƒç´ </td></tr> <tr><td>//div</td> <td style="text-align:right">é€‰å–æ‰€æœ‰divå­å…ƒç´ ï¼ˆä¸è®ºå‡ºç°åœ¨æ–‡æ¡£ä»»ä½•åœ°æ–¹ï¼‰</td></tr> <tr><td>article//div</td> <td style="text-align:right">é€‰å–æ‰€æœ‰å±äºarticleå…ƒç´ çš„åä»£çš„divå…ƒç´ ï¼Œä¸ç®¡å®ƒå‡ºç°åœ¨articleä¹‹ä¸‹çš„ä»»ä½•ä½ç½®</td></tr> <tr><td>//@class</td> <td style="text-align:right">é€‰åŒºè¿™ä¸ªæ ‡ç­¾ä¸‹æ‰€æœ‰åä¸ºclassçš„å±æ€§</td></tr> <tr><td>/a[@href=&quot;link2.html&quot;]</td> <td style="text-align:right">é€‰å–æ‰€æœ‰hrefä¸º&quot;link2.html&quot;çš„aæ ‡ç­¾</td></tr> <tr><td>@href</td> <td style="text-align:right">æ‹¿åˆ°hrefæ ‡ç­¾</td></tr> <tr><td>?/text()</td> <td style="text-align:right">?å…ƒç´ ä¸‹çš„æ–‡æœ¬</td></tr></tbody></table> <h3>cssé€‰æ‹©å™¨</h3> <table><thead><tr><th>ç±»å‹</th> <th style="text-align:right">å½¢å¼</th></tr></thead> <tbody><tr><td>*</td> <td style="text-align:right">é€‰æ‹©æ‰€æœ‰èŠ‚ç‚¹</td></tr> <tr><td>#container</td> <td style="text-align:right">é€‰æ‹©idä¸ºcontainerçš„èŠ‚ç‚¹</td></tr> <tr><td>.container</td> <td style="text-align:right">é€‰å–æ‰€æœ‰classåŒ…å«containerçš„èŠ‚ç‚¹</td></tr> <tr><td>li a</td> <td style="text-align:right">é€‰å–æ‰€æœ‰iä¸‹çš„æ‰€æœ‰aèŠ‚ç‚¹</td></tr> <tr><td>ul+p</td> <td style="text-align:right">é€‰æ‹©låé¢çš„ç¬¬ä¸€ä¸ªpå…ƒç´ </td></tr> <tr><td>div#container&gt;ul</td> <td style="text-align:right">é€‰å–idä¸ºcontainerçš„divçš„ç¬¬ä¸€ä¸ªulå­å…ƒç´ </td></tr> <tr><td>ul~p</td> <td style="text-align:right">é€‰å–ä¸ulç›¸é‚»çš„æ‰€æœ‰på…ƒç´ </td></tr> <tr><td>a[title]</td> <td style="text-align:right">é€‰å–æ‰€æœ‰æœ‰titleå±æ€§çš„aå…ƒç´ </td></tr> <tr><td>a[href=&quot;http:/jobbole.com&quot;]</td> <td style="text-align:right">é€‰å–æ‰€æœ‰hrefå±æ€§ä¸ºjobbole.comå€¼çš„aå…ƒç´ </td></tr> <tr><td>a[href*=&quot;jobole&quot;]</td> <td style="text-align:right">é€‰å–æ‰€æœ‰hrefå±æ€§åŒ…å«jobboleçš„aå…ƒç´ </td></tr> <tr><td>a[href^=&quot;http&quot;]</td> <td style="text-align:right">é€‰å–æ‰€æœ‰hrefå±æ€§å€¼ä»¥httpå¼€å¤´çš„aå…ƒç´ </td></tr> <tr><td>a[href$=&quot;.jpgâ€]</td> <td style="text-align:right">é€‰å–æ‰€æœ‰hrefå±æ€§å€¼ä»¥.jpgç»“å°¾çš„aå…ƒç´ </td></tr> <tr><td>input[type=radio]:checked</td> <td style="text-align:right">é€‰æ‹©é€‰ä¸­çš„radioçš„å…ƒç´ </td></tr> <tr><td>div:not(#container)</td> <td style="text-align:right">é€‰å–æ‰€æœ‰idécontainerçš„divå±æ€§</td></tr> <tr><td>li:nth-child(3)</td> <td style="text-align:right">é€‰å–ç¬¬ä¸‰ä¸ªiå…ƒç´ </td></tr> <tr><td>tr:nth-child(2n)</td> <td style="text-align:right">ç¬¬å¶æ•°ä¸ªtr</td></tr> <tr><td>a::text</td> <td style="text-align:right">æ‹¿åˆ°æ ‡ç­¾çš„æ–‡æœ¬</td></tr> <tr><td>a::attr(href)</td> <td style="text-align:right">æ‹¿åˆ°æ ‡ç­¾hrefå±æ€§</td></tr></tbody></table> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">from</span> lxml <span class="token keyword">import</span> etree
html<span class="token operator">=</span>etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token comment">#åˆå§‹åŒ–ï¼Œä¹Ÿå¯åˆå§‹åŒ–æœ¬åœ°ç½‘é¡µetree.parse('test.html')</span>
result <span class="token operator">=</span> etree<span class="token punctuation">.</span>tostring<span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token comment">#æ”¾å…¥lxmlä¸­</span>
result<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token comment">#å¯¹è¿™ä¸ªhtmlè¿›è¡Œç¼–ç </span>

x<span class="token operator">=</span>html<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//div[@class=&quot;content&quot;]/text()'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
y<span class="token operator">=</span>html<span class="token punctuation">.</span>cssselect<span class="token punctuation">(</span><span class="token string">'#note-36396362 &gt; div &gt;.title'</span><span class="token punctuation">)</span><span class="token comment">#æ‹¿åˆ°æ‰€æœ‰classä¸ºtitleçš„å…ƒç´ </span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> y<span class="token punctuation">:</span><span class="token comment">#æ˜¯ä¸ªåˆ—è¡¨</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>text<span class="token punctuation">,</span>i<span class="token punctuation">.</span>attrib<span class="token punctuation">[</span><span class="token string">'href'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">æ³¨æ„</p> <p>ç©ºæ ¼å’Œæ¢è¡Œç¬¦ä¹Ÿç®—ä¸€ä¸ªæ–‡æœ¬ï¼Œçœ‹ç»“æœ</p></div> <p>ç»“æœ</p> <pre><code>['\n  å¬è¯´é”¤å­åˆå‘å¸ƒäº†æ–°äº§å“ï¼ é”¤å­ç§‘æŠ€ä¸æ˜¯ä¸€ä¸ªå–æ‰‹æœºçš„å¥½å…¬å¸ï¼Œ
å´æ˜¯ä¸€ä¸ªæè½¯ä»¶çš„é¢†å¤´å†›ï¼Œæ——ä¸‹çš„é—ªå¿µèƒ¶å›Šå’ŒBigBangä¸€ç›´è¢«èµæ‰¬ï¼Œç½‘å‹æˆç§°ï¼š
é”¤å­æœ‰ä¸‰...\n    ', '\n    ', '\n    ', '\n  ']
ç½—æ°¸æµ©æœ€çˆ±çš„â€œè½¯ä»¶â€ä¸‹å‡¡äº†ï¼ è®©ä½ ä½“éªŒé«˜æ•ˆè®°å½•çš„æ„Ÿè§‰ 
www.baidu.com
</code></pre> <h2 id="å­˜å‚¨-2"><a href="#å­˜å‚¨-2" aria-hidden="true" class="header-anchor">#</a> å­˜å‚¨</h2> <h3 id="pymysql"><a href="#pymysql" aria-hidden="true" class="header-anchor">#</a> pymysql</h3> <ul><li><p>åˆ›å»ºè¿æ¥
å‚æ•°å¦‚ä¸‹
</p><div align="center"><img src="/assets/img/dbpara.b9e08d7e.png"></div><p></p></li> <li><p>åˆ›å»ºæ¸¸æ ‡<br>
å¯é€‰æ‹©å­—å…¸å½¢å¼<br></p></li> <li><p>æ„é€ sqlè¯­å¥<br>
å–„ç”¨str.format<br></p></li> <li><p>æ‰§è¡Œsql<br>
æ³¨æ„é”™è¯¯å›æ»š<br></p></li> <li><p>æ‹¿å›ç»“æœ<br>
æ³¨æ„æŒ‡é’ˆçš„ä½ç½®<br></p></li></ul> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> pymysql

conn<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>
                    user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>
                    password<span class="token operator">=</span><span class="token string">'ä¸ç»™çœ‹ï¼ï¼ï¼'</span><span class="token punctuation">,</span>
                    database<span class="token operator">=</span><span class="token string">'aiosql'</span><span class="token punctuation">,</span>
                    charset<span class="token operator">=</span><span class="token string">'utf8mb4'</span><span class="token punctuation">)</span>
cur<span class="token operator">=</span>conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span>cursor<span class="token operator">=</span>pymysql<span class="token punctuation">.</span>cursors<span class="token punctuation">.</span>DictCursor<span class="token punctuation">)</span>
<span class="token comment">#ä½¿ç”¨DictCursorè¿”å›ä¸å†æ˜¯å…ƒç»„æ˜¯ä¸€ä¸ªä»£æ˜ å°„çš„å­—å…¸</span>
sql<span class="token operator">=</span><span class="token string">'select * from aio'</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    reslen<span class="token operator">=</span>cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token comment">#æ‰§è¡Œsqlè¯­å¥</span>
    conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#æ³¨æ„è¦æäº¤</span>
<span class="token keyword">except</span><span class="token punctuation">:</span><span class="token comment">#å‘ç”Ÿé”™è¯¯</span>
    conn<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#å›æ»š</span>
    cur<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    conn<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#å…³é—­</span>
<span class="token comment">#è¡Œä¸ºå•ä½ç§»åŠ¨</span>
cur<span class="token punctuation">.</span>description<span class="token comment">#å…‰æ ‡è¯¦æƒ…æè¿°</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>lastrowid<span class="token punctuation">)</span><span class="token comment">#å…‰æ ‡</span>
cur<span class="token punctuation">.</span>scroll<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">'absolute'</span><span class="token punctuation">)</span><span class="token comment">#æŒ‡é’ˆæŒ‡å‘ç¬¬äºŒæ¡</span>
cur<span class="token punctuation">.</span>scroll<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>mode<span class="token operator">=</span><span class="token string">'relative'</span><span class="token punctuation">)</span><span class="token comment">#æŒ‡é’ˆç›¸å¯¹å‘åç§»åŠ¨ä¸¤æ¡</span>
one<span class="token operator">=</span>cur<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#ç»“æœçš„ä¸€æ¡å…‰æ ‡åç§»1</span>
<span class="token builtin">all</span><span class="token operator">=</span>cur<span class="token punctuation">.</span>fetchmany<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token comment">#æ‹¿å‡ºä¸‰æ¡åç§»3</span>
many<span class="token operator">=</span>cur<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#æ‹¿å‡ºä¸‰æ¡ï¼Œç§»åˆ°åº•</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>one<span class="token punctuation">,</span><span class="token builtin">all</span><span class="token punctuation">,</span>many<span class="token punctuation">)</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">æœ‰å‘</p> <p>æ’å…¥æ•°æ®åº“è¦ä¿è¯å¥å£®æ€§ï¼Œç‰¹æ®Šå­—ç¬¦æå‰å¤„ç†æ¯”å¦‚å»æ‰å•å¼•å·ï¼Œåæ–œæ ï¼Œç¼–ç å­—ç¬¦ç­‰<br>
å››å­—èŠ‚å­—ç¬¦å…¥åº“æ—¶\xF0\x9F\x99\x8Fåƒè¿™æ · <br>
é¦–å…ˆä¿®æ”¹ my.ini ç¼–ç é›†ä¸ºutf8mb4 æ•°æ®åº“å’Œè¡¨æ”¹ä¸ºutf8mb4<br>
è¿˜ä¸è¡Œçš„è¯åˆ åº“é‡æ–°æ–°å»ºé€‰æ‹©å­—ç¬¦é›†utf8mb4<br>
è¿æ¥æ•°æ®åº“çš„æ—¶å€™æ”¹ä¸ºutf8mb4é‡å¯mysqldæœåŠ¡</p></div> <h3 id="pymongo"><a href="#pymongo" aria-hidden="true" class="header-anchor">#</a> PyMongo</h3> <p><strong><em>pip install pymongo</em></strong><br>
mongoçš„æ“ä½œçœ‹<a href="/blog/back/æ•°æ®ç›¸å…³.html#mongodb">è¿™é‡Œ</a></p><h4>è¿æ¥</h4><p></p> <p>ç®€å†™(é»˜è®¤è¿æ¥æœ¬åœ°)<br>
client=MongoClient()<br>
æŒ‡å®šç«¯å›—å’Œåœ°å€<br>
client=MongoClient(localhostï¼Œ27017)<br>
ä½¿ç”¨URI <br>
client=MongoClient(mongodb://localhostï¼š27017/&quot;)<br>
client.PORT,client.HOST,client.list_database_names()<br>
db=client.mydb # ä½¿ç”¨mydbï¼Œæ²¡æœ‰å°±è‡ªåŠ¨åˆ›å»º<br>
myset=db.my_set<br></p> <div class="tip custom-block"><p class="custom-block-title">å…³é—­</p> <p>å…³é—­æ•°æ®åº“çš„æ—¶å€™è°ƒç”¨client.close()ä¹‹åä»ç„¶èƒ½ä½¿ç”¨å±æ€§ï¼Œæ¯”å¦‚åœ¨æ‰“å°ä¸€æ¬¡ä¹Ÿèƒ½æ‰“å°å‡ºæ¥ï¼Œyinweimongoé»˜è®¤æœ‰ä¸ªè¿æ¥æ± ï¼Œåªè¦æ²¡æ»¡éšæ—¶éƒ½èƒ½è¿</p></div> <h4>å¢åˆ æ”¹æŸ¥</h4> <ul><li>æ’å…¥<br> <strong><em>my_set.insert([{&quot;name&quot;:&quot;zhangsan&quot;,&quot;age&quot;:18},{&quot;name&quot;:&quot;lilin&quot;,&quot;age&quot;:18}])</em></strong><br> <strong><em>my_set.save({&quot;name&quot;:&quot;zhangsan&quot;,&quot;age&quot;:18})</em></strong><br>
saveçš„æ—¶å€™ä»–ä¼šéå†ï¼Œä½†æ˜¯insertä¸ä¼šï¼Œæ‰€ä»¥insertå¿«ä¸€äº›<br></li> <li>æŸ¥è¯¢è¿™ä¸ªé›†åˆæ‰€æœ‰çš„æ•°æ®(éœ€è¦ç”¨foréå†)
<strong><em>my_set.find()</em></strong><br></li> <li>æŸ¥æ‰¾åå­—ä¸ºzhangsançš„æ•°æ®(éœ€è¦ç”¨foréå†)<br> <strong><em>my_set.find({&quot;name&quot;:&quot;zhangsan&quot;})</em></strong><br></li> <li>å–å‡ºè¿™æ¡è®°å½•çš„'id'ä¾æ­¤ç±»æ¨å¯ä»¥å¾€åå–<br> <strong><em>id=my_set.find({&quot;name&quot;:&quot;zhangsan&quot;})['id']</em></strong><br></li> <li>ç§»é™¤è¿™ä¸ªè®°å½•çš„id<br> <strong><em>my_set.remove(id)</em></strong><br></li> <li>æŠŠnameä¸ºzhangsançš„ageæ”¹ä¸º20<br> <strong><em>my_set.update({&quot;name&quot;:&quot;zhangsan&quot;},{'$set':{&quot;age&quot;:20}})</em></strong><br></li> <li>ç§»é™¤å¼ ä¸‰è¿™ä¸ªæ•°æ®çš„å…¨éƒ¨è®°å½•<br> <strong><em>my_set.remove({'name': 'zhangsan'})</em></strong><br></li> <li>åˆ æ‰è¿™ä¸ªåº“<br> <strong><em>db.remove()</em></strong><br></li></ul> <h4>æ“ä½œå’ŒæŸ¥è¯¢ç¬¦</h4> <ol><li>æŸ¥è¯¢ç¬¦
<ul><li>&gt;  å¤§äº - $gt</li> <li>&lt;  å°äº - $lt</li> <li>&gt;=  å¤§äºç­‰äº - $gte</li> <li>&lt;=  å°äºç­‰äº - $lte</li></ul></li></ol> <ul><li>ageå¤§äº25çš„è®°å½•
<strong><em>my_set.find({&quot;age&quot;:{&quot;$gt&quot;:25}})</em></strong><br></li></ul> <ol start="2"><li>ç±»å‹åˆ¤æ–­<br>
å‘ç°å­—ç¬¦ä¸²ç±»å‹çš„name<br> <strong><em>my_set.find({'name':{'$type':2}})</em></strong><br> <div align="center">ç±»å‹å¯¹ç…§è¡¨<br></div><br></li></ol> <table><thead><tr><th>ç±»å‹</th> <th style="text-align:right">ç </th></tr></thead> <tbody><tr><td>Double</td> <td style="text-align:right">ç±»å‹ä»£ç  1</td></tr> <tr><td>String</td> <td style="text-align:right">ç±»å‹ä»£ç  2</td></tr> <tr><td>Object</td> <td style="text-align:right">ç±»å‹ä»£ç  3</td></tr> <tr><td>Array</td> <td style="text-align:right">ç±»å‹ä»£ç  4</td></tr> <tr><td>Binary data</td> <td style="text-align:right">ç±»å‹ä»£ç  5</td></tr> <tr><td>Boolean</td> <td style="text-align:right">ç±»å‹ä»£ç  8</td></tr> <tr><td>Date</td> <td style="text-align:right">ç±»å‹ä»£ç  9</td></tr> <tr><td>Null</td> <td style="text-align:right">ç±»å‹ä»£ç  10</td></tr> <tr><td>Regular Expression</td> <td style="text-align:right">ç±»å‹ä»£ç  11</td></tr> <tr><td>JavaScript</td> <td style="text-align:right">ç±»å‹ä»£ç  13</td></tr> <tr><td>Symbol</td> <td style="text-align:right">ç±»å‹ä»£ç  14</td></tr> <tr><td>JavaScript (with scope)</td> <td style="text-align:right">ç±»å‹ä»£ç  15</td></tr> <tr><td>32-bit integer</td> <td style="text-align:right">ç±»å‹ä»£ç  16</td></tr> <tr><td>Timestamp</td> <td style="text-align:right">ç±»å‹ä»£ç  17</td></tr> <tr><td>64-bit integer</td> <td style="text-align:right">ç±»å‹ä»£ç  18</td></tr> <tr><td>Min key</td> <td style="text-align:right">ç±»å‹ä»£ç  255</td></tr> <tr><td>Max key</td> <td style="text-align:right">ç±»å‹ä»£ç  127</td></tr></tbody></table> <ol start="3"><li>æ¡ä»¶æŸ¥è¯¢</li></ol> <ul><li><p>æ’åº<br>
ageå‡åºæŸ¥è¯¢<br> <strong><em>my_set.find().sort([(&quot;age&quot;,1)])</em></strong><br></p></li> <li><p>è¯»å–
è·³è¿‡ä¸¤æ¡ä¹‹åè¯»å…­æ¡<br> <strong><em>my_set.find().skip(2).limit(6)</em></strong><br></p></li> <li><p>in<br>
å‘ç°å¹´é¾„ï¼ˆ20ï¼Œ30ï¼Œ53ï¼‰ä¸­çš„æ•°æ®<br></p></li></ul> <p><strong><em>my_set.find({&quot;age&quot;:{&quot;$in&quot;:(20,30,35)}})</em></strong><br></p> <ul><li>or<br></li></ul> <p>å‘ç°ageæ˜¯20æˆ–35çš„æ•°æ®
<br></p> <p><strong><em>my_set.find({&quot;$or&quot;:[{&quot;age&quot;:20},{&quot;age&quot;:35}]})</em></strong><br></p> <ul><li>all<br>
æŸ¥è¯¢åºåˆ—çš„åŒ…å«<br></li></ul> <p>dic = {&quot;name&quot;:&quot;xiahong&quot;,&quot;age&quot;:18,&quot;li&quot;:[1,2,3]}<br>
dic2 = {&quot;name&quot;:&quot;xiaoming&quot;,&quot;age&quot;:18,&quot;li&quot;:[1,2,3,4,5,6]}<br></p> <p><strong><em>my_set.find({'li':{'$all':[1,2,3,4]}})</em></strong><br>
ç»“æœåªä¼šå‡ºç°dic2</p> <ul><li>push[ALL]
æ›´æ”¹åºåˆ—<br>
å•ä¸ªå€¼: my_set.update({'name':&quot;xiaohong&quot;}, {'$push':{'li':[4]}})<br>
å¤šä¸ªè¿½åŠ : my_set.update({'name':&quot;xiaohong&quot;}, {'$pushAll':{'li':[4,5]}})<br>
dic = {&quot;name&quot;:&quot;xiahong&quot;,&quot;age&quot;:18,&quot;li&quot;:[1,2,3,4,4,5]}</li> <li>pop/pullAll
å•ä¸ªå€¼: my_set.update({'name':&quot;xiaohong&quot;}, {'$pop':{'li':[4]}})<br>
å»é™¤å¤šä¸ª: my_set.update({'name':&quot;xiaohong&quot;}, {'$pullAll':{'li':[4,5]}})<br>
dic = {&quot;name&quot;:&quot;xiahong&quot;,&quot;age&quot;:18,&quot;li&quot;:[1,2,3]}</li> <li>å¤šçº§ç›®å½•æ“ä½œ<br>
å–çš„æ—¶å€™ç”¨.è¿æ¥ï¼Œç»“æœç”¨['å­—å…¸è°ƒç”¨']æ–¹å¼è¿æ¥<br>
æŸ¥æ‰¾aå±æ€§çš„bå±æ€§çš„cå±æ€§å€¼ä¸º5çš„æ•°æ®<br> <strong><em>my_set.find(a.b.c:5)</em></strong><br>
æ‹¿åˆ°ç»“æœçš„aå±æ€§çš„bå±æ€§çš„cå±æ€§å€¼<br> <strong><em>res['a']['b']['c']</em></strong><br></li></ul> <div class="tip custom-block"><p class="custom-block-title">æç¤º</p> <p>update,$setç­‰ä¹Ÿæ˜¯è¿™ä¹ˆå¯»æ‰¾</p></div> <h3 id="redis"><a href="#redis" aria-hidden="true" class="header-anchor">#</a> redis</h3> <h4>pip install redis</h4><br> <h4>è¿æ¥</h4> <h4>è¿æ¥</h4> <h4>è¿æ¥</h4> <h4>è¿æ¥</h4> <h4>è¿æ¥</h4> <h3 id="aiomysql"><a href="#aiomysql" aria-hidden="true" class="header-anchor">#</a> aiomysql</h3> <p>ä¾èµ–<br></p> <ul><li>Python3.5+</li> <li>asyncio</li> <li>PyMySQL<br>
eventloop+while Trueæ¨¡å¼è¿›è¡Œæ’å…¥å¼‚æ­¥è¿›è¡Œ</li></ul> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">import</span> asyncio
<span class="token keyword">from</span> aiomysql <span class="token keyword">import</span> create_pool

<span class="token keyword">import</span> aiohttp

loop<span class="token operator">=</span>asyncio<span class="token punctuation">.</span>get_event_loop<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">async</span> <span class="token keyword">with</span> create_pool<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>password<span class="token operator">=</span><span class="token string">'1118'</span><span class="token punctuation">,</span>db<span class="token operator">=</span><span class="token string">'aiosql'</span><span class="token punctuation">,</span>charset<span class="token operator">=</span><span class="token string">'utf8mb4'</span><span class="token punctuation">,</span>loop<span class="token operator">=</span>loop<span class="token punctuation">)</span> <span class="token keyword">as</span> pool<span class="token punctuation">:</span>
        <span class="token keyword">async</span> <span class="token keyword">with</span> pool<span class="token punctuation">.</span>acquire<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> conn<span class="token punctuation">:</span><span class="token comment">#è·å¾—pool</span>
            <span class="token keyword">async</span> <span class="token keyword">with</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> cur<span class="token punctuation">:</span><span class="token comment">#åˆ›å»ºæ¸¸æ ‡</span>
                <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#å¼‚æ­¥è¿è¡Œäº†ä¸€ç™¾æ¬¡è¿™ä¸ªsqlè¯­å¥</span>
                    <span class="token keyword">await</span> cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'select * from aio limit 1;'</span><span class="token punctuation">)</span>
                    value<span class="token operator">=</span> <span class="token keyword">await</span> cur<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token keyword">print</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>

loop<span class="token punctuation">.</span>run_until_complete<span class="token punctuation">(</span>go<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>é€šè¿‡è¿æ¥æ± æ¥è¿æ¥</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">test</span><span class="token punctuation">(</span>loop<span class="token punctuation">)</span><span class="token punctuation">:</span>
    pool<span class="token operator">=</span><span class="token keyword">await</span> create_pool<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'127.0.0.1'</span><span class="token punctuation">,</span>port<span class="token operator">=</span><span class="token number">3306</span><span class="token punctuation">,</span>user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">,</span>password<span class="token operator">=</span><span class="token string">'1118'</span><span class="token punctuation">,</span>db<span class="token operator">=</span><span class="token string">'aiosql'</span><span class="token punctuation">,</span>charset<span class="token operator">=</span><span class="token string">'utf8mb4'</span><span class="token punctuation">,</span>loop<span class="token operator">=</span>loop<span class="token punctuation">)</span>
    <span class="token keyword">async</span> <span class="token keyword">with</span> pool<span class="token punctuation">.</span>acquire<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> conn<span class="token punctuation">:</span>
        <span class="token keyword">async</span> <span class="token keyword">with</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> cur<span class="token punctuation">:</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">await</span> cur<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">'select * from aio limit 1;'</span><span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>description<span class="token punctuation">)</span>
                <span class="token punctuation">(</span>r<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">await</span> cur<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
    pool<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">await</span> pool<span class="token punctuation">.</span>wait_closed<span class="token punctuation">(</span><span class="token punctuation">)</span>

loop<span class="token operator">=</span>asyncio<span class="token punctuation">.</span>get_event_loop<span class="token punctuation">(</span><span class="token punctuation">)</span>
loop<span class="token punctuation">.</span>run_until_complete<span class="token punctuation">(</span>test<span class="token punctuation">(</span>loop<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="scrapy"><a href="#scrapy" aria-hidden="true" class="header-anchor">#</a> Scrapy</h2> <p>çœ‹<a href="/blog/back/python/scrapy%E7%9B%B8%E5%85%B3.html">è¿™é‡Œ</a>æˆ–è€…ä¸‹ä¸€ç¯‡
<div id="vcomments"></div></p></div> <!----> <!----> <!----> <div class="page-edit" data-v-cdcae5a4><!----> <div class="last-updated" data-v-cdcae5a4><span class="prefix" data-v-cdcae5a4>Last Updated: </span> <span class="time" data-v-cdcae5a4>12/29/2019, 3:00:55 PM</span></div></div> <div class="page-nav" data-v-cdcae5a4><p class="inner" data-v-cdcae5a4><!----> <span class="next" data-v-cdcae5a4><a href="/blog/back/python/scrapyç›¸å…³.html" data-v-cdcae5a4>
          Scrapy(old)
        </a>
        â†’
      </span></p></div> </div> <div class="valine-wrapper" data-v-63f18ac0><div id="valine" style="display:;" data-v-63f18ac0></div></div> <!----> <!----> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-41016a8b data-v-41016a8b><i class="iconfont reco-up" data-v-41016a8b></i></div></div></div></div>
    <script src="/assets/js/app.64171550.js" defer></script><script src="/assets/js/18.78f0824a.js" defer></script><script src="/assets/js/38.34e99c36.js" defer></script>
  </body>
</html>
