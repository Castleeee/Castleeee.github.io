<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>git | 会走路的三百块</title>
    <meta name="description" content="年轻人的博客">
    <link rel="icon" href="/logo1.ico" type="image/x-icon">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.d22626bb.css" as="style"><link rel="preload" href="/assets/js/app.64171550.js" as="script"><link rel="preload" href="/assets/js/8.a4265244.js" as="script"><link rel="preload" href="/assets/js/38.34e99c36.js" as="script"><link rel="prefetch" href="/assets/js/10.f30e4bf5.js"><link rel="prefetch" href="/assets/js/100.14a8b555.js"><link rel="prefetch" href="/assets/js/101.9e257240.js"><link rel="prefetch" href="/assets/js/11.c050169c.js"><link rel="prefetch" href="/assets/js/12.9abd0678.js"><link rel="prefetch" href="/assets/js/13.ca763ee5.js"><link rel="prefetch" href="/assets/js/14.69f05fca.js"><link rel="prefetch" href="/assets/js/15.db5225be.js"><link rel="prefetch" href="/assets/js/16.c6de58f6.js"><link rel="prefetch" href="/assets/js/17.a33727a2.js"><link rel="prefetch" href="/assets/js/18.78f0824a.js"><link rel="prefetch" href="/assets/js/19.20a4f3cf.js"><link rel="prefetch" href="/assets/js/20.15fb9aec.js"><link rel="prefetch" href="/assets/js/21.c2410e24.js"><link rel="prefetch" href="/assets/js/22.6423d49a.js"><link rel="prefetch" href="/assets/js/23.1b0b2120.js"><link rel="prefetch" href="/assets/js/24.93132bac.js"><link rel="prefetch" href="/assets/js/25.a334198a.js"><link rel="prefetch" href="/assets/js/26.c1c7aaa3.js"><link rel="prefetch" href="/assets/js/27.2c86a0cd.js"><link rel="prefetch" href="/assets/js/28.a9d5d0ae.js"><link rel="prefetch" href="/assets/js/29.82f2e489.js"><link rel="prefetch" href="/assets/js/3.465cd447.js"><link rel="prefetch" href="/assets/js/30.d0c8250c.js"><link rel="prefetch" href="/assets/js/31.e6286844.js"><link rel="prefetch" href="/assets/js/32.116769da.js"><link rel="prefetch" href="/assets/js/33.38e22b91.js"><link rel="prefetch" href="/assets/js/34.21d15ece.js"><link rel="prefetch" href="/assets/js/35.53517849.js"><link rel="prefetch" href="/assets/js/36.9b848dcf.js"><link rel="prefetch" href="/assets/js/37.bf3574bb.js"><link rel="prefetch" href="/assets/js/39.10a54121.js"><link rel="prefetch" href="/assets/js/4.9d750d27.js"><link rel="prefetch" href="/assets/js/40.0ead9dc2.js"><link rel="prefetch" href="/assets/js/41.16bfab2f.js"><link rel="prefetch" href="/assets/js/42.b0388f8b.js"><link rel="prefetch" href="/assets/js/43.1d51bbcb.js"><link rel="prefetch" href="/assets/js/44.9e15a8ac.js"><link rel="prefetch" href="/assets/js/45.c9a7ee30.js"><link rel="prefetch" href="/assets/js/46.0821d6b3.js"><link rel="prefetch" href="/assets/js/47.fdd4b2c4.js"><link rel="prefetch" href="/assets/js/48.c86a3241.js"><link rel="prefetch" href="/assets/js/49.29d7cdaf.js"><link rel="prefetch" href="/assets/js/5.b5540d72.js"><link rel="prefetch" href="/assets/js/50.88cae993.js"><link rel="prefetch" href="/assets/js/51.39b0672d.js"><link rel="prefetch" href="/assets/js/52.47b9c89c.js"><link rel="prefetch" href="/assets/js/53.561866dc.js"><link rel="prefetch" href="/assets/js/54.44ad8aef.js"><link rel="prefetch" href="/assets/js/55.999cd3f5.js"><link rel="prefetch" href="/assets/js/56.0fc25a14.js"><link rel="prefetch" href="/assets/js/57.fbeec51d.js"><link rel="prefetch" href="/assets/js/58.c2c3e960.js"><link rel="prefetch" href="/assets/js/59.388b8a2f.js"><link rel="prefetch" href="/assets/js/6.9305fa77.js"><link rel="prefetch" href="/assets/js/60.3bab7106.js"><link rel="prefetch" href="/assets/js/61.fab74e1f.js"><link rel="prefetch" href="/assets/js/62.b8451d9d.js"><link rel="prefetch" href="/assets/js/63.1ea19cc7.js"><link rel="prefetch" href="/assets/js/64.21f37b67.js"><link rel="prefetch" href="/assets/js/65.79da4678.js"><link rel="prefetch" href="/assets/js/66.2276f1ea.js"><link rel="prefetch" href="/assets/js/67.cf3e97e4.js"><link rel="prefetch" href="/assets/js/68.3b9433a6.js"><link rel="prefetch" href="/assets/js/69.a6723b19.js"><link rel="prefetch" href="/assets/js/7.8235c05c.js"><link rel="prefetch" href="/assets/js/70.eff0cc02.js"><link rel="prefetch" href="/assets/js/71.577ad016.js"><link rel="prefetch" href="/assets/js/72.ee1b8084.js"><link rel="prefetch" href="/assets/js/73.ce23853b.js"><link rel="prefetch" href="/assets/js/74.e51d0dc7.js"><link rel="prefetch" href="/assets/js/75.3fbf6e41.js"><link rel="prefetch" href="/assets/js/76.1ad79723.js"><link rel="prefetch" href="/assets/js/77.05aaa2f4.js"><link rel="prefetch" href="/assets/js/78.9e4bf317.js"><link rel="prefetch" href="/assets/js/79.028f9c41.js"><link rel="prefetch" href="/assets/js/80.a83e9fee.js"><link rel="prefetch" href="/assets/js/81.e20ef630.js"><link rel="prefetch" href="/assets/js/82.0a2c28d1.js"><link rel="prefetch" href="/assets/js/83.84f22d3a.js"><link rel="prefetch" href="/assets/js/84.8c0c443d.js"><link rel="prefetch" href="/assets/js/85.1473a2e2.js"><link rel="prefetch" href="/assets/js/86.4683653f.js"><link rel="prefetch" href="/assets/js/87.9507aa61.js"><link rel="prefetch" href="/assets/js/88.77ce595e.js"><link rel="prefetch" href="/assets/js/89.d25806a8.js"><link rel="prefetch" href="/assets/js/9.56b90d44.js"><link rel="prefetch" href="/assets/js/90.231b245f.js"><link rel="prefetch" href="/assets/js/91.cb1ec410.js"><link rel="prefetch" href="/assets/js/92.10cedbd9.js"><link rel="prefetch" href="/assets/js/93.575cc043.js"><link rel="prefetch" href="/assets/js/94.9233e13a.js"><link rel="prefetch" href="/assets/js/95.fafa9bc4.js"><link rel="prefetch" href="/assets/js/96.8b941223.js"><link rel="prefetch" href="/assets/js/97.49080105.js"><link rel="prefetch" href="/assets/js/98.82d1cc72.js"><link rel="prefetch" href="/assets/js/99.d78b0b9a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0cd5f832.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d22626bb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div><header id="navbarWrapper" class="navbar"><div class="sidebar-button"><i class="iconfont reco-menu"></i></div> <a href="/" class="home-link router-link-active"><img src="/head3.png" alt="会走路的三百块" class="logo"> <span class="site-name">会走路的三百块</span></a> <div class="links" style="max-width:nullpx;"><div class="side-search-wrapper"><div class="search-box" data-v-1b2e3b29><input aria-label="Search" autocomplete="off" spellcheck="false" value="" data-v-1b2e3b29> <i class="iconfont reco-search" data-v-1b2e3b29></i> <!----></div></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/backEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/frontEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/bigData.html" class="nav-link"><i class="iconfont undefined"></i>
  大数据
</a></li><li class="dropdown-item"><!----> <a href="/categories/Distributed.html" class="nav-link"><i class="iconfont undefined"></i>
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/categories/life.html" class="nav-link"><i class="iconfont undefined"></i>
  日记
</a></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/categories/article.html" class="nav-link"><i class="iconfont reco-up"></i>
  Library
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/about.html" class="nav-link"><i class="iconfont reco-account"></i>
  about me
</a></div><div class="nav-item"><a href="https://www.jianshu.com/u/04777e91e2ef" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  简书
  </a></div><div class="nav-item"><a href="https://github.com/Castleeee" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  </a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><div class="side-search-wrapper"><div class="search-box" data-v-1b2e3b29><input aria-label="Search" autocomplete="off" spellcheck="false" value="" data-v-1b2e3b29> <i class="iconfont reco-search" data-v-1b2e3b29></i> <!----></div></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/backEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  后端
</a></li><li class="dropdown-item"><!----> <a href="/categories/frontEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/bigData.html" class="nav-link"><i class="iconfont undefined"></i>
  大数据
</a></li><li class="dropdown-item"><!----> <a href="/categories/Distributed.html" class="nav-link"><i class="iconfont undefined"></i>
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/categories/life.html" class="nav-link"><i class="iconfont undefined"></i>
  日记
</a></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/categories/article.html" class="nav-link"><i class="iconfont reco-up"></i>
  Library
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/about.html" class="nav-link"><i class="iconfont reco-account"></i>
  about me
</a></div><div class="nav-item"><a href="https://www.jianshu.com/u/04777e91e2ef" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  简书
  </a></div><div class="nav-item"><a href="https://github.com/Castleeee" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  </a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><!----></p> <ul class="sidebar-group-items"><li><a href="/blog/back/linux/git.html#工具测评" class="sidebar-link">工具测评</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/back/linux/git.html#git操作" class="sidebar-link">Git操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/back/linux/git.html#初始化" class="sidebar-link">初始化</a></li><li class="sidebar-sub-header"><a href="/blog/back/linux/git.html#查看" class="sidebar-link">查看</a></li><li class="sidebar-sub-header"><a href="/blog/back/linux/git.html#基本的操作" class="sidebar-link">基本的操作</a></li><li class="sidebar-sub-header"><a href="/blog/back/linux/git.html#分支和合并" class="sidebar-link">分支和合并</a></li><li class="sidebar-sub-header"><a href="/blog/back/linux/git.html#ignore语法" class="sidebar-link">ignore语法</a></li></ul></li><li><a href="/blog/back/linux/git.html#服务器部署" class="sidebar-link">服务器部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/back/linux/git.html#申请用户" class="sidebar-link">申请用户</a></li><li class="sidebar-sub-header"><a href="/blog/back/linux/git.html#添加公钥" class="sidebar-link">添加公钥</a></li><li class="sidebar-sub-header"><a href="/blog/back/linux/git.html#修改权限并创建仓库" class="sidebar-link">修改权限并创建仓库</a></li><li class="sidebar-sub-header"><a href="/blog/back/linux/git.html#推送到远端" class="sidebar-link">推送到远端</a></li></ul></li><li><a href="/blog/back/linux/git.html#工作流" class="sidebar-link">工作流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/back/linux/git.html#gitflow" class="sidebar-link">gitflow</a></li><li class="sidebar-sub-header"><a href="/blog/back/linux/git.html#github工作流" class="sidebar-link">github工作流</a></li><li class="sidebar-sub-header"><a href="/blog/back/linux/git.html#gitolite" class="sidebar-link">gitolite</a></li></ul></li><li><a href="/blog/back/linux/git.html#参考资料" class="sidebar-link">参考资料</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page" data-v-cdcae5a4> <div class="page-title" data-v-cdcae5a4><h1 data-v-cdcae5a4>git</h1> <hr data-v-cdcae5a4> <div data-v-2c25cede data-v-cdcae5a4><i class="iconfont reco-account" data-v-2c25cede><span data-v-2c25cede>会走路的三百块</span></i> <i class="iconfont reco-date" data-v-2c25cede><span data-v-2c25cede>11/5/2019</span></i> <!----> <i class="iconfont reco-tag tags" data-v-2c25cede><span class="tag-item" data-v-2c25cede>
      代码之外
    </span><span class="tag-item" data-v-2c25cede>
      后端
    </span><span class="tag-item" data-v-2c25cede>
      linux🐧
    </span><span class="tag-item" data-v-2c25cede>
      所有文章
    </span></i></div></div> <div class="content" data-v-cdcae5a4><h2 id="工具测评"><a href="#工具测评" aria-hidden="true" class="header-anchor">#</a> 工具测评</h2> <p><strong>gitkraken</strong><br>
基本功能齐全，还能追踪issue，支持本地仓库部署，不支持私仓库，付费可以单号基本功能都有，没必要付费。<br> <strong>tortoiseGit</strong><br>
超级好用，右键直接启用，占用资源小，有中文，有点复古不过还好，实用性抵消了不好看。<br> <strong>GitGUI</strong><br>
自带的没怎么用过。<br> <strong>SourceTree</strong><br>
免费，基本功能齐全，好用，不过不好看。<br> <strong>GitDesktop</strong><br>
不大好用，不是很习惯，而且每次打开还要安装</p> <h2 id="git操作"><a href="#git操作" aria-hidden="true" class="header-anchor">#</a> Git操作</h2> <h3 id="初始化"><a href="#初始化" aria-hidden="true" class="header-anchor">#</a> 初始化</h3> <p>这是<a href="https://rogerdudler.github.io/git-guide/index.zh.html">简单指南</a>，可以放在收藏夹想不起来了拿起来看看.<br>
装好之后先配置一下账户。<br> <strong><code>git config --global user.name &quot;ooowl&quot;</code></strong><br> <strong><code>git config --global user.email &quot;2411708618aqq.com&quot;</code></strong><br> <strong><code>git config --global core.editor vim</code></strong><br>
作者是谁，仓库commit会有你的名字，名字和email(名字可以重复但email一般唯一)并不作为身份标识，只是一个标记而已所有的独立提交不记名只验证公钥或github账号,你可以通过这样来查看<br> <strong><code>git config user.name</code></strong><br> <strong><code>git config user.email</code></strong><br>
进入到你想建立的目录下，用git init就会在该目录下生成一个.git文件夹，想知道这个文件夹里面是什么就自己去搜。</p> <h3 id="查看"><a href="#查看" aria-hidden="true" class="header-anchor">#</a> 查看</h3> <p><strong><code>git status</code></strong> 看看自己目前仓库里未跟踪的文件，修改未提交的文件<br> <strong><code>git log (--oneline --all --graph )</code></strong> 查看所有的提交记录，回滚需要至少7位id，-p查看提交具体干了啥,--all查看所有的分支，--graph 尽可能用图形表示。<br> <strong><code>git reflog</code></strong> 查看命令历史，以便确定要回到未来的哪个版本<br> <strong><code>git remote -v</code></strong> 查看你的远程仓库的路径<br></p><div align="center"><img src="/assets/img/截图 2019-11-06_17-33-14.50624875.png" style="height: 250px"></div><p></p> <h3 id="基本的操作"><a href="#基本的操作" aria-hidden="true" class="header-anchor">#</a> 基本的操作</h3> <p><strong><code>git clone Address</code></strong> 克隆项目<br> <strong><code>git add (.)</code></strong> 把文件添加到暂存区，未跟踪的文件可以直接添加为跟踪<br> <strong><code>git restore</code></strong><br> <strong><code>git push -u origin master</code></strong> 推送到 远程的master分支<br> <strong><code>git fetch</code></strong> 从分支获取<br> <strong><code>git pull</code></strong> 获取分支<br> <strong><code>git commit -m &quot;你的提交信息&quot;</code></strong><br> <strong><code>git checkout (id or -)(/path/file)</code></strong> 回到(某个or上一个)提交点，可以直接用tag名,跟文件名可以直接修改单独某个文件<br> <strong><code>git tag (-a 标签名 -m &quot;标签信息&quot; -d 标签or id删除 ) (id)</code></strong> 默认加在最近的commit上，如果想加其他commit 后面跟上id<br> <strong><code>git remote add Name RemoteAddress.git</code></strong> 添加一个远程仓库地址。</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>https是无状态的，使用https提交每次都要输入用户名和密码，SSH url克隆需要在克隆之前先配置和添加好SSH key，ssh默认是每次fetch和push代码都不需要输入账号和密码，如果你想要每次都输入账号密码才能进行fetch和push也可以另外进行设置。</p></div> <p><strong><code>git rm --cached 文件名</code></strong> 停止对git已跟踪的文件跟踪，但保留之前该文件的跟踪状态</p> <blockquote><p>在一个分支下开发，这种做法是没有问题的。即在 master 分支里，使用如上操作之后，config.js 就从 git 管理中剔除了，但是仍然存在于硬盘上。并不会影响到本地开发环境的正常调试。<br>
如果同时满足以下条件的情况下就会出问题<br>
    1 多分支同时存在 config.php 文件。例如，master 分支，dev 分支都有 config.php 文件<br>
    2 一个分支删除了该文件，然后在另一个分支，merge 了该提交<br>
这时候dev和master分支的config.js就全消失了。</p></blockquote> <p><strong><code>git update-index --assume-unchanged 文件名</code></strong> 暂时让git忽略已跟踪的文件,具体看<a href="https://segmentfault.com/q/1010000000430426">这一篇</a></p> <blockquote><p>虽然能达到（暂时的）目的，但并非最正确的做法，这样做是误解了 git update-index 的含义，而且这样做带来的最直接（不良）后果是这样的：<br> <br>
    1 所有的团队成员都必须对目标文件执行：git update-index --assume-unchanged PATH。这是因为即使你让 Git 假装看不见目标文件的改变，但文件本身还是在 Git 的历史记录里的，所以团队的每个人在 fetch 的时候都会拉到目标文件的变更。（但实际上目标文件是根本不想被 Git 记录的，而不是假装看不见它发生了改变）<br> <br>
    2 一旦有人改变目标文件之后没有 git update-index --assume-unchanged PATH 就直接 push 了，那么接下来所有拉取了最新代码的成员必须重新执行 update-index，否则 Git 又会开始记录目标文件的变化。这一点实际上很常见的，比如说某成员换了机器或者硬盘，重新 clone 了一份代码库，由于目标文件还在 Git 的历史记录里，所以他／她很可能会忘记 update-index。</p></blockquote> <blockquote><p><strong>git update-index --assume-unchanged</strong> 的真正用法是这样的：<br>
    1 你正在修改一个巨大的文件，你先对其 <code>git update-index --assume-unchanged</code>，这样 Git 暂时不会理睬你对文件做的修改；<br>
    2 当你的工作告一段落决定可以提交的时候，重置改标识：<br> <code>git update-index --no-assume-unchanged</code>，于是 Git 只需要做一次更新，这是完全可以接受的了；<br>
    3 提交＋推送。</p></blockquote> <h3 id="分支和合并"><a href="#分支和合并" aria-hidden="true" class="header-anchor">#</a> 分支和合并</h3> <p><strong><code>git branch xxx</code></strong>  产生一个新分支，想回到某个点获取分支可以先checkout</p> <ul><li>产生新分支 git checkout -b xxx</li> <li>删除分支 git branch -d xxx
<strong><code>git merge xxx</code></strong> 将xxx合并到master，出现confilct的时候，大于号小于号和等号之间分别是两个分支不同的内容，最后需要在commit一次<br> <strong><code>it rebase</code></strong> 和mrege的作用是一样的，不过结果不同。</li></ul> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>merge会在head后面紧接着提交，合并后自动提交一次作为标记，worktree会有一个分支记录。<br>
rebase会在分支根提交点处接着提交，之后再跟上master该节点之后的的提交，worktree不会有分支记录。</p></div> <p><strong><code>git show (id or tag)</code></strong> 查看这次id和tag的详细信息，包括提交时间作者提交了啥等等</p> <p>图解（源水印）<br></p><div align="center"><img src="/assets/img/TQDj8Uo1pj3YkMSoeSitYC1QB4a019V68N6GZFBE.55e42759.png" style="height: 450px"></div><p></p> <h3 id="ignore语法"><a href="#ignore语法" aria-hidden="true" class="header-anchor">#</a> ignore语法</h3> <p>史上最全的<a href="https://github.com/github/gitignore">gitignore语法</a>模板<br>
1：<code>#</code> 此为注释<br>
2：<code>*.a</code> 忽略所有.a结尾的文件<br>
3：<code>!lib.a</code> 但lib.a除外<br>
4：<code>/todo</code> 仅仅忽略项目根目录下的todo文件，不包括subdir/todo<br>
5：<code>build/*</code> 忽略build/目录下的所有文件<br>
6：<code>doc/*.txt</code>忽略doc/notes.txt(只忽略doc下本身的文件)，但不包括doc/server/arch.txt(子目录下的文件)<br>
7：原来已经被跟踪的文件是无效的，必须先取消跟踪git rm --cache，下次提交就不会生效了<br>
8：<code>.idea/**/*</code> 忽略某个(idea)文件夹下所有的文件和子文件夹(递归忽略所有)</p> <h2 id="服务器部署"><a href="#服务器部署" aria-hidden="true" class="header-anchor">#</a> 服务器部署</h2> <p>常见的几种方案</p> <ul><li>带宽足够人少的时候建立一个文件共享，然后挂载目录，一块开发(人多不好用，坏了风险高)</li> <li>建立Git服务器，首先你需要一个能ssh的服务器主机，安装git</li></ul> <h3 id="申请用户"><a href="#申请用户" aria-hidden="true" class="header-anchor">#</a> 申请用户</h3> <p>申请用户并设置密码</p> <div class="language-shell extra-class"><pre class="language-text"><code>groupadd git //申请组,把用到的用户都啊计入到这个组里
useradd git -g git
passwd git
</code></pre></div><p>每个用户单独的ssh K,这样就可以一个用户对应一个工程互不影响,多个工程只要申请多个用户,放到git用户组更管理就可以了.<br>
设置用户只能使用git禁止登陆ssh,编辑<code>/etc/passwd</code></p> <div class="language- extra-class"><pre class="language-text"><code>git:x:502:504::/home/git:/bin/bash //找到这一行
git:x:502:504::/home/git:/bin/git-shell//改为这个
</code></pre></div><div align="center"><img src="/assets/img/Snipaste_2019-11-08_11-49-07.c5efa124.png" style="height: 350px"></div> <h3 id="添加公钥"><a href="#添加公钥" aria-hidden="true" class="header-anchor">#</a> 添加公钥</h3> <p>你也可以不添加直接ssh克隆,但是这样会每次都让你输入密码,只把开发记得公钥添加就行了<br>
首先在你的客户机上cmd运行</p> <div class="language- extra-class"><pre class="language-text"><code>ssh-keygen -t rsa -C &quot;xxxxx@mail.com&quot; 
//最后的又像是公钥里面显示的名字,自己开心就行
</code></pre></div><p>这样在下就得到了一对公钥和私钥<br></p><div align="center"><img src="/assets/img/Snipaste_2019-11-07_23-36-04.8e02e9f5.png" style="height: 150px"></div><p></p> <p>编辑<code>id_rsa.pub</code>里面就是你的公钥复制下来</p> <p>在服务器上进入<code>/etc/ssh</code> 目录，编辑 <code>sshd_config</code>，打开以下三个配置的注释：</p> <div class="language- extra-class"><pre class="language-text"><code>RSAAuthentication yes
PubkeyAuthentication yes
AuthorizedKeysFile .ssh/authorized_keys
/etc/rc.d/init.d/sshd restart //重启ssh
mkdir -p /home/git/.ssh
touch /home/git/.ssh/authorized_keys //新建了信任公钥
</code></pre></div><p>然后将客户机们的公钥<code>id_rsa.pub</code>里面的内容复制到git用户的<code>authorized_keys</code>里面</p> <h3 id="修改权限并创建仓库"><a href="#修改权限并创建仓库" aria-hidden="true" class="header-anchor">#</a> 修改权限并创建仓库</h3> <p>在home下建立对应的工程最好,每个用管理自己的工程</p> <div class="language- extra-class"><pre class="language-text"><code>sudo git init --bare /home/git/project1/test.git
</code></pre></div><p><strong>一定要修改权限!!!</strong><br>
免密登录也是这个权限,本身就是免密登录ssh传送的文件.</p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>修改 .ssh 目录的权限为 700<br>
修改 .ssh/authorized_keys 文件的权限为 600<br>
仓库,.ssh目录和authorized_keys都要修改所有者</p></div> <div class="language- extra-class"><pre class="language-text"><code>chmod 700  /home/git/.ssh
chmod 600  /home/git/.ssh/authorized_keys 
chown -R git:git /home/git/.ssh 
chown -R git:git /home/git/.ssh/authorized_keys 
chown -R git:git /home/git/project1/test.git  //chown -R 所有者:组
</code></pre></div><h3 id="推送到远端"><a href="#推送到远端" aria-hidden="true" class="header-anchor">#</a> 推送到远端</h3> <p>这时候应该可以clone了,url有两种写法(推荐ssh)</p> <div class="language- extra-class"><pre class="language-text"><code>git@192.168.0.100:/home/git/project1/test.git //SCP写法
ssh://git@192.168.0.100/home/git/project1/test.git //SSH写法
//Https的写法没有配置,而且每次都要输密码,团队协作不好用
</code></pre></div><div align="center"><img src="/assets/img/Snipaste_2019-11-08_00-27-17.ce941491.png" style="height: 350px"></div> <h2 id="工作流"><a href="#工作流" aria-hidden="true" class="header-anchor">#</a> 工作流</h2> <h3 id="gitflow"><a href="#gitflow" aria-hidden="true" class="header-anchor">#</a> gitflow</h3> <p>gitflow<a href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow">工作流</a>，团队开发的范例。<br></p><div align="center"><img src="/assets/img/截图 2019-11-08_13-59-35.a7a9f2a0.png" style="height: 350px"></div><p></p> <p>中小型团队协作时候很重要<br> <strong>大致注意下面这么几点</strong><br>
鸽了鸽了</p> <p>bitbucket提供免费私人5人无限制的私有仓库，gitlab和bitbucket提供精确到分支的权限控制,但bitbucket仍然是云托管，Gitlab占资源太大需要一个好服务器才行。</p> <h3 id="github工作流"><a href="#github工作流" aria-hidden="true" class="header-anchor">#</a> github工作流</h3> <div align="center"><img src="/assets/img/截图 2019-11-08_14-48-57.d397a968.png" style="height: 280px"></div> <p>主要流程为:</p> <ul><li>新建分支（Create a branch）</li> <li>提交修改（Add commits）</li> <li>创建PR（Open a Pull Request）</li> <li>代码评审（Discuss and review your code）</li> <li>部署（Deploy）</li> <li>合并（Merge）</li></ul> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>保持自己的fork最新 鸽了🕊</p></div> <p>部署（Deploy）发生在合并（Merge）之前，这就是 GitHub flow 的核心，非阻塞式集成----在产生任何副作用之前得知当前修改的所有集成效果，达到真正的持续集成<br>
体验一下Github开源软件如何PR和fork的工作模式<a href="https://help.github.com/en/github/getting-started-with-github/fork-a-repo">链接1</a> <a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests">链接2</a></p> <h3 id="gitolite"><a href="#gitolite" aria-hidden="true" class="header-anchor">#</a> gitolite</h3> <p>这个是用来管理的，可以精确控制分支读写权限，各种粒度都可以<br>
不进行身份验证，仅是授权(官方原话)。</p> <p>先鸽了</p> <h2 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料</h2> <ul><li><a href="https://www.cnblogs.com/dee0912/p/5815267.html#_label8">1 参 考</a></li> <li><a href="https://segmentfault.com/q/1010000000430426">2 参 考</a></li> <li><a href="https://biaoyansu.com">3 表严肃的课程</a></li> <li><a href="https://git-scm.com/book/zh/v1/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git-Gitolite">4 参 考</a></li> <li><a href="https://www.jianshu.com/p/5aa4123b2322">5 参 考</a></li></ul> <div id="vcomments"></div></div> <!----> <!----> <!----> <div class="page-edit" data-v-cdcae5a4><!----> <div class="last-updated" data-v-cdcae5a4><span class="prefix" data-v-cdcae5a4>Last Updated: </span> <span class="time" data-v-cdcae5a4>12/29/2019, 3:00:55 PM</span></div></div> <div class="page-nav" data-v-cdcae5a4><p class="inner" data-v-cdcae5a4><!----> <span class="next" data-v-cdcae5a4><a href="/blog/back/engineering/CI-CD.html" data-v-cdcae5a4>
          CI/CD
        </a>
        →
      </span></p></div> </div> <div class="valine-wrapper" data-v-63f18ac0><div id="valine" style="display:;" data-v-63f18ac0></div></div> <!----> <!----> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-41016a8b data-v-41016a8b><i class="iconfont reco-up" data-v-41016a8b></i></div></div></div></div>
    <script src="/assets/js/app.64171550.js" defer></script><script src="/assets/js/8.a4265244.js" defer></script><script src="/assets/js/38.34e99c36.js" defer></script>
  </body>
</html>
