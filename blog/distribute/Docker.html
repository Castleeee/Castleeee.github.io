<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DockerğŸ³ | ä¼šèµ°è·¯çš„ä¸‰ç™¾å—</title>
    <meta name="description" content="å¹´è½»äººçš„åšå®¢">
    <link rel="icon" href="/logo1.ico" type="image/x-icon">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.d22626bb.css" as="style"><link rel="preload" href="/assets/js/app.64171550.js" as="script"><link rel="preload" href="/assets/js/10.f30e4bf5.js" as="script"><link rel="preload" href="/assets/js/38.34e99c36.js" as="script"><link rel="prefetch" href="/assets/js/100.14a8b555.js"><link rel="prefetch" href="/assets/js/101.9e257240.js"><link rel="prefetch" href="/assets/js/11.c050169c.js"><link rel="prefetch" href="/assets/js/12.9abd0678.js"><link rel="prefetch" href="/assets/js/13.ca763ee5.js"><link rel="prefetch" href="/assets/js/14.69f05fca.js"><link rel="prefetch" href="/assets/js/15.db5225be.js"><link rel="prefetch" href="/assets/js/16.c6de58f6.js"><link rel="prefetch" href="/assets/js/17.a33727a2.js"><link rel="prefetch" href="/assets/js/18.78f0824a.js"><link rel="prefetch" href="/assets/js/19.20a4f3cf.js"><link rel="prefetch" href="/assets/js/20.15fb9aec.js"><link rel="prefetch" href="/assets/js/21.c2410e24.js"><link rel="prefetch" href="/assets/js/22.6423d49a.js"><link rel="prefetch" href="/assets/js/23.1b0b2120.js"><link rel="prefetch" href="/assets/js/24.93132bac.js"><link rel="prefetch" href="/assets/js/25.a334198a.js"><link rel="prefetch" href="/assets/js/26.c1c7aaa3.js"><link rel="prefetch" href="/assets/js/27.2c86a0cd.js"><link rel="prefetch" href="/assets/js/28.a9d5d0ae.js"><link rel="prefetch" href="/assets/js/29.82f2e489.js"><link rel="prefetch" href="/assets/js/3.465cd447.js"><link rel="prefetch" href="/assets/js/30.d0c8250c.js"><link rel="prefetch" href="/assets/js/31.e6286844.js"><link rel="prefetch" href="/assets/js/32.116769da.js"><link rel="prefetch" href="/assets/js/33.38e22b91.js"><link rel="prefetch" href="/assets/js/34.21d15ece.js"><link rel="prefetch" href="/assets/js/35.53517849.js"><link rel="prefetch" href="/assets/js/36.9b848dcf.js"><link rel="prefetch" href="/assets/js/37.bf3574bb.js"><link rel="prefetch" href="/assets/js/39.10a54121.js"><link rel="prefetch" href="/assets/js/4.9d750d27.js"><link rel="prefetch" href="/assets/js/40.0ead9dc2.js"><link rel="prefetch" href="/assets/js/41.16bfab2f.js"><link rel="prefetch" href="/assets/js/42.b0388f8b.js"><link rel="prefetch" href="/assets/js/43.1d51bbcb.js"><link rel="prefetch" href="/assets/js/44.9e15a8ac.js"><link rel="prefetch" href="/assets/js/45.c9a7ee30.js"><link rel="prefetch" href="/assets/js/46.0821d6b3.js"><link rel="prefetch" href="/assets/js/47.fdd4b2c4.js"><link rel="prefetch" href="/assets/js/48.c86a3241.js"><link rel="prefetch" href="/assets/js/49.29d7cdaf.js"><link rel="prefetch" href="/assets/js/5.b5540d72.js"><link rel="prefetch" href="/assets/js/50.88cae993.js"><link rel="prefetch" href="/assets/js/51.39b0672d.js"><link rel="prefetch" href="/assets/js/52.47b9c89c.js"><link rel="prefetch" href="/assets/js/53.561866dc.js"><link rel="prefetch" href="/assets/js/54.44ad8aef.js"><link rel="prefetch" href="/assets/js/55.999cd3f5.js"><link rel="prefetch" href="/assets/js/56.0fc25a14.js"><link rel="prefetch" href="/assets/js/57.fbeec51d.js"><link rel="prefetch" href="/assets/js/58.c2c3e960.js"><link rel="prefetch" href="/assets/js/59.388b8a2f.js"><link rel="prefetch" href="/assets/js/6.9305fa77.js"><link rel="prefetch" href="/assets/js/60.3bab7106.js"><link rel="prefetch" href="/assets/js/61.fab74e1f.js"><link rel="prefetch" href="/assets/js/62.b8451d9d.js"><link rel="prefetch" href="/assets/js/63.1ea19cc7.js"><link rel="prefetch" href="/assets/js/64.21f37b67.js"><link rel="prefetch" href="/assets/js/65.79da4678.js"><link rel="prefetch" href="/assets/js/66.2276f1ea.js"><link rel="prefetch" href="/assets/js/67.cf3e97e4.js"><link rel="prefetch" href="/assets/js/68.3b9433a6.js"><link rel="prefetch" href="/assets/js/69.a6723b19.js"><link rel="prefetch" href="/assets/js/7.8235c05c.js"><link rel="prefetch" href="/assets/js/70.eff0cc02.js"><link rel="prefetch" href="/assets/js/71.577ad016.js"><link rel="prefetch" href="/assets/js/72.ee1b8084.js"><link rel="prefetch" href="/assets/js/73.ce23853b.js"><link rel="prefetch" href="/assets/js/74.e51d0dc7.js"><link rel="prefetch" href="/assets/js/75.3fbf6e41.js"><link rel="prefetch" href="/assets/js/76.1ad79723.js"><link rel="prefetch" href="/assets/js/77.05aaa2f4.js"><link rel="prefetch" href="/assets/js/78.9e4bf317.js"><link rel="prefetch" href="/assets/js/79.028f9c41.js"><link rel="prefetch" href="/assets/js/8.a4265244.js"><link rel="prefetch" href="/assets/js/80.a83e9fee.js"><link rel="prefetch" href="/assets/js/81.e20ef630.js"><link rel="prefetch" href="/assets/js/82.0a2c28d1.js"><link rel="prefetch" href="/assets/js/83.84f22d3a.js"><link rel="prefetch" href="/assets/js/84.8c0c443d.js"><link rel="prefetch" href="/assets/js/85.1473a2e2.js"><link rel="prefetch" href="/assets/js/86.4683653f.js"><link rel="prefetch" href="/assets/js/87.9507aa61.js"><link rel="prefetch" href="/assets/js/88.77ce595e.js"><link rel="prefetch" href="/assets/js/89.d25806a8.js"><link rel="prefetch" href="/assets/js/9.56b90d44.js"><link rel="prefetch" href="/assets/js/90.231b245f.js"><link rel="prefetch" href="/assets/js/91.cb1ec410.js"><link rel="prefetch" href="/assets/js/92.10cedbd9.js"><link rel="prefetch" href="/assets/js/93.575cc043.js"><link rel="prefetch" href="/assets/js/94.9233e13a.js"><link rel="prefetch" href="/assets/js/95.fafa9bc4.js"><link rel="prefetch" href="/assets/js/96.8b941223.js"><link rel="prefetch" href="/assets/js/97.49080105.js"><link rel="prefetch" href="/assets/js/98.82d1cc72.js"><link rel="prefetch" href="/assets/js/99.d78b0b9a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0cd5f832.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d22626bb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div><header id="navbarWrapper" class="navbar"><div class="sidebar-button"><i class="iconfont reco-menu"></i></div> <a href="/" class="home-link router-link-active"><img src="/head3.png" alt="ä¼šèµ°è·¯çš„ä¸‰ç™¾å—" class="logo"> <span class="site-name">ä¼šèµ°è·¯çš„ä¸‰ç™¾å—</span></a> <div class="links" style="max-width:nullpx;"><div class="side-search-wrapper"><div class="search-box" data-v-1b2e3b29><input aria-label="Search" autocomplete="off" spellcheck="false" value="" data-v-1b2e3b29> <i class="iconfont reco-search" data-v-1b2e3b29></i> <!----></div></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/backEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  åç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/frontEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/bigData.html" class="nav-link"><i class="iconfont undefined"></i>
  å¤§æ•°æ®
</a></li><li class="dropdown-item"><!----> <a href="/categories/Distributed.html" class="nav-link"><i class="iconfont undefined"></i>
  åˆ†å¸ƒå¼
</a></li><li class="dropdown-item"><!----> <a href="/categories/life.html" class="nav-link"><i class="iconfont undefined"></i>
  æ—¥è®°
</a></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/categories/article.html" class="nav-link"><i class="iconfont reco-up"></i>
  Library
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/about.html" class="nav-link"><i class="iconfont reco-account"></i>
  about me
</a></div><div class="nav-item"><a href="https://www.jianshu.com/u/04777e91e2ef" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  ç®€ä¹¦
  </a></div><div class="nav-item"><a href="https://github.com/Castleeee" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  </a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><div class="side-search-wrapper"><div class="search-box" data-v-1b2e3b29><input aria-label="Search" autocomplete="off" spellcheck="false" value="" data-v-1b2e3b29> <i class="iconfont reco-search" data-v-1b2e3b29></i> <!----></div></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/backEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  åç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/frontEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/bigData.html" class="nav-link"><i class="iconfont undefined"></i>
  å¤§æ•°æ®
</a></li><li class="dropdown-item"><!----> <a href="/categories/Distributed.html" class="nav-link"><i class="iconfont undefined"></i>
  åˆ†å¸ƒå¼
</a></li><li class="dropdown-item"><!----> <a href="/categories/life.html" class="nav-link"><i class="iconfont undefined"></i>
  æ—¥è®°
</a></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/categories/article.html" class="nav-link"><i class="iconfont reco-up"></i>
  Library
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/about.html" class="nav-link"><i class="iconfont reco-account"></i>
  about me
</a></div><div class="nav-item"><a href="https://www.jianshu.com/u/04777e91e2ef" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  ç®€ä¹¦
  </a></div><div class="nav-item"><a href="https://github.com/Castleeee" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  </a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><!----></p> <ul class="sidebar-group-items"><li><a href="/blog/distribute/Docker.html#ğŸ³" class="sidebar-link">ğŸ³</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/distribute/Docker.html#å®‰è£…ä¸å¯åŠ¨" class="sidebar-link">å®‰è£…ä¸å¯åŠ¨</a></li><li class="sidebar-sub-header"><a href="/blog/distribute/Docker.html#åŸºæœ¬å‘½ä»¤" class="sidebar-link">åŸºæœ¬å‘½ä»¤</a></li><li class="sidebar-sub-header"><a href="/blog/distribute/Docker.html#dcokerfile" class="sidebar-link">dcokerfile</a></li><li class="sidebar-sub-header"><a href="/blog/distribute/Docker.html#åˆ†å±‚å­˜å‚¨" class="sidebar-link">åˆ†å±‚å­˜å‚¨</a></li><li class="sidebar-sub-header"><a href="/blog/distribute/Docker.html#volume" class="sidebar-link">volume</a></li><li class="sidebar-sub-header"><a href="/blog/distribute/Docker.html#é•œåƒä»“åº“" class="sidebar-link">é•œåƒä»“åº“</a></li><li class="sidebar-sub-header"><a href="/blog/distribute/Docker.html#æŒä¹…åŒ–" class="sidebar-link">æŒä¹…åŒ–</a></li></ul></li><li><a href="/blog/distribute/Docker.html#âš“" class="sidebar-link">âš“</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/distribute/Docker.html#windowså®‰è£…" class="sidebar-link">windowså®‰è£…</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/distribute/Docker.html#å®‰è£…k8s" class="sidebar-link">å®‰è£…k8s</a></li><li class="sidebar-sub-header"><a href="/blog/distribute/Docker.html#é…ç½®-kubernetes-æ§åˆ¶å°" class="sidebar-link">é…ç½® Kubernetes æ§åˆ¶å°</a></li><li class="sidebar-sub-header"><a href="/blog/distribute/Docker.html#åˆ›å»ºtoken" class="sidebar-link">åˆ›å»ºtoken</a></li><li class="sidebar-sub-header"><a href="/blog/distribute/Docker.html#å®‰è£…rancher" class="sidebar-link">å®‰è£…Rancher</a></li></ul></li><li><a href="/blog/distribute/Docker.html#å¼•ç”¨å‚è€ƒ" class="sidebar-link">å¼•ç”¨å‚è€ƒ</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page" data-v-cdcae5a4> <div class="page-title" data-v-cdcae5a4><h1 data-v-cdcae5a4>DockerğŸ³</h1> <hr data-v-cdcae5a4> <div data-v-2c25cede data-v-cdcae5a4><i class="iconfont reco-account" data-v-2c25cede><span data-v-2c25cede>ä¼šèµ°è·¯çš„ä¸‰ç™¾å—</span></i> <i class="iconfont reco-date" data-v-2c25cede><span data-v-2c25cede>2/10/2019</span></i> <!----> <i class="iconfont reco-tag tags" data-v-2c25cede><span class="tag-item" data-v-2c25cede>
      å®¹å™¨æŠ€æœ¯
    </span><span class="tag-item" data-v-2c25cede>
      åˆ†å¸ƒå¼
    </span><span class="tag-item" data-v-2c25cede>
      linuxğŸ§
    </span><span class="tag-item" data-v-2c25cede>
      æ‰€æœ‰æ–‡ç« 
    </span></i></div></div> <div class="content" data-v-cdcae5a4><div align="center"><h1>DockerğŸ³</h1> <br> <p>dockeræ¶æ„ç½‘ä¸Šä¸€å¤§æŠŠï¼Œæ–‡æ¡£é‡Œä¹Ÿæœ‰ä¸»è¦ä»‹ç»å¸¸ç”¨å‘½ä»¤å’Œä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜<br>
è¢«linuxå„ç§å¥‡å¥‡æ€ªæ€ªçš„é”™è¯¯æŠ˜ç£¨ç–¯äº†<br> ç”¨äº†dockerä¸€æ—¶çˆ½ï¼Œä¸€ç›´ç”¨dockerä¸€ç›´çˆ½ï¼</p></div> <h2 id="ğŸ³"><a href="#ğŸ³" aria-hidden="true" class="header-anchor">#</a> ğŸ³</h2> <h3 id="å®‰è£…ä¸å¯åŠ¨"><a href="#å®‰è£…ä¸å¯åŠ¨" aria-hidden="true" class="header-anchor">#</a> å®‰è£…ä¸å¯åŠ¨</h3> <p>windowsä¸‹å®‰è£…éœ€è¦åœ¨BIOSä¸­å¯åŠ¨è™šæ‹ŸåŒ–å’ŒHyper-vã€‚æ— è„‘ä¸‹ä¸€æ­¥å°±è¡Œ<br>
linux <a href="https://www.cnblogs.com/yufeng218/p/8370670.html">è¿™æ˜¯centos</a> <br>
å¯åŠ¨æœåŠ¡:sudo service docker start<br>
å…ˆè¯•ä¸€ä¸‹:docker run ubuntu echo hello docker<br>
hello docker<br> <a href="https://hub.daocloud.io/">å›½å†…çš„é•œåƒ</a></p> <h3 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" aria-hidden="true" class="header-anchor">#</a> åŸºæœ¬å‘½ä»¤</h3> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>å¯ä»¥æŠŠæ¯ä¸ª container çœ‹åšæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä¸»æœº,container ä¸€æ—¦åˆ›å»ºå¦‚æœæ²¡æœ‰ç”¨ rm å‘½ä»¤ç§»é™¤ï¼Œå°†ä¼šä¸€ç›´å­˜åœ¨ã€‚æ‰€ä»¥ç”¨å®Œåè®°å¾—åˆ é™¤</p></div> <ul><li><p>docker info æŸ¥çœ‹æœ¬æœºä¸Šdockerçš„ä¿¡æ¯</p></li> <li><p>docker version æŸ¥çœ‹dockerçš„ç‰ˆæœ¬</p></li> <li><p>docker login/logoutç™»é™†/ç™»å‡º</p></li> <li><p>docker images æŸ¥çœ‹é•œåƒå¯ä»¥è·Ÿname</p> <ul><li><p>-a åˆ—å‡ºæ‰€æœ‰é•œåƒï¼ˆå«è¿‡ç¨‹é•œåƒï¼‰ï¼›</p></li> <li><p>-f è¿‡æ»¤é•œåƒï¼Œå¦‚ï¼š -f ['dangling=true'] åªåˆ—å‡ºæ»¡è¶³dangling=true æ¡ä»¶çš„é•œåƒï¼›</p></li> <li><p>--no-trunc å¯æ˜¾ç¤ºå®Œæ•´çš„é•œåƒIDï¼›</p></li> <li><p>-q ä»…åˆ—å‡ºé•œåƒIDã€‚</p></li> <li><p>--tree ä»¥æ ‘çŠ¶ç»“æ„åˆ—å‡ºé•œåƒçš„æ‰€æœ‰æäº¤å†å²ã€‚</p></li></ul></li> <li><p>docker run -p 8080:80 -d xxx  å®¹å™¨è¿è¡ŒæŒ‡å®šçš„image,å°†é•œåƒçš„80æ˜ å°„åˆ°æœ¬æœºçš„8080ï¼Œ-dæ„æ€æ˜¯ç›´æ¥è¿”å›ä¸é˜»å¡</p> <ul><li>-i - t è¿›å…¥å‘½ä»¤è¡Œ</li></ul></li></ul> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>æ˜ å°„ç«¯å£docker run -d -p 80:80 -p 22:22<br>
è¿›å…¥å‘½ä»¤è¡Œdocker run -i - t xxxx (æ³¨æ„æœ‰ä¸ªç©ºæ ¼)/bin/bash</p></div> <ul><li><p>docker ps æŸ¥çœ‹å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨çš„ä¿¡æ¯<br>
åˆ—å‡ºæ‰€æœ‰è¿è¡Œä¸­å®¹å™¨ã€‚</p> <ul><li><p>-a åˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼ˆå«æ²‰ç¡é•œåƒï¼‰ï¼›</p></li> <li><p>--before=&quot;nginx&quot; åˆ—å‡ºåœ¨æŸä¸€å®¹å™¨ä¹‹å‰åˆ›å»ºçš„å®¹å™¨ï¼Œæ¥å—å®¹å™¨åç§°å’ŒIDä½œä¸ºå‚æ•°ï¼›</p></li> <li><p>--since=&quot;nginx&quot; åˆ—å‡ºåœ¨æŸä¸€å®¹å™¨ä¹‹ååˆ›å»ºçš„å®¹å™¨ï¼Œæ¥å—å®¹å™¨åç§°å’ŒIDä½œä¸ºå‚æ•°ï¼›</p></li> <li><p>-f [exited=int] åˆ—å‡ºæ»¡è¶³exited=intæ¡ä»¶çš„å®¹å™¨ï¼›</p></li> <li><p>-l æœ€æ–°åˆ›å»ºçš„ä¸€ä¸ªå®¹å™¨ï¼›</p></li> <li><p>--no-trunc æ˜¾ç¤ºå®Œæ•´çš„å®¹å™¨IDï¼›</p></li> <li><p>-n=4 åˆ—å‡ºæœ€è¿‘åˆ›å»ºçš„4ä¸ªå®¹å™¨ï¼›</p></li> <li><p>-q ä»…åˆ—å‡ºå®¹å™¨IDï¼›</p></li> <li><p>-s æ˜¾ç¤ºå®¹å™¨å¤§å°ã€‚<br></p> <pre><code> [root@izuf6720onwdpnl2xfy65lz ~]# docker ps
 CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
 28ee7cbe79da        docker.io/nginx     &quot;nginx -g 'daemon ...&quot;   53 seconds ago      Up 52 seconds       0.0.0.0:8081-&gt;80/tcp   goofy_ritchie
</code></pre></li></ul></li> <li><p>docker cp file.txt 28ee7cbe79da(å®¹å™¨id)ï¼š//usr/share/nginx/html å°†file.txtå¤åˆ¶åˆ°è¯¥å®¹å™¨çš„æŒ‡å®šç›®å½•</p></li> <li><p>ctrl+Q+Pé€€å‡ºå®¹å™¨</p></li></ul> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>ä½ æ‰€åšçš„å¯¹å®¹å™¨å†…éƒ¨çš„æ›´æ”¹dockerä¸ä¼šä¿å­˜ï¼Œéœ€è¦ç”¨å‘½ä»¤commit</p></div> <ul><li>docker commit -m &quot;commitä¿¡æ¯&quot; imageid ä¿å­˜çš„imageçš„åå­—</li> <li>docker rmi imageid åˆ æ‰image</li> <li>docker rm imageid åˆ æ‰imageå¯ä»¥åˆ é™¤å†å²
<ul><li><p>-f å¼ºè¡Œç§»é™¤è¯¥å®¹å™¨ï¼Œå³ä½¿å…¶æ­£åœ¨è¿è¡Œ</p></li> <li><p>-l è®©è¯¥é•œåƒæ–­ç½‘</p></li> <li><p>-v ç§»é™¤ä¸å®¹å™¨å…³è”çš„ç©ºé—´</p></li></ul></li> <li>docker /stop imageid å¯åŠ¨/åœæ­¢/é‡å¯ ä¸€ä¸ªimage
<ul><li><p>-i å¯åŠ¨ä¸€ä¸ªå®¹å™¨å¹¶è¿›å…¥äº¤äº’æ¨¡å¼æ“æ§è¯¥é•œåƒçš„å‘½ä»¤è¡Œ</p></li> <li><p>-t 10 åœæ­¢æˆ–è€…é‡å¯å®¹å™¨çš„è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œè¶…æ—¶åç³»ç»Ÿå°†æ€æ­»è¿›ç¨‹ã€‚</p></li></ul></li> <li>docker inspect</li> <li>docker history imageid æŸ¥çœ‹å†å²
<ul><li><p>--no-trunc æ˜¾ç¤ºå®Œæ•´çš„æäº¤è®°å½•ï¼›</p></li> <li><p>-q ä»…åˆ—å‡ºæäº¤è®°å½•IDã€‚</p></li></ul></li> <li>docker pull xxx è·å–image</li> <li>docker build + path æŠŠè¿™ä¸ªè·¯å¾„ä¸‹æ‰€æœ‰çš„æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªdockerimage
<ul><li>-t xxx é™„åŠ è¿™ä¸ªimageçš„æ ‡ç­¾</li></ul></li> <li>docker push æ¨é€dockerimage</li> <li>docker exec -it å®¹å™¨idæˆ–name /bin/bash è¿›å…¥å®¹å™¨çš„å‘½ä»¤è¡Œç”¨attachçš„æ—¶å€™æ¨å‡ºä¼šç›´æ¥ç»“æŸå®¹å™¨</li></ul> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>docker rm <code>docker ps -a -q</code>åˆ é™¤æ‰€æœ‰çš„å®¹å™¨<br>
docker rmi <code>docker images -q</code>åˆ é™¤æ‰€æœ‰é•œåƒ<br>
docker rmi <code>docker images -q | awk '/^&lt;none&gt;/ { print $3 }'</code>æŒ‰æ¡ä»¶åˆ é™¤é•œåƒ<br>
docker rmi --force <code>docker images | grep doss-api | awk '{print $3}'</code>æŒ‰æ¡ä»¶åˆ é™¤é•œåƒå…¶ä¸­doss-apiä¸ºå…³é”®å­—<br></p></div> <h3 id="dcokerfile"><a href="#dcokerfile" aria-hidden="true" class="header-anchor">#</a> dcokerfile</h3> <table><thead><tr><th style="text-align:left">å‘½ä»¤</th> <th style="text-align:right">ç”¨é€”</th></tr></thead> <tbody><tr><td style="text-align:left">FROM</td> <td style="text-align:right">base image</td></tr> <tr><td style="text-align:left">RUN</td> <td style="text-align:right">æ‰§è¡Œå‘½ä»¤</td></tr> <tr><td style="text-align:left">ADD</td> <td style="text-align:right">æ·»åŠ æ–‡ä»¶</td></tr> <tr><td style="text-align:left">COPY</td> <td style="text-align:right">æ‹·è´æ–‡ä»¶</td></tr> <tr><td style="text-align:left">ADD</td> <td style="text-align:right">å¯ä»¥æ·»åŠ è¿œç¨‹æ–‡ä»¶å’Œæœ¬æœºæ–‡ä»¶</td></tr> <tr><td style="text-align:left">CMD</td> <td style="text-align:right">æ‰§è¡Œå‘½ä»¤</td></tr> <tr><td style="text-align:left">EXPOSE</td> <td style="text-align:right">æš´éœ²ç«¯å£</td></tr></tbody></table> <h3 id="åˆ†å±‚å­˜å‚¨"><a href="#åˆ†å±‚å­˜å‚¨" aria-hidden="true" class="header-anchor">#</a> åˆ†å±‚å­˜å‚¨</h3> <p>è¿è¡Œdocker imageæ—¶å€™ï¼Œä¸åŒçš„å®¹å™¨å¯èƒ½åªè¯»å…±äº«ä¸€ä¸ªimageï¼Œå½“è¿è¡Œèµ·æ¥ä¹‹åä¸Šé¢æ¯ä¸ªå®¹å™¨çš„çŠ¶æ€ä¸ä¿å­˜ï¼Œcommitä¼šäº§ç”Ÿæ”¹è¿‡çš„æ–°å®¹å™¨</p> <h3 id="volume"><a href="#volume" aria-hidden="true" class="header-anchor">#</a> volume</h3> <p>ç‹¬ç«‹ä¸å®¹å™¨å¤–æä¾›æŒä¹…åŒ–å­˜å‚¨ï¼Œå®¹å™¨ä¹‹é—´å…±äº«</p> <ul><li><p>docker run -d --name -v å®¹å™¨å†…éƒ¨çš„ä¸€ä¸ªè·¯å¾„ nginx(imageName)æŒ‚è½½äº†ä¸€ä¸ªè·¯å¾„ã€‚<br>
docker inspect nginx(name)è¿›è¡Œè®¿é—®</p> <pre><code>      &quot;Mounts&quot;: [
                  {
                      &quot;Type&quot;: &quot;volume&quot;,
                      &quot;Name&quot;: &quot;f9bdb344eba8cf6667950ded15d5561e2624225703d0472d0432cfa4a3dcf742&quot;,
                      &quot;Source&quot;: &quot;/www/server/docker/volumes/f9bdb344eba8cf6667950ded15d5561e2624225703d0472d0432cfa4a3dcf742/_data&quot;,
                      &quot;Destination&quot;: &quot;/usr/share/nginx/html&quot;,
                      &quot;Driver&quot;: &quot;local&quot;,
                      &quot;Mode&quot;: &quot;&quot;,
                      &quot;RW&quot;: true,
                      &quot;Propagation&quot;: &quot;&quot;
                  }
</code></pre></li></ul> <p>æ³¨æ„sourceå®¹å™¨å¤–å’Œdestinationå®¹å™¨å†…<br></p> <ul><li>docker exec -i -t nginx(é•œåƒå) /bin/bash(linuxçš„bashè·¯å¾„)è¿›å…¥é•œåƒå†…éƒ¨</li> <li>docker run -p 8080:80 -d -v $PWD/a:/usr/share/nginx/html nginx
<ul><li>å°†å†…éƒ¨çš„80æ˜ å°„åˆ°8080ï¼Œå°†å†…éƒ¨çš„/usr/share/nginx/htmlç›®å½•æŒ‚è½½åˆ°$PWD(å½“å‰å·¥ä½œç›®å½•)çš„aç›®å½•ä¸‹</li></ul></li> <li>1.docker create -v $PWD/data:/var/mydata --name data_container ubuntu
<ul><li>ä»¥ubuntuä¸ºåŸºç¡€ï¼Œåˆ›å»ºä¸€ä¸ªå®¹å™¨ã€‚-vè®©è¿™ä¸ªå®¹å™¨çš„ç›®å½•/var/mydataæŒ‚è½½åˆ°$PWD/data</li></ul></li> <li>2.docker run -it --volumes-from data_container ubuntu /bin/bash è¿è¡Œubuntué•œåƒå’Œè¿™ä¸ªé•œåƒäº’é€š(è¿™ä¸ªubuntuçš„è¿™ä¸ªç›®å½•ä¿®æ”¹ä¼šåŒæ­¥åˆ°data_containerå’ŒæŒ‚è½½çš„ç›®å½•)</li></ul> <h3 id="é•œåƒä»“åº“"><a href="#é•œåƒä»“åº“" aria-hidden="true" class="header-anchor">#</a> é•œåƒä»“åº“</h3> <p>docker daemon ç®¡ç€container å’Œimagesï¼Œimagesæ˜¯ä»Registryæ‹‰å–çš„ï¼Œé»˜è®¤æ˜¯å®˜æ–¹çš„dockerHub<br>
å›½å†… aliyun æ—¶é€Ÿäº‘ daocloud<br></p> <ul><li>docker search xxxæœç´¢</li> <li>docker pull xxxæ‹‰å–</li> <li>docker push xxx æ¨é€åˆ°Registry</li> <li>docker tag aaa bbbæ”¹æ‰aaaçš„tagsäº§ç”Ÿä¸€ä¸ªbbb</li></ul> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>dockerå®¹å™¨çš„ä¸»çº¿ç¨‹ï¼ˆdockfileä¸­CMDæ‰§è¡Œçš„å‘½ä»¤ï¼‰ç»“æŸï¼Œå®¹å™¨ä¼šé€€å‡º</p></div> <p>å¯ä»¥ä½¿ç”¨äº¤äº’å¼å¯åŠ¨<br> <code>docker run -i [CONTAINER_NAME or CONTAINER_ID]</code><br>
ä½¿ç”¨åå°æ¨¡å¼å’Œttyé€‰é¡¹<br> <code>docker run -dit [CONTAINER_NAME or CONTAINER_ID]</code><br>
dockerè°ƒå‡ºåå°å®¹å™¨<br> <code>docker attach [CONTAINER_NAME or CONTAINER_ID]</code><br>
é€€å‡ºæ—¶ï¼Œä½¿ç”¨[ctrl + D]å’Œexitï¼Œè¿™æ ·ä¼šç»“æŸdockerå½“å‰çº¿ç¨‹ï¼Œå®¹å™¨ç»“æŸï¼Œå¯ä»¥ä½¿ç”¨[ctrl + P][ctrl + Q]é€€å‡ºè€Œä¸ç»ˆæ­¢å®¹å™¨è¿è¡Œ<br>
å¦‚ä¸‹å‘½ä»¤ï¼Œä¼šåœ¨æŒ‡å®šå®¹å™¨ä¸­æ‰§è¡ŒæŒ‡å®šå‘½ä»¤ï¼Œ[ctrl+D]é€€å‡ºåä¸ä¼šç»ˆæ­¢å®¹å™¨è¿è¡Œ<br> <code>docker exec -it [CONTAINER_NAME or CONTAINER_ID] /bin/bash</code></p> <h3 id="æŒä¹…åŒ–"><a href="#æŒä¹…åŒ–" aria-hidden="true" class="header-anchor">#</a> æŒä¹…åŒ–</h3> <h2 id="âš“"><a href="#âš“" aria-hidden="true" class="header-anchor">#</a> âš“</h2> <div align="center"><h1>K8sâš“Kubernetes</h1> <br> <p>åˆ©ç”¨k8sç¼–æ’å¹¶ä¸”ç®¡ç†é›†ç¾¤å’Œåˆ†å¸ƒå¼ç¯å¢ƒ<br>
è¯´ç™½äº†å°±æ˜¯ç”¨æ¥æ•°æ¡†æ¡†çš„ğŸ˜¶</p></div> <h2 id="windowså®‰è£…"><a href="#windowså®‰è£…" aria-hidden="true" class="header-anchor">#</a> windowså®‰è£…</h2> <p>è¯´æ˜:æˆ‘æ˜¯åœ¨windowsä¸‹å®‰è£…docker-desktop,ç„¶åé€šè¿‡docker-desktopå®‰è£…è‡ªå¸¦çš„Kubernets,ç„¶ååœ¨WSLä¸­å®‰è£…kubectl</p> <h3 id="å®‰è£…k8s"><a href="#å®‰è£…k8s" aria-hidden="true" class="header-anchor">#</a> å®‰è£…k8s</h3> <p>åœ¨Windowsä¸‹å…ˆå®‰è£…å¥½docker,è®°å¾—æš´éœ²ç«¯å£.</p> <ul><li><p>docker:19.03.4</p></li> <li><p>k8s:1.14.7(å’Œdockerå¯¹åº”å°±è¡Œ)</p></li> <li><p>windows:1803+</p></li> <li><p>WSL:Ubuntu18.14</p> <br></li></ul> <p>å›½å†…åŸºæœ¬éƒ½è¢«å±è”½äº†,å¦‚æœä½ ç›´æ¥Enable Kubernetesä¼šä¸€ç›´ä¸‹è½½ä¸å®Œæˆå¡ä½ä¸åŠ¨,æ‰€ä»¥è¦ä¸‹è½½ä¸¤ä¸ªGçš„é•œåƒå¾ˆä¸å®¹æ˜“,é˜¿é‡Œæœ‰ä¸ªä»“åº“å¯ä»¥ç”¨.</p> <div align="center"><img src="/assets/img/Snipaste_2019-12-26_20-17-25.91e28535.png" style="height: 450px"></div> <p>å…·ä½“æ–¹æ³•çœ‹<a href="https://github.com/AliyunContainerService/k8s-for-docker-desktop">è¿™é‡Œ</a><br>
ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„è„šæœ¬,ç”¨powershell-adminè¿›å…¥,è¿è¡Œ<code>.\load_images.ps1</code>
ä¸‹è½½çº¦2Gå¥½äº†ä¹‹åé€€å‡ºdockerå®¢æˆ·ç«¯ç„¶åé‡æ–°å¯åŠ¨,Enable Kubernetes,ä»–æƒ³ä¸‹è½½å°±å…è®¸,è¿‡5åˆ†é’Ÿå·¦å³åº”è¯¥å°±å¥½äº†<br>
ä¹‹ååœ¨windowsä¸­å¯ä»¥æ­£å¸¸æŸ¥çœ‹,ä½†æ˜¯WSLä¸­è¿˜æ²¡é…ç½®</p> <div align="center"><img src="/assets/img/Snipaste_2019-12-26_19-42-44.1857227e.png" style="height: 350px"></div> <p>ä¸‹è½½è¿™ä¸ªä¸œè¥¿ç½‘å€åœ¨è¿™<a href="https://storage.googleapis.com/kubernetes-release/release/v1.14.7/bin/linux/amd64/kubectl">https://storage.googleapis.com/kubernetes-release/release/v1.14.7/bin/linux/amd64/kubectl</a></p> <p>å¯ä»¥ç›´æ¥curl,å¤§çº¦50Mä¸‹è½½å®Œä¹‹åcpåˆ°è‡ªå·±WSLçš„~ç›®å½•ä¸‹</p> <ul><li><code>chmod +x kubectl</code></li> <li><code>sudo mv ./kubectl /usr/local/bin/kubectl</code></li> <li>ä¹‹åè¦è®© WSL é‡Œçš„ kubectl å‘½ä»¤çŸ¥é“å¦‚ä½•è¿æ¥ Docker Desktop for Windows å¯åŠ¨çš„ Kubernetes é›†ç¾¤æŠŠ Docker Desktop for Windows åˆ›å»ºçš„é›†ç¾¤çš„é…ç½®æ–‡ä»¶æ‹·è´åˆ° WSL é‡Œçš„ç”¨æˆ·ç›®å½•ä¸‹ï¼š</li> <li><code>mkdir ~/.kube &amp;&amp; cp /c/Users/[USERNAME]/.kube/config ~/.kube</code></li></ul> <br> <div align="center"><img src="/assets/img/Snipaste_2019-12-26_19-43-26.0cb7105c.png" style="height: 250px"></div><br> <p>å¤§åŠŸå‘Šæˆè¾“å…¥<code>kubectl cluster-info</code>,<code>kubectl get nodes</code>æŸ¥çœ‹çŠ¶æ€
<br></p><div align="center"><img src="/assets/img/Snipaste_2019-12-26_21-41-22.6032f76b.png" style="height: 120px"></div><br><p></p> <h3 id="é…ç½®-kubernetes-æ§åˆ¶å°"><a href="#é…ç½®-kubernetes-æ§åˆ¶å°" aria-hidden="true" class="header-anchor">#</a> é…ç½® Kubernetes æ§åˆ¶å°</h3> <p>é¦–å…ˆæŠŠä¸‹è½½çš„é‚£ä¸ªæ–‡ä»¶å¤¹,é‡Œé¢æœ‰ä¸ªsampleæ–‡ä»¶å¤¹å’Œ<strong>kubernetes-dashboard.yaml</strong>,ç§»åŠ¨åˆ°WSLé‡Œé¢å»,ä¸ºäº†æ•´æ´æ”¾åˆ°<code>.kube</code>ä¸‹<br> <br></p> <ul><li><code>cp /e/ooowl/Download/k8s-for-docker-desktop-1.14.7/sample .</code></li> <li><code>kubectl create -f kubernetes-dashboard.yaml</code></li> <li>å¼€å¯ä»£ç†<code>kubectl proxy</code>,ä¸è¿‡ä¸€æ—¦ç»“æŸsshä¼šè¯å°±ä¼šåœæ­¢</li> <li>å¯ä»¥æ”¾åå°<code>nohup kubectl proxy &gt; .kube/log/kubeDashboard.log 2&gt;&amp;1 &amp;</code>,æ—¥å¿—æ”¾åœ¨<code>.kube/log/kubeDashboard.log</code>,ä¸ç”¨çš„æ—¶å€™kill -9 PID</li></ul> <br> <div align="center"><img src="/assets/img/Snipaste_2019-12-26_21-56-55.2cb2894e.png" style="height: 350px"></div><br> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>kubectlçš„ç‰ˆæœ¬ä¸€å®šè¦å’ŒK8sç‰ˆæœ¬å¯¹åº”,éƒ½åˆ™ä¼šæŠ¥é”™<br> <code>error: SchemaError(io.k8s.api.authentication.v1.TokenReviewStatus): invalid object doesn't have additional properties</code></p></div> <p>è®¿é—®<strong>url</strong> <a href="http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/#!/overview?namespace=default">http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/#!/overview?namespace=default</a></p> <h3 id="åˆ›å»ºtoken"><a href="#åˆ›å»ºtoken" aria-hidden="true" class="header-anchor">#</a> åˆ›å»ºtoken</h3> <div class="language- extra-class"><pre class="language-text"><code>TOKEN=$(kubectl -n kube-system describe secret default| awk '$1==&quot;token:&quot;{print $2}')

kubectl config set-credentials docker-for-desktop --token=&quot;${TOKEN}&quot;

echo $TOKEN
</code></pre></div><p><strong>å¯èƒ½æ¯æ¬¡æ‰“å¼€éƒ½éœ€è¦</strong> <br></p><div align="center"><img src="/assets/img/Snipaste_2019-12-26_22-31-29.24fe72a0.png" style="height: 400px"></div><br><p></p> <h3 id="å®‰è£…rancher"><a href="#å®‰è£…rancher" aria-hidden="true" class="header-anchor">#</a> å®‰è£…Rancher</h3> <p>å…¶å®å¤§å®¶æ—¶é—´éƒ½ä¸å¤š,ä¸å¯èƒ½æŠŠé”iæœ‰æŠ€æœ¯éƒ½å­¦ä¹ ä¸€é,å­¦k8sä¹Ÿæ˜¯æ‹“å±•æŠ€æœ¯å¹¿åº¦,æ‰€ä»¥ç®€å•æ˜“ç”¨å¿«é€Ÿè¾¾åˆ°ç›®çš„æ˜¯æœ€å¥½çš„.<br>
k8sç”¨dashboardç®¡ç†ä¸å¤§å…¨,æˆ‘å‘ç°äº†è¿™ä¸ªå®è´,è™½ç„¶ç°åœ¨è¿˜å¤„äºæ¯”è¾ƒæ—©æœŸ,æœ‰äº›å‘,æˆ‘å…ˆåœ¨è¿™é‡Œå†™,åé¢å†è¡¥å…….</p> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>æœ¬æ•™ç¨‹ä»k8så¼€å§‹å°±æœ¬ç€ä¸æ±‚ç”šè§£çš„æ€åº¦,ä¸ºçš„å°±æ˜¯è¿½æ±‚æ•ˆæœæœ€å¤§åŒ–</p></div> <p>å¥½åƒæ˜¯é«˜çº§çŸ¥è¯†....å…ˆå­¦å­¦å‰ç½®çŸ¥è¯†</p> <h2 id="å¼•ç”¨å‚è€ƒ"><a href="#å¼•ç”¨å‚è€ƒ" aria-hidden="true" class="header-anchor">#</a> å¼•ç”¨å‚è€ƒ</h2> <ul><li>https://magicsong.github.io/2018/04/20/WSL-vscode%E5%8F%8C%E5%89%91%E5%90%88%E7%92%A7/</li> <li>https://zhuanlan.zhihu.com/p/85531874</li> <li>https://github.com/AliyunContainerService/k8s-for-docker-desktop</li> <li>https://stackoverflow.com/questions/55528603/kubectl-create-invalid-object/55530485</li> <li>https://kubesphere.com.cn/docs/v2.1/zh-CN/release/release-v210/</li> <li>https://juejin.im/post/5d89a2e3518825090d61c39e
<div id="vcomments"></div></li></ul></div> <!----> <!----> <!----> <div class="page-edit" data-v-cdcae5a4><!----> <div class="last-updated" data-v-cdcae5a4><span class="prefix" data-v-cdcae5a4>Last Updated: </span> <span class="time" data-v-cdcae5a4>12/29/2019, 3:00:55 PM</span></div></div> <!----> </div> <div class="valine-wrapper" data-v-63f18ac0><div id="valine" style="display:;" data-v-63f18ac0></div></div> <!----> <!----> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-41016a8b data-v-41016a8b><i class="iconfont reco-up" data-v-41016a8b></i></div></div></div></div>
    <script src="/assets/js/app.64171550.js" defer></script><script src="/assets/js/10.f30e4bf5.js" defer></script><script src="/assets/js/38.34e99c36.js" defer></script>
  </body>
</html>
