<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dockeræ­å»ºHadoopé›†ç¾¤ç¯å¢ƒ | ä¼šèµ°è·¯çš„ä¸‰ç™¾å—</title>
    <meta name="description" content="å¹´è½»äººçš„åšå®¢">
    <link rel="icon" href="/logo1.ico" type="image/x-icon">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.d22626bb.css" as="style"><link rel="preload" href="/assets/js/app.64171550.js" as="script"><link rel="preload" href="/assets/js/11.c050169c.js" as="script"><link rel="preload" href="/assets/js/38.34e99c36.js" as="script"><link rel="prefetch" href="/assets/js/10.f30e4bf5.js"><link rel="prefetch" href="/assets/js/100.14a8b555.js"><link rel="prefetch" href="/assets/js/101.9e257240.js"><link rel="prefetch" href="/assets/js/12.9abd0678.js"><link rel="prefetch" href="/assets/js/13.ca763ee5.js"><link rel="prefetch" href="/assets/js/14.69f05fca.js"><link rel="prefetch" href="/assets/js/15.db5225be.js"><link rel="prefetch" href="/assets/js/16.c6de58f6.js"><link rel="prefetch" href="/assets/js/17.a33727a2.js"><link rel="prefetch" href="/assets/js/18.78f0824a.js"><link rel="prefetch" href="/assets/js/19.20a4f3cf.js"><link rel="prefetch" href="/assets/js/20.15fb9aec.js"><link rel="prefetch" href="/assets/js/21.c2410e24.js"><link rel="prefetch" href="/assets/js/22.6423d49a.js"><link rel="prefetch" href="/assets/js/23.1b0b2120.js"><link rel="prefetch" href="/assets/js/24.93132bac.js"><link rel="prefetch" href="/assets/js/25.a334198a.js"><link rel="prefetch" href="/assets/js/26.c1c7aaa3.js"><link rel="prefetch" href="/assets/js/27.2c86a0cd.js"><link rel="prefetch" href="/assets/js/28.a9d5d0ae.js"><link rel="prefetch" href="/assets/js/29.82f2e489.js"><link rel="prefetch" href="/assets/js/3.465cd447.js"><link rel="prefetch" href="/assets/js/30.d0c8250c.js"><link rel="prefetch" href="/assets/js/31.e6286844.js"><link rel="prefetch" href="/assets/js/32.116769da.js"><link rel="prefetch" href="/assets/js/33.38e22b91.js"><link rel="prefetch" href="/assets/js/34.21d15ece.js"><link rel="prefetch" href="/assets/js/35.53517849.js"><link rel="prefetch" href="/assets/js/36.9b848dcf.js"><link rel="prefetch" href="/assets/js/37.bf3574bb.js"><link rel="prefetch" href="/assets/js/39.10a54121.js"><link rel="prefetch" href="/assets/js/4.9d750d27.js"><link rel="prefetch" href="/assets/js/40.0ead9dc2.js"><link rel="prefetch" href="/assets/js/41.16bfab2f.js"><link rel="prefetch" href="/assets/js/42.b0388f8b.js"><link rel="prefetch" href="/assets/js/43.1d51bbcb.js"><link rel="prefetch" href="/assets/js/44.9e15a8ac.js"><link rel="prefetch" href="/assets/js/45.c9a7ee30.js"><link rel="prefetch" href="/assets/js/46.0821d6b3.js"><link rel="prefetch" href="/assets/js/47.fdd4b2c4.js"><link rel="prefetch" href="/assets/js/48.c86a3241.js"><link rel="prefetch" href="/assets/js/49.29d7cdaf.js"><link rel="prefetch" href="/assets/js/5.b5540d72.js"><link rel="prefetch" href="/assets/js/50.88cae993.js"><link rel="prefetch" href="/assets/js/51.39b0672d.js"><link rel="prefetch" href="/assets/js/52.47b9c89c.js"><link rel="prefetch" href="/assets/js/53.561866dc.js"><link rel="prefetch" href="/assets/js/54.44ad8aef.js"><link rel="prefetch" href="/assets/js/55.999cd3f5.js"><link rel="prefetch" href="/assets/js/56.0fc25a14.js"><link rel="prefetch" href="/assets/js/57.fbeec51d.js"><link rel="prefetch" href="/assets/js/58.c2c3e960.js"><link rel="prefetch" href="/assets/js/59.388b8a2f.js"><link rel="prefetch" href="/assets/js/6.9305fa77.js"><link rel="prefetch" href="/assets/js/60.3bab7106.js"><link rel="prefetch" href="/assets/js/61.fab74e1f.js"><link rel="prefetch" href="/assets/js/62.b8451d9d.js"><link rel="prefetch" href="/assets/js/63.1ea19cc7.js"><link rel="prefetch" href="/assets/js/64.21f37b67.js"><link rel="prefetch" href="/assets/js/65.79da4678.js"><link rel="prefetch" href="/assets/js/66.2276f1ea.js"><link rel="prefetch" href="/assets/js/67.cf3e97e4.js"><link rel="prefetch" href="/assets/js/68.3b9433a6.js"><link rel="prefetch" href="/assets/js/69.a6723b19.js"><link rel="prefetch" href="/assets/js/7.8235c05c.js"><link rel="prefetch" href="/assets/js/70.eff0cc02.js"><link rel="prefetch" href="/assets/js/71.577ad016.js"><link rel="prefetch" href="/assets/js/72.ee1b8084.js"><link rel="prefetch" href="/assets/js/73.ce23853b.js"><link rel="prefetch" href="/assets/js/74.e51d0dc7.js"><link rel="prefetch" href="/assets/js/75.3fbf6e41.js"><link rel="prefetch" href="/assets/js/76.1ad79723.js"><link rel="prefetch" href="/assets/js/77.05aaa2f4.js"><link rel="prefetch" href="/assets/js/78.9e4bf317.js"><link rel="prefetch" href="/assets/js/79.028f9c41.js"><link rel="prefetch" href="/assets/js/8.a4265244.js"><link rel="prefetch" href="/assets/js/80.a83e9fee.js"><link rel="prefetch" href="/assets/js/81.e20ef630.js"><link rel="prefetch" href="/assets/js/82.0a2c28d1.js"><link rel="prefetch" href="/assets/js/83.84f22d3a.js"><link rel="prefetch" href="/assets/js/84.8c0c443d.js"><link rel="prefetch" href="/assets/js/85.1473a2e2.js"><link rel="prefetch" href="/assets/js/86.4683653f.js"><link rel="prefetch" href="/assets/js/87.9507aa61.js"><link rel="prefetch" href="/assets/js/88.77ce595e.js"><link rel="prefetch" href="/assets/js/89.d25806a8.js"><link rel="prefetch" href="/assets/js/9.56b90d44.js"><link rel="prefetch" href="/assets/js/90.231b245f.js"><link rel="prefetch" href="/assets/js/91.cb1ec410.js"><link rel="prefetch" href="/assets/js/92.10cedbd9.js"><link rel="prefetch" href="/assets/js/93.575cc043.js"><link rel="prefetch" href="/assets/js/94.9233e13a.js"><link rel="prefetch" href="/assets/js/95.fafa9bc4.js"><link rel="prefetch" href="/assets/js/96.8b941223.js"><link rel="prefetch" href="/assets/js/97.49080105.js"><link rel="prefetch" href="/assets/js/98.82d1cc72.js"><link rel="prefetch" href="/assets/js/99.d78b0b9a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0cd5f832.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d22626bb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div><header id="navbarWrapper" class="navbar"><div class="sidebar-button"><i class="iconfont reco-menu"></i></div> <a href="/" class="home-link router-link-active"><img src="/head3.png" alt="ä¼šèµ°è·¯çš„ä¸‰ç™¾å—" class="logo"> <span class="site-name">ä¼šèµ°è·¯çš„ä¸‰ç™¾å—</span></a> <div class="links" style="max-width:nullpx;"><div class="side-search-wrapper"><div class="search-box" data-v-1b2e3b29><input aria-label="Search" autocomplete="off" spellcheck="false" value="" data-v-1b2e3b29> <i class="iconfont reco-search" data-v-1b2e3b29></i> <!----></div></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/backEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  åç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/frontEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/bigData.html" class="nav-link"><i class="iconfont undefined"></i>
  å¤§æ•°æ®
</a></li><li class="dropdown-item"><!----> <a href="/categories/Distributed.html" class="nav-link"><i class="iconfont undefined"></i>
  åˆ†å¸ƒå¼
</a></li><li class="dropdown-item"><!----> <a href="/categories/life.html" class="nav-link"><i class="iconfont undefined"></i>
  æ—¥è®°
</a></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/categories/article.html" class="nav-link"><i class="iconfont reco-up"></i>
  Library
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/about.html" class="nav-link"><i class="iconfont reco-account"></i>
  about me
</a></div><div class="nav-item"><a href="https://www.jianshu.com/u/04777e91e2ef" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  ç®€ä¹¦
  </a></div><div class="nav-item"><a href="https://github.com/Castleeee" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  </a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><div class="side-search-wrapper"><div class="search-box" data-v-1b2e3b29><input aria-label="Search" autocomplete="off" spellcheck="false" value="" data-v-1b2e3b29> <i class="iconfont reco-search" data-v-1b2e3b29></i> <!----></div></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/backEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  åç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/frontEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  å‰ç«¯
</a></li><li class="dropdown-item"><!----> <a href="/categories/bigData.html" class="nav-link"><i class="iconfont undefined"></i>
  å¤§æ•°æ®
</a></li><li class="dropdown-item"><!----> <a href="/categories/Distributed.html" class="nav-link"><i class="iconfont undefined"></i>
  åˆ†å¸ƒå¼
</a></li><li class="dropdown-item"><!----> <a href="/categories/life.html" class="nav-link"><i class="iconfont undefined"></i>
  æ—¥è®°
</a></li></ul></div></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/categories/article.html" class="nav-link"><i class="iconfont reco-up"></i>
  Library
</a></div><div class="nav-item"><a href="/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/about.html" class="nav-link"><i class="iconfont reco-account"></i>
  about me
</a></div><div class="nav-item"><a href="https://www.jianshu.com/u/04777e91e2ef" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  ç®€ä¹¦
  </a></div><div class="nav-item"><a href="https://github.com/Castleeee" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  </a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><!----></p> <ul class="sidebar-group-items"><li><a href="/blog/bigdata/hadoopenv.html#ç¯å¢ƒè¯´æ˜" class="sidebar-link">ç¯å¢ƒè¯´æ˜</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/bigdata/hadoopenv.html#æ€»ç›®æ ‡" class="sidebar-link">æ€»ç›®æ ‡</a></li></ul></li><li><a href="/blog/bigdata/hadoopenv.html#é•œåƒå‡†å¤‡" class="sidebar-link">é•œåƒå‡†å¤‡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/bigdata/hadoopenv.html#åˆ¶ä½œé•œåƒ" class="sidebar-link">åˆ¶ä½œé•œåƒ</a></li><li class="sidebar-sub-header"><a href="/blog/bigdata/hadoopenv.html#é•œåƒäº’é€š" class="sidebar-link">é•œåƒäº’é€š</a></li></ul></li><li><a href="/blog/bigdata/hadoopenv.html#é…ç½®hadoop" class="sidebar-link">é…ç½®hadoop</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/bigdata/hadoopenv.html#ä¼ªé›†ç¾¤é…ç½®" class="sidebar-link">ä¼ªé›†ç¾¤é…ç½®</a></li><li class="sidebar-sub-header"><a href="/blog/bigdata/hadoopenv.html#é›†ç¾¤é•œåƒé…ç½®" class="sidebar-link">é›†ç¾¤é•œåƒé…ç½®</a></li><li class="sidebar-sub-header"><a href="/blog/bigdata/hadoopenv.html#åˆ›å»ºä»èŠ‚ç‚¹" class="sidebar-link">åˆ›å»ºä»èŠ‚ç‚¹</a></li><li class="sidebar-sub-header"><a href="/blog/bigdata/hadoopenv.html#å…å¯†ç™»å½•" class="sidebar-link">å…å¯†ç™»å½•</a></li><li class="sidebar-sub-header"><a href="/blog/bigdata/hadoopenv.html#å¯åŠ¨é›†ç¾¤" class="sidebar-link">å¯åŠ¨é›†ç¾¤</a></li><li class="sidebar-sub-header"><a href="/blog/bigdata/hadoopenv.html#éªŒè¯ä¸€ä¸‹" class="sidebar-link">éªŒè¯ä¸€ä¸‹</a></li></ul></li><li><a href="/blog/bigdata/hadoopenv.html#å‡ºç°çš„é—®é¢˜" class="sidebar-link">å‡ºç°çš„é—®é¢˜</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/bigdata/hadoopenv.html#å®‰å…¨æ¨¡å¼" class="sidebar-link">å®‰å…¨æ¨¡å¼</a></li><li class="sidebar-sub-header"><a href="/blog/bigdata/hadoopenv.html#æ–‡ä»¶å—ä¸¢å¤±" class="sidebar-link">æ–‡ä»¶å—ä¸¢å¤±</a></li><li class="sidebar-sub-header"><a href="/blog/bigdata/hadoopenv.html#å†…å­˜ä¸è¶³å’Œå±æ€§æœªæŒ‡å®š" class="sidebar-link">å†…å­˜ä¸è¶³å’Œå±æ€§æœªæŒ‡å®š</a></li><li class="sidebar-sub-header"><a href="/blog/bigdata/hadoopenv.html#livenodesæ•°é‡ä¸å¯¹" class="sidebar-link">LiveNodesæ•°é‡ä¸å¯¹</a></li></ul></li><li><a href="/blog/bigdata/hadoopenv.html#å¼•ç”¨å‚è€ƒ" class="sidebar-link">å¼•ç”¨å‚è€ƒ</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page" data-v-cdcae5a4> <div class="page-title" data-v-cdcae5a4><h1 data-v-cdcae5a4>Dockeræ­å»ºHadoopé›†ç¾¤ç¯å¢ƒ</h1> <hr data-v-cdcae5a4> <div data-v-2c25cede data-v-cdcae5a4><i class="iconfont reco-account" data-v-2c25cede><span data-v-2c25cede>ä¼šèµ°è·¯çš„ä¸‰ç™¾å—</span></i> <i class="iconfont reco-date" data-v-2c25cede><span data-v-2c25cede>12/24/2019</span></i> <!----> <i class="iconfont reco-tag tags" data-v-2c25cede><span class="tag-item" data-v-2c25cede>
      hadoop
    </span><span class="tag-item" data-v-2c25cede>
      æ•°æ®å±‚
    </span><span class="tag-item" data-v-2c25cede>
      åˆ†å¸ƒå¼
    </span><span class="tag-item" data-v-2c25cede>
      æ‰€æœ‰æ–‡ç« 
    </span><span class="tag-item" data-v-2c25cede>
      å¤§æ•°æ®
    </span></i></div></div> <div class="content" data-v-cdcae5a4><h2 id="ç¯å¢ƒè¯´æ˜"><a href="#ç¯å¢ƒè¯´æ˜" aria-hidden="true" class="header-anchor">#</a> ç¯å¢ƒè¯´æ˜</h2> <ul><li>win10ä¸“ä¸šç‰ˆ19.3</li> <li>docker desktop</li> <li>WSL-Ubuntu18.04</li> <li>jdk1.8-8u231</li> <li>hadoop-3.1.3</li></ul> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>dockeræ˜¯windowsä¸Šçš„,ä¹Ÿå°±æ˜¯åœ¨WSLä¸­çš„å®¢æˆ·ç«¯ä¸èƒ½ç›´æ¥æŒ‚åœ¨WSLçš„ç›®å½•,å¿…é¡»èƒ½å¤Ÿè½¬åŒ–ä¸ºwindowsä¸‹çš„ç›®å½•</p></div> <p>å¦‚æœä¸åšæ›´æ”¹,é»˜è®¤å…¶ä»–ç›˜æ˜¯åœ¨<code>/mnt</code>ä¸‹çš„,ä½†æ˜¯dockeræŒ‚è½½ç›®å½•éœ€è¦çš„æ˜¯å¯ä»¥è½¬åŒ–ä¸ºwinä¸‹å¯å¯»çš„ç›®å½•,æ‰€ä»¥ä¸èƒ½ç›´æ¥æŒ‚è½½/mnt/c,ä¼šæŒ‚è½½åˆ°ä¸€ä¸ªå¥‡æ€ªçš„ç›®å½•,è€Œä¸”ä¸èƒ½å–æ¶ˆ<br>
åœ¨WSLä¸­ç¼–è¾‘<code>/etc/wsl.conf</code>å†™å…¥å¹¶ <em>é‡å¯</em></p> <div class="language-shell extra-class"><pre class="language-text"><code>[automount]
enabled = true
root = /
options = &quot;metadata,umask=22,fmask=11&quot;
mountFsTab = false
</code></pre></div><p>ä¹‹åæ ¹ç›®å½•ä¸‹ä¼šæœ‰<code>/c /d /e</code>,æƒ³è¦æŒ‚è½½ç›®å½•<code>/c/programfiles...</code>å°±å¯ä»¥äº†<br>
åŒæ ·æ³¨æ„WSLä¸‹çš„<code>$PWD``$HOME</code>å’Œè‡ªå®šä¹‰çš„å˜é‡éƒ½ä¸èƒ½ç”¨,WSLçš„rootåœ¨<br> <code>/C/Users/ooowl/AppData/Local/Packages/CanonicalGroupLimited.Ubuntu18.04onWindows_79rhkp1fndgsc/LocalState/rootfs/root/</code><br>
ä¸”ä¸å¯è¯»,ä½†æ˜¯å¯ä»¥æŒ‚è½½å¾ˆå¥‡æ€ª.</p> <h3 id="æ€»ç›®æ ‡"><a href="#æ€»ç›®æ ‡" aria-hidden="true" class="header-anchor">#</a> æ€»ç›®æ ‡</h3> <p>ä¸‰ä¸ªæœºå™¨ä¸€ä¸»ä¸¤ä»</p> <ul><li>hadoop0 192.168.2.10(ä¸»)</li> <li>hadoop1 192.168.2.11</li> <li>hadoop2 192.168.2.12</li></ul> <h2 id="é•œåƒå‡†å¤‡"><a href="#é•œåƒå‡†å¤‡" aria-hidden="true" class="header-anchor">#</a> é•œåƒå‡†å¤‡</h2> <p>æˆ‘ç”¨çš„centos7,jdk-8u231-linux-x64,Apacheä¸‹è½½çš„hadoop-3.1.3</p> <h3 id="åˆ¶ä½œé•œåƒ"><a href="#åˆ¶ä½œé•œåƒ" aria-hidden="true" class="header-anchor">#</a> åˆ¶ä½œé•œåƒ</h3> <p>æ€è·¯:æˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸‰ä¸ªè£…å¥½hadoopå’Œjdkçš„é•œåƒ,å¹¶ä¸”é…ç½®å¥½äº†ssh
pullä¸‹æ¥centos<code>docker pull centos</code></p> <div class="language- extra-class"><pre class="language-text"><code>NAME                               DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED
centos                             The official build of CentOS.                   5734                [OK]           
</code></pre></div><p>æå‡ºè¿™ä¹ˆä¸ªç›®å½•æ¥</p> <div class="language- extra-class"><pre class="language-text"><code> root ~&gt;tree hadoopimgs                                                                      
hadoopimgs
â”œâ”€â”€ centos-hadoop
â”‚   â”œâ”€â”€ Dockerfile #1 ssh
â”‚   â””â”€â”€ hadoop-3.1.3.tar.gz
â”œâ”€â”€ centos-ssh-jdk
â”‚   â”œâ”€â”€ Dockerfile #2 jdk
â”‚   â””â”€â”€ jdk-8u231-linux-x64.tar.gz
â””â”€â”€ centos-ssh-root
    â””â”€â”€ Dockerfile #3 hadoop
</code></pre></div><p>åœ¨windowsä¸Šä¸‹è½½ä¸¤ä¸ªè½¯ä»¶ç„¶åç›´æ¥cpè¿›æ¥<br>
1 sshçš„Dockerfile</p> <div class="language- extra-class"><pre class="language-text"><code># é€‰æ‹©ä¸€ä¸ªå·²æœ‰çš„osé•œåƒä½œä¸ºåŸºç¡€  
FROM centos 
   
# é•œåƒçš„ä½œè€…  
MAINTAINER shixun
   
# å®‰è£…openssh-serverå’Œsudoè½¯ä»¶åŒ…ï¼Œå¹¶ä¸”å°†sshdçš„UsePAMå‚æ•°è®¾ç½®æˆno  
RUN yum install -y openssh-server sudo  
RUN sed -i 's/UsePAM yes/UsePAM no/g' /etc/ssh/sshd_config  
#å®‰è£…openssh-clients
RUN yum  install -y openssh-clients
RUN yum  install -y net-tools
RUN yum  install -y vim
RUN yum  install -y tree
RUN yum  install -y git
   
# æ·»åŠ æµ‹è¯•ç”¨æˆ·rootï¼Œå¯†ç rootï¼Œå¹¶ä¸”å°†æ­¤ç”¨æˆ·æ·»åŠ åˆ°sudoersé‡Œ  
RUN echo &quot;root:root&quot; | chpasswd
RUN echo &quot;root   ALL=(ALL)       ALL&quot; &gt;&gt; /etc/sudoers  
# ä¸‹é¢è¿™ä¸¤å¥æ¯”è¾ƒç‰¹æ®Šï¼Œåœ¨centos6ä¸Šå¿…é¡»è¦æœ‰ï¼Œå¦åˆ™åˆ›å»ºå‡ºæ¥çš„å®¹å™¨sshdä¸èƒ½ç™»å½•  
RUN ssh-keygen -t dsa -f /etc/ssh/ssh_host_dsa_key  
RUN ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key  
   
# å¯åŠ¨sshdæœåŠ¡å¹¶ä¸”æš´éœ²22ç«¯å£  
RUN mkdir /var/run/sshd  
EXPOSE 22  
CMD [&quot;/usr/sbin/sshd&quot;, &quot;-D&quot;]
</code></pre></div><p>åœ¨è¿™ä¸ªç›®å½•ä¸­æ‰§è¡Œ<code>docker build -t &quot;centos-ssh&quot; .</code></p> <p>2 jdkçš„Dockerfile</p> <div class="language- extra-class"><pre class="language-text"><code>FROM centos-ssh
ADD ./jdk-8u231-linux-x64.tar.gz /usr/local/
RUN mv /usr/local/jdk1.8.0_231 /usr/local/jdk1.8
ENV JAVA_HOME /usr/local/jdk1.8
ENV PATH $JAVA_HOME/bin:$PATH
</code></pre></div><p>åœ¨è¿™ä¸ªç›®å½•ä¸­æ‰§è¡Œ<code>docker build -t &quot;centos-jdk&quot; .</code></p> <p>3 hadoopçš„Dockerfile</p> <div class="language- extra-class"><pre class="language-text"><code>FROM centos-jdk
ADD hadoop-3.1.3.tar.gz /usr/local
RUN mv /usr/local/hadoop-3.1.3  /usr/local/hadoop
ENV HADOOP_HOME /usr/local/hadoop
ENV PATH $HADOOP_HOME/bin:$PATH
</code></pre></div><p>åœ¨è¿™ä¸ªç›®å½•ä¸­æ‰§è¡Œ<code>docker build -t &quot;centos-hadoop&quot; .</code></p> <p>ä¸€å®šè¦æŒ‰é¡ºåºæ‰§è¡Œä¸èƒ½ä¹±åºå› ä¸ºåé¢çš„é•œåƒéœ€è¦å‰é¢çš„è®¾ç½®<br>
ç„¶å<code>docker images</code></p> <div class="language- extra-class"><pre class="language-text"><code>REPOSITORY                 TAG                 IMAGE ID            CREATED             SIZE
centos-hadoop              latest              0775d9e8e35f        25 hours ago        2.79GB
centos-jdk                 latest              1fb53b406bea        25 hours ago        1.1GB
centos-ssh                 latest              636c9d7f103e        25 hours ago        297MB
centos                     latest              0f3e07c0138f        2 months ago        220MB
</code></pre></div><h3 id="é•œåƒäº’é€š"><a href="#é•œåƒäº’é€š" aria-hidden="true" class="header-anchor">#</a> é•œåƒäº’é€š</h3> <p>é¦–å…ˆæˆ‘ä»¬æ‹ä¸€ä¸‹æ€è·¯:æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸‰ä¸ªé•œåƒ,å¹¶ä¸”èƒ½å¤Ÿäº’ç›¸è®¿é—®,æœ‰å›ºå®šçš„ipè¿™æ ·hadoopå¯ä»¥è®¿é—®</p> <p>å¤§éƒ¨åˆ†äººç”¨çš„éƒ½æ˜¯pipeworkå»ºç«‹bridge,ä½†æ˜¯WSLå¥½åƒä¸èƒ½ç”¨,æ‰€ä»¥æˆ‘ä»¬é€‰æ‹©dockerçš„ç½‘ç»œ<br>
é¦–å…ˆåˆ›å»ºä¸€ä¸ªç½‘ç»œè¦†ç›–192.168.2.10ç½‘æ®µ,é»˜è®¤bridgeæ¨¡å¼å¯ä»¥å†…å¤–è®¿é—®,åç§°å°±æ˜¯hadoopå°±å¥½<br> <code>docker network ls</code>æŸ¥çœ‹ç½‘ç»œ,<code>docker network create --subnet 192.168.2.0/24 hadoop</code>
ç„¶åæˆ‘ä»¬åˆ›å»º1ä¸ªé•œåƒç„¶åå°†é…ç½®å¥½çš„é•œåƒæäº¤ä¸€ä¸ªæ–°é•œåƒ,ç›´æ¥åˆ›å»ºä¸¤ä¸ªä¸€æ¨¡ä¸€æ ·çš„,å…ˆåˆ›å»ºä¸‹é¢è¿™æ ·çš„ç›®å½•,æ˜ å°„åˆ°é‡Œé¢ä¼ è¾“æ•°æ®ç”¨(æ–‡ä»¶æ˜¯ä¹±ä¸ƒå…«ç³Ÿåˆ›å»ºçš„,çœ‹çœ‹æŒ‚è½½æ˜¯å¦æˆåŠŸ)</p> <div class="language- extra-class"><pre class="language-text"><code>root&gt;~$tree hadoopdata

hadoopdata
â”œâ”€â”€ authorized_keys
â”œâ”€â”€ master0
â”‚   â”œâ”€â”€ a.txt
â”‚   â”œâ”€â”€ as
â”‚   â””â”€â”€ b.txt
â”œâ”€â”€ slave1
â”‚   â””â”€â”€ daf
â””â”€â”€ slave2
    â””â”€â”€ sadsadsa
</code></pre></div><p>WEBç•Œé¢ä¸­ç›‘æ§hdfs:50070,50075<br>
WEBç•Œé¢ä¸­ç›‘æ§ä»»åŠ¡æ‰§è¡ŒçŠ¶å†µ:8088<br>
è®¿é—®HDFS:9000<br> <br>
æ¯ä¸ªä¸»æœºéƒ½å¼€æ”¾ssh,22æ˜ å°„å‡ºæ¥
<br></p> <p><em>å‘½ä»¤</em><br>
hadoop0</p> <div class="language- extra-class"><pre class="language-text"><code>docker run -v /C/Users/ooowl/AppData/Local/Packages/CanonicalGroupLimited.Ubuntu18.04onWindows_79rhkp1fndgsc/LocalState/rootfs/root/hadoopdata:/data 
--name hadoop0 --hostname hadoop0 
--net hadoop --ip 192.168.2.10 -d -p 20022:22 -p 50070:50070 -p 8088:8088 -p 9000:9000  
centos-hadoop
</code></pre></div><p>æ³¨æ„hostnameè®¾ç½®å¥½,ç›¸å½“äºç»™æœ¬æœºé¢„è®¾äº†DNS,èƒ½ç”¨åç§°æŸ¥è¯¢åˆ°(ä¸ºäº†å¥½çœ‹æˆ‘åŠ äº†æ¢è¡Œè®°å¾—å»æ‰</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>æˆ‘æ˜¯åœ¨WSLä¸Šè·‘çš„,æ‰€ä»¥éœ€è¦æ˜ å°„çš„ç›®å½•æ˜¯ä»winä¸‹èƒ½è®¿é—®åˆ°çš„æ ¹ç›®å½•,ç›´æ¥<code>$HOME</code>å’Œ<code>$PWD</code>éƒ½ä¸è¡Œ</p></div> <p>è¿™æ ·é…ç½®å…å¯†ç™»å½•å°±å®Œæˆäº†,è€Œä¸”æš´éœ²äº†å¤–ç½‘20022,å…¶ä»–æœºå™¨å¤–ç½‘ä¹Ÿå¯ä»¥è¿æ¥</p> <h2 id="é…ç½®hadoop"><a href="#é…ç½®hadoop" aria-hidden="true" class="header-anchor">#</a> é…ç½®hadoop</h2> <h3 id="ä¼ªé›†ç¾¤é…ç½®"><a href="#ä¼ªé›†ç¾¤é…ç½®" aria-hidden="true" class="header-anchor">#</a> ä¼ªé›†ç¾¤é…ç½®</h3> <h3>ä¿®æ”¹é…ç½®æ–‡ä»¶</h3> <p>hadoopçš„ç›®å½•åœ¨<code>/usr/local/hadoop/</code>,è¿›å…¥<br>
ä¹‹åè¿›å…¥<code>/usr/local/hadoop/etc/hadoop</code><br>
[1] <code>vim hadoop-env.sh</code>,æŒ‡å®šè¿è¡Œç”¨æˆ·hadoophomeç­‰ç­‰,å¦‚æœåŠ è¿›å»æ— æ•ˆ,å°±åŠ åˆ°<code>~/.bashrc</code>é‡Œé¢</p> <div class="language- extra-class"><pre class="language-text"><code>export JAVA_HOME=/usr/local/jdk1.8
export HDFS_NAMENODE_USER=&quot;root&quot;
export HDFS_DATANODE_USER=&quot;root&quot;
export HDFS_SECONDARYNAMENODE_USER=&quot;root&quot;
export YARN_RESOURCEMANAGER_USER=&quot;root&quot;
export YARN_NODEMANAGER_USER=&quot;root&quot;
export HADOOP_INSTALL=/usr/local/hadoop
export PATH=$PATH:$HADOOP_INSTALL/bin
export PATH=$PATH:$HADOOP_INSTALL/sbin
export HADOOP_MAPRED_HOME=$HADOOP_INSTALL
export HADOOP_COMMON_HOME=$HADOOP_INSTALL
export HADOOP_HDFS_HOME=$HADOOP_INSTALL
export YARN_HOME=$HADOOP_INSTALL
</code></pre></div><p>ä¸æ·»åŠ ä¼šæŠ¥é”™</p> <div class="language- extra-class"><pre class="language-text"><code>ERROR: Attempting to launch hdfs namenode as root
ERROR: but there is no HDFS_NAMENODE_USER defined. Aborting launch.
Starting datanodes
ERROR: Attempting to launch hdfs datanode as root
ERROR: but there is no HDFS_DATANODE_USER defined. Aborting launch.
Starting secondary namenodes [localhost.localdomain]
ERROR: Attempting to launch hdfs secondarynamenode as root
ERROR: but there is no HDFS_SECONDARYNAMENODE_USER defined. Aborting launch.
</code></pre></div><p>[2] <code>vim core-site.xml</code></p> <div class="language- extra-class"><pre class="language-text"><code>&lt;configuration&gt;
        &lt;property&gt;
                &lt;name&gt;fs.defaultFS&lt;/name&gt;
                &lt;value&gt;hdfs://hadoop0:9000&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt;
                &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
                &lt;value&gt;/usr/local/hadoop/tmp&lt;/value&gt;
        &lt;/property&gt;
         &lt;property&gt;
                 &lt;name&gt;fs.trash.interval&lt;/name&gt;
                 &lt;value&gt;1440&lt;/value&gt;
        &lt;/property&gt;
&lt;/configuration&gt;
</code></pre></div><p>[3] <code>vim hdfs-site.xml</code></p> <div class="language- extra-class"><pre class="language-text"><code>&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.replication&lt;/name&gt;
        &lt;value&gt;1&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.permissions&lt;/name&gt;
        &lt;value&gt;false&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt; 
        &lt;name&gt;dfs.http.address&lt;/name&gt;
        &lt;value&gt;0.0.0.0:50070&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre></div><p>[4] <code>vim yarn-site.xml</code></p> <div class="language- extra-class"><pre class="language-text"><code>&lt;configuration&gt;
        &lt;property&gt;
                &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
                &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
        &lt;/property&gt;
        &lt;property&gt; 
                &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt; 
                &lt;value&gt;true&lt;/value&gt; 
        &lt;/property&gt;
&lt;/configuration&gt;
</code></pre></div><p>[5] <code>vim mapred-site.xml</code></p> <div class="language- extra-class"><pre class="language-text"><code>&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
        &lt;value&gt;yarn&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.app.mapreduce.am.env&lt;/name&gt;
        &lt;value&gt;HADOOP_MAPRED_HOME=$HADOOP_HOME&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.map.env&lt;/name&gt;
        &lt;value&gt;HADOOP_MAPRED_HOME=$HADOOP_HOME&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.reduce.env&lt;/name&gt;
        &lt;value&gt;HADOOP_MAPRED_HOME=$HADOOP_HOME&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
    &lt;name&gt;mapreduce.map.memory.mb&lt;/name&gt;
    &lt;value&gt;2048&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.map.java.opts&lt;/name&gt;
        &lt;value&gt;-Xmx2048M&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.reduce.memory.mb&lt;/name&gt;
        &lt;value&gt;4096&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.reduce.java.opts&lt;/name&gt;
        &lt;value&gt;-Xmx4096M&lt;/value&gt;
    &lt;/property&gt;
&lt;/configuration&gt;
</code></pre></div><p>æˆ‘çŸ¥é“å¾ˆéº»çƒ¦ä½†æ˜¯é‡Œé¢æ²¡ä¸œè¥¿ä¹Ÿä¸ç”¨æ‰¾,å¤åˆ¶è¿›å»å°±è¡Œäº†ğŸ˜€</p> <p>ä¹‹åè¿›å…¥<code>cd /usr/local/hadoop</code>,åˆå§‹åŒ–<code>bin/hdfs namenode -format</code></p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>æ ¼å¼åŒ–æ“ä½œä¸èƒ½é‡å¤æ‰§è¡Œã€‚å¦‚æœä¸€å®šè¦é‡å¤æ ¼å¼åŒ–ï¼Œå¸¦å‚æ•°-forceå³å¯<br>
æ ¼å¼åŒ–å¿…é¡»è¦è¿›è¡Œ,å¦åˆ™hdfsæ¨¡å—æ— æ³•æŒ‡å®š.</p></div> <p>å‡ºç°è¿™ä¸ªå°±åº”è¯¥æˆåŠŸäº†<br></p><div align="center"><img src="/assets/img/Snipaste_2019-12-24_16-50-33.1144f1a8.png" style="height: 200px"></div> <details><summary><B><I style="cursor:pointer;color:#0e5870;">ç‚¹å‡»æŸ¥çœ‹æ—¥å¿—</I></B></summary><p></p> <div class="language- extra-class"><pre class="language-text"><code>WARNING: /usr/local/hadoop/logs does not exist. Creating.
2019-12-24 08:48:24,278 INFO namenode.NameNode: STARTUP_MSG: 
/************************************************************
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = hadoop0/192.168.2.10
STARTUP_MSG:   args = [-format]
STARTUP_MSG:   version = 3.1.3
STARTUP_MSG:   classpath = /usr/local/hadoop/etc/hadoop:/usr/local/hadoop/share/hadoop/common/lib/jersey-core-1.19.jar:/usr/local/hadoop/share/hadoop/common/lib/commons-lang-2.6.jar:/usr/local/hadoop/share/hadoop/common/lib/guava-27.0-jre.jar:/usr/local/hadoop/share/hadoop/common/lib/jaxb-impl-2.2.3-1.jar:/usr/local/hadoop/share/hadoop/common/lib/jetty-http-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/common/lib/kerb-simplekdc-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/kerb-client-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/commons-cli-1.2.jar:/usr/local/hadoop/share/hadoop/common/lib/jackson-databind-2.7.8.jar:/usr/local/hadoop/share/hadoop/common/lib/jersey-servlet-1.19.jar:/usr/local/hadoop/share/hadoop/common/lib/httpclient-4.5.2.jar:/usr/local/hadoop/share/hadoop/common/lib/jackson-core-asl-1.9.13.jar:/usr/local/hadoop/share/hadoop/common/lib/kerby-config-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/jsch-0.1.54.jar:/usr/local/hadoop/share/hadoop/common/lib/httpcore-4.4.4.jar:/usr/local/hadoop/share/hadoop/common/lib/kerb-crypto-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/hadoop-annotations-3.1.3.jar:/usr/local/hadoop/share/hadoop/common/lib/curator-client-2.13.0.jar:/usr/local/hadoop/share/hadoop/common/lib/commons-net-3.6.jar:/usr/local/hadoop/share/hadoop/common/lib/paranamer-2.3.jar:/usr/local/hadoop/share/hadoop/common/lib/curator-recipes-2.13.0.jar:/usr/local/hadoop/share/hadoop/common/lib/jetty-xml-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/common/lib/kerb-util-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/re2j-1.1.jar:/usr/local/hadoop/share/hadoop/common/lib/netty-3.10.5.Final.jar:/usr/local/hadoop/share/hadoop/common/lib/kerby-pkix-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/commons-collections-3.2.2.jar:/usr/local/hadoop/share/hadoop/common/lib/commons-configuration2-2.1.1.jar:/usr/local/hadoop/share/hadoop/common/lib/metrics-core-3.2.4.jar:/usr/local/hadoop/share/hadoop/common/lib/zookeeper-3.4.13.jar:/usr/local/hadoop/share/hadoop/common/lib/commons-math3-3.1.1.jar:/usr/local/hadoop/share/hadoop/common/lib/jetty-server-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/common/lib/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/usr/local/hadoop/share/hadoop/common/lib/commons-codec-1.11.jar:/usr/local/hadoop/share/hadoop/common/lib/nimbus-jose-jwt-4.41.1.jar:/usr/local/hadoop/share/hadoop/common/lib/jersey-json-1.19.jar:/usr/local/hadoop/share/hadoop/common/lib/jackson-xc-1.9.13.jar:/usr/local/hadoop/share/hadoop/common/lib/kerby-util-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/commons-compress-1.18.jar:/usr/local/hadoop/share/hadoop/common/lib/jetty-servlet-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/common/lib/jackson-jaxrs-1.9.13.jar:/usr/local/hadoop/share/hadoop/common/lib/gson-2.2.4.jar:/usr/local/hadoop/share/hadoop/common/lib/jaxb-api-2.2.11.jar:/usr/local/hadoop/share/hadoop/common/lib/commons-lang3-3.4.jar:/usr/local/hadoop/share/hadoop/common/lib/jersey-server-1.19.jar:/usr/local/hadoop/share/hadoop/common/lib/jackson-core-2.7.8.jar:/usr/local/hadoop/share/hadoop/common/lib/failureaccess-1.0.jar:/usr/local/hadoop/share/hadoop/common/lib/kerby-asn1-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/jsr311-api-1.1.1.jar:/usr/local/hadoop/share/hadoop/common/lib/htrace-core4-4.1.0-incubating.jar:/usr/local/hadoop/share/hadoop/common/lib/hadoop-auth-3.1.3.jar:/usr/local/hadoop/share/hadoop/common/lib/animal-sniffer-annotations-1.17.jar:/usr/local/hadoop/share/hadoop/common/lib/curator-framework-2.13.0.jar:/usr/local/hadoop/share/hadoop/common/lib/json-smart-2.3.jar:/usr/local/hadoop/share/hadoop/common/lib/audience-annotations-0.5.0.jar:/usr/local/hadoop/share/hadoop/common/lib/jetty-io-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/common/lib/kerby-xdr-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/woodstox-core-5.0.3.jar:/usr/local/hadoop/share/hadoop/common/lib/jetty-webapp-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/common/lib/jackson-mapper-asl-1.9.13.jar:/usr/local/hadoop/share/hadoop/common/lib/kerb-server-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/kerb-common-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/jcip-annotations-1.0-1.jar:/usr/local/hadoop/share/hadoop/common/lib/log4j-1.2.17.jar:/usr/local/hadoop/share/hadoop/common/lib/kerb-admin-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/javax.servlet-api-3.1.0.jar:/usr/local/hadoop/share/hadoop/common/lib/jetty-security-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/common/lib/jettison-1.1.jar:/usr/local/hadoop/share/hadoop/common/lib/commons-logging-1.1.3.jar:/usr/local/hadoop/share/hadoop/common/lib/jsp-api-2.1.jar:/usr/local/hadoop/share/hadoop/common/lib/jackson-annotations-2.7.8.jar:/usr/local/hadoop/share/hadoop/common/lib/checker-qual-2.5.2.jar:/usr/local/hadoop/share/hadoop/common/lib/token-provider-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/error_prone_annotations-2.2.0.jar:/usr/local/hadoop/share/hadoop/common/lib/asm-5.0.4.jar:/usr/local/hadoop/share/hadoop/common/lib/stax2-api-3.1.4.jar:/usr/local/hadoop/share/hadoop/common/lib/protobuf-java-2.5.0.jar:/usr/local/hadoop/share/hadoop/common/lib/slf4j-api-1.7.25.jar:/usr/local/hadoop/share/hadoop/common/lib/jsr305-3.0.0.jar:/usr/local/hadoop/share/hadoop/common/lib/j2objc-annotations-1.1.jar:/usr/local/hadoop/share/hadoop/common/lib/jetty-util-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/common/lib/snappy-java-1.0.5.jar:/usr/local/hadoop/share/hadoop/common/lib/kerb-core-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/avro-1.7.7.jar:/usr/local/hadoop/share/hadoop/common/lib/kerb-identity-1.0.1.jar:/usr/local/hadoop/share/hadoop/common/lib/accessors-smart-1.2.jar:/usr/local/hadoop/share/hadoop/common/lib/commons-beanutils-1.9.3.jar:/usr/local/hadoop/share/hadoop/common/lib/jul-to-slf4j-1.7.25.jar:/usr/local/hadoop/share/hadoop/common/lib/commons-io-2.5.jar:/usr/local/hadoop/share/hadoop/common/lib/slf4j-log4j12-1.7.25.jar:/usr/local/hadoop/share/hadoop/common/hadoop-nfs-3.1.3.jar:/usr/local/hadoop/share/hadoop/common/hadoop-common-3.1.3.jar:/usr/local/hadoop/share/hadoop/common/hadoop-kms-3.1.3.jar:/usr/local/hadoop/share/hadoop/common/hadoop-common-3.1.3-tests.jar:/usr/local/hadoop/share/hadoop/hdfs:/usr/local/hadoop/share/hadoop/hdfs/lib/jersey-core-1.19.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/commons-lang-2.6.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/guava-27.0-jre.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jaxb-impl-2.2.3-1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jetty-http-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerb-simplekdc-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerb-client-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/commons-cli-1.2.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jackson-databind-2.7.8.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jersey-servlet-1.19.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/httpclient-4.5.2.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jackson-core-asl-1.9.13.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerby-config-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jsch-0.1.54.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/httpcore-4.4.4.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerb-crypto-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/hadoop-annotations-3.1.3.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/curator-client-2.13.0.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/leveldbjni-all-1.8.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/okhttp-2.7.5.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/commons-net-3.6.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/paranamer-2.3.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/curator-recipes-2.13.0.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jetty-xml-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerb-util-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/re2j-1.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/netty-3.10.5.Final.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/okio-1.6.0.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerby-pkix-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/commons-collections-3.2.2.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/commons-configuration2-2.1.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/zookeeper-3.4.13.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/commons-math3-3.1.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jetty-server-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/listenablefuture-9999.0-empty-to-avoid-conflict-with-guava.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/commons-codec-1.11.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/nimbus-jose-jwt-4.41.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jersey-json-1.19.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jackson-xc-1.9.13.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerby-util-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/commons-compress-1.18.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jetty-servlet-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jackson-jaxrs-1.9.13.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/gson-2.2.4.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jaxb-api-2.2.11.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/commons-lang3-3.4.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jersey-server-1.19.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jackson-core-2.7.8.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/failureaccess-1.0.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerby-asn1-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jsr311-api-1.1.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/htrace-core4-4.1.0-incubating.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/hadoop-auth-3.1.3.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/animal-sniffer-annotations-1.17.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/curator-framework-2.13.0.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/json-smart-2.3.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/audience-annotations-0.5.0.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jetty-io-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerby-xdr-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/commons-daemon-1.0.13.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/woodstox-core-5.0.3.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jetty-webapp-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jackson-mapper-asl-1.9.13.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerb-server-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerb-common-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jcip-annotations-1.0-1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/log4j-1.2.17.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerb-admin-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/javax.servlet-api-3.1.0.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jetty-security-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jettison-1.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/commons-logging-1.1.3.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jackson-annotations-2.7.8.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/checker-qual-2.5.2.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/token-provider-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/error_prone_annotations-2.2.0.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/asm-5.0.4.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jetty-util-ajax-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/stax2-api-3.1.4.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/protobuf-java-2.5.0.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/json-simple-1.1.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jsr305-3.0.0.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/j2objc-annotations-1.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/jetty-util-9.3.24.v20180605.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/netty-all-4.0.52.Final.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/snappy-java-1.0.5.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerb-core-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/avro-1.7.7.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/kerb-identity-1.0.1.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/accessors-smart-1.2.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/commons-beanutils-1.9.3.jar:/usr/local/hadoop/share/hadoop/hdfs/lib/commons-io-2.5.jar:/usr/local/hadoop/share/hadoop/hdfs/hadoop-hdfs-rbf-3.1.3-tests.jar:/usr/local/hadoop/share/hadoop/hdfs/hadoop-hdfs-3.1.3.jar:/usr/local/hadoop/share/hadoop/hdfs/hadoop-hdfs-httpfs-3.1.3.jar:/usr/local/hadoop/share/hadoop/hdfs/hadoop-hdfs-native-client-3.1.3.jar:/usr/local/hadoop/share/hadoop/hdfs/hadoop-hdfs-rbf-3.1.3.jar:/usr/local/hadoop/share/hadoop/hdfs/hadoop-hdfs-nfs-3.1.3.jar:/usr/local/hadoop/share/hadoop/hdfs/hadoop-hdfs-client-3.1.3-tests.jar:/usr/local/hadoop/share/hadoop/hdfs/hadoop-hdfs-client-3.1.3.jar:/usr/local/hadoop/share/hadoop/hdfs/hadoop-hdfs-3.1.3-tests.jar:/usr/local/hadoop/share/hadoop/hdfs/hadoop-hdfs-native-client-3.1.3-tests.jar:/usr/local/hadoop/share/hadoop/mapreduce/lib/hamcrest-core-1.3.jar:/usr/local/hadoop/share/hadoop/mapreduce/lib/junit-4.11.jar:/usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar:/usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-client-jobclient-3.1.3-tests.jar:/usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-client-nativetask-3.1.3.jar:/usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-client-uploader-3.1.3.jar:/usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-client-shuffle-3.1.3.jar:/usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-client-core-3.1.3.jar:/usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-client-jobclient-3.1.3.jar:/usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-client-common-3.1.3.jar:/usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-client-app-3.1.3.jar:/usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-client-hs-plugins-3.1.3.jar:/usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-client-hs-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn:/usr/local/hadoop/share/hadoop/yarn/lib/objenesis-1.0.jar:/usr/local/hadoop/share/hadoop/yarn/lib/fst-2.50.jar:/usr/local/hadoop/share/hadoop/yarn/lib/geronimo-jcache_1.0_spec-1.0-alpha-1.jar:/usr/local/hadoop/share/hadoop/yarn/lib/HikariCP-java7-2.4.12.jar:/usr/local/hadoop/share/hadoop/yarn/lib/guice-4.0.jar:/usr/local/hadoop/share/hadoop/yarn/lib/ehcache-3.3.1.jar:/usr/local/hadoop/share/hadoop/yarn/lib/metrics-core-3.2.4.jar:/usr/local/hadoop/share/hadoop/yarn/lib/json-io-2.5.1.jar:/usr/local/hadoop/share/hadoop/yarn/lib/jackson-jaxrs-json-provider-2.7.8.jar:/usr/local/hadoop/share/hadoop/yarn/lib/jackson-jaxrs-base-2.7.8.jar:/usr/local/hadoop/share/hadoop/yarn/lib/aopalliance-1.0.jar:/usr/local/hadoop/share/hadoop/yarn/lib/guice-servlet-4.0.jar:/usr/local/hadoop/share/hadoop/yarn/lib/swagger-annotations-1.5.4.jar:/usr/local/hadoop/share/hadoop/yarn/lib/mssql-jdbc-6.2.1.jre7.jar:/usr/local/hadoop/share/hadoop/yarn/lib/dnsjava-2.1.7.jar:/usr/local/hadoop/share/hadoop/yarn/lib/javax.inject-1.jar:/usr/local/hadoop/share/hadoop/yarn/lib/snakeyaml-1.16.jar:/usr/local/hadoop/share/hadoop/yarn/lib/jackson-module-jaxb-annotations-2.7.8.jar:/usr/local/hadoop/share/hadoop/yarn/lib/jersey-client-1.19.jar:/usr/local/hadoop/share/hadoop/yarn/lib/java-util-1.9.0.jar:/usr/local/hadoop/share/hadoop/yarn/lib/jersey-guice-1.19.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-server-web-proxy-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-applications-distributedshell-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-server-common-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-services-core-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-api-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-server-applicationhistoryservice-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-services-api-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-server-sharedcachemanager-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-client-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-server-router-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-applications-unmanaged-am-launcher-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-server-resourcemanager-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-server-timeline-pluginstorage-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-registry-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-server-tests-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-server-nodemanager-3.1.3.jar:/usr/local/hadoop/share/hadoop/yarn/hadoop-yarn-common-3.1.3.jar
STARTUP_MSG:   build = https://gitbox.apache.org/repos/asf/hadoop.git -r ba631c436b806728f8ec2f54ab1e289526c90579; compiled by 'ztang' on 2019-09-12T02:47Z
STARTUP_MSG:   java = 1.8.0_231
************************************************************/
2019-12-24 08:48:24,285 INFO namenode.NameNode: registered UNIX signal handlers for [TERM, HUP, INT]
2019-12-24 08:48:24,375 INFO namenode.NameNode: createNameNode [-format]
Formatting using clusterid: CID-7332eeaa-d91e-450a-b79a-4de68bdb1680
2019-12-24 08:48:24,844 INFO namenode.FSEditLog: Edit logging is async:true
2019-12-24 08:48:24,856 INFO namenode.FSNamesystem: KeyProvider: null
2019-12-24 08:48:24,857 INFO namenode.FSNamesystem: fsLock is fair: true
2019-12-24 08:48:24,857 INFO namenode.FSNamesystem: Detailed lock hold time metrics enabled: false
2019-12-24 08:48:24,862 INFO namenode.FSNamesystem: fsOwner             = root (auth:SIMPLE)
2019-12-24 08:48:24,862 INFO namenode.FSNamesystem: supergroup          = supergroup
2019-12-24 08:48:24,862 INFO namenode.FSNamesystem: isPermissionEnabled = false
2019-12-24 08:48:24,862 INFO namenode.FSNamesystem: HA Enabled: false
2019-12-24 08:48:24,925 INFO common.Util: dfs.datanode.fileio.profiling.sampling.percentage set to 0. Disabling file IO profiling
2019-12-24 08:48:24,934 INFO blockmanagement.DatanodeManager: dfs.block.invalidate.limit: configured=1000, counted=60, effected=1000
2019-12-24 08:48:24,937 INFO blockmanagement.DatanodeManager: dfs.namenode.datanode.registration.ip-hostname-check=true
2019-12-24 08:48:24,942 INFO blockmanagement.BlockManager: dfs.namenode.startup.delay.block.deletion.sec is set to 000:00:00:00.000
2019-12-24 08:48:24,942 INFO blockmanagement.BlockManager: The block deletion will start around 2019 Dec 24 08:48:24
2019-12-24 08:48:24,943 INFO util.GSet: Computing capacity for map BlocksMap
2019-12-24 08:48:24,943 INFO util.GSet: VM type       = 64-bit
2019-12-24 08:48:24,945 INFO util.GSet: 2.0% max memory 444.5 MB = 8.9 MB
2019-12-24 08:48:24,945 INFO util.GSet: capacity      = 2^20 = 1048576 entries
2019-12-24 08:48:24,954 INFO blockmanagement.BlockManager: dfs.block.access.token.enable = false
2019-12-24 08:48:24,971 INFO Configuration.deprecation: No unit for dfs.namenode.safemode.extension(30000) assuming MILLISECONDS
2019-12-24 08:48:24,971 INFO blockmanagement.BlockManagerSafeMode: dfs.namenode.safemode.threshold-pct = 0.9990000128746033
2019-12-24 08:48:24,971 INFO blockmanagement.BlockManagerSafeMode: dfs.namenode.safemode.min.datanodes = 0
2019-12-24 08:48:24,972 INFO blockmanagement.BlockManagerSafeMode: dfs.namenode.safemode.extension = 30000
2019-12-24 08:48:24,974 INFO blockmanagement.BlockManager: defaultReplication         = 1
2019-12-24 08:48:24,974 INFO blockmanagement.BlockManager: maxReplication             = 512
2019-12-24 08:48:24,974 INFO blockmanagement.BlockManager: minReplication             = 1
2019-12-24 08:48:24,974 INFO blockmanagement.BlockManager: maxReplicationStreams      = 2
2019-12-24 08:48:24,974 INFO blockmanagement.BlockManager: redundancyRecheckInterval  = 3000ms
2019-12-24 08:48:24,974 INFO blockmanagement.BlockManager: encryptDataTransfer        = false
2019-12-24 08:48:24,974 INFO blockmanagement.BlockManager: maxNumBlocksToLog          = 1000
2019-12-24 08:48:25,033 INFO namenode.FSDirectory: GLOBAL serial map: bits=24 maxEntries=16777215
2019-12-24 08:48:25,084 INFO util.GSet: Computing capacity for map INodeMap
2019-12-24 08:48:25,084 INFO util.GSet: VM type       = 64-bit
2019-12-24 08:48:25,085 INFO util.GSet: 1.0% max memory 444.5 MB = 4.4 MB
2019-12-24 08:48:25,085 INFO util.GSet: capacity      = 2^19 = 524288 entries
2019-12-24 08:48:25,087 INFO namenode.FSDirectory: ACLs enabled? false
2019-12-24 08:48:25,087 INFO namenode.FSDirectory: POSIX ACL inheritance enabled? true
2019-12-24 08:48:25,087 INFO namenode.FSDirectory: XAttrs enabled? true
2019-12-24 08:48:25,087 INFO namenode.NameNode: Caching file names occurring more than 10 times
2019-12-24 08:48:25,092 INFO snapshot.SnapshotManager: Loaded config captureOpenFiles: false, skipCaptureAccessTimeOnlyChange: false, snapshotDiffAllowSnapRootDescendant: true, maxSnapshotLimit: 65536
2019-12-24 08:48:25,093 INFO snapshot.SnapshotManager: SkipList is disabled
2019-12-24 08:48:25,097 INFO util.GSet: Computing capacity for map cachedBlocks
2019-12-24 08:48:25,097 INFO util.GSet: VM type       = 64-bit
2019-12-24 08:48:25,097 INFO util.GSet: 0.25% max memory 444.5 MB = 1.1 MB
2019-12-24 08:48:25,098 INFO util.GSet: capacity      = 2^17 = 131072 entries
2019-12-24 08:48:25,105 INFO metrics.TopMetrics: NNTop conf: dfs.namenode.top.window.num.buckets = 10
2019-12-24 08:48:25,105 INFO metrics.TopMetrics: NNTop conf: dfs.namenode.top.num.users = 10
2019-12-24 08:48:25,105 INFO metrics.TopMetrics: NNTop conf: dfs.namenode.top.windows.minutes = 1,5,25
2019-12-24 08:48:25,110 INFO namenode.FSNamesystem: Retry cache on namenode is enabled
2019-12-24 08:48:25,110 INFO namenode.FSNamesystem: Retry cache will use 0.03 of total heap and retry cache entry expiry time is 600000 millis
2019-12-24 08:48:25,113 INFO util.GSet: Computing capacity for map NameNodeRetryCache
2019-12-24 08:48:25,113 INFO util.GSet: VM type       = 64-bit
2019-12-24 08:48:25,113 INFO util.GSet: 0.029999999329447746% max memory 444.5 MB = 136.5 KB
2019-12-24 08:48:25,113 INFO util.GSet: capacity      = 2^14 = 16384 entries
2019-12-24 08:48:25,168 INFO namenode.FSImage: Allocated new BlockPoolId: BP-1918231769-192.168.2.10-1577177305161
2019-12-24 08:48:25,345 INFO common.Storage: Storage directory /usr/local/hadoop/tmp/dfs/name has been successfully formatted.
2019-12-24 08:48:25,368 INFO namenode.FSImageFormatProtobuf: Saving image file /usr/local/hadoop/tmp/dfs/name/current/fsimage.ckpt_0000000000000000000 using no compression
2019-12-24 08:48:25,480 INFO namenode.FSImageFormatProtobuf: Image file /usr/local/hadoop/tmp/dfs/name/current/fsimage.ckpt_0000000000000000000 of size 391 bytes saved in 0 seconds .
2019-12-24 08:48:25,577 INFO namenode.NNStorageRetentionManager: Going to retain 1 images with txid &gt;= 0
2019-12-24 08:48:25,589 INFO namenode.FSImage: FSImageSaver clean checkpoint: txid = 0 when meet shutdown.
2019-12-24 08:48:25,589 INFO namenode.NameNode: SHUTDOWN_MSG: 
/************************************************************
SHUTDOWN_MSG: Shutting down NameNode at hadoop0/192.168.2.10
************************************************************/
</code></pre></div></details> <p>æœ€åæ‰§è¡Œ<code>sbin/start-all.sh</code></p> <p>æ‰§è¡Œ<code>jps</code>çœ‹åˆ°ä¸‹é¢çš„å‡ ä¸ªè¿›ç¨‹å°±æˆåŠŸäº†</p> <div class="language- extra-class"><pre class="language-text"><code>[root@hadoop0 hadoop]# jps
1504 NodeManager
1094 SecondaryNameNode
1831 Jps
873 DataNode
1353 ResourceManager
699 NameNode
</code></pre></div><p>åœæ­¢çš„æ—¶å€™æ‰§è¡Œ<code>sbin/stop-all.sh</code><br>
windowså¤–è®¿é—®<code>127.0.0.1:50070</code>,<code>127.0.0.1:8088</code><br></p><div align="center"><img src="/assets/img/Snipaste_2019-12-24_20-05-06.58eef2bb.png" style="height: 250px"></div> <div align="center"><img src="/assets/img/Snipaste_2019-12-24_20-08-30.d890bf7b.png" style="height: 450px"></div><p></p> <h3 id="é›†ç¾¤é•œåƒé…ç½®"><a href="#é›†ç¾¤é•œåƒé…ç½®" aria-hidden="true" class="header-anchor">#</a> é›†ç¾¤é•œåƒé…ç½®</h3> <p>[1] æŒ‡å®šnodemanagerçš„åœ°å€ï¼Œä¿®æ”¹æ–‡ä»¶<code>yarn-site.xml</code></p> <div class="language- extra-class"><pre class="language-text"><code>  &lt;property&gt;
    &lt;description&gt;The hostname of the RM.&lt;/description&gt;
    &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;
    &lt;value&gt;hadoop0&lt;/value&gt;
  &lt;/property&gt;
</code></pre></div><p>[2] ä¿®æ”¹<code>/usr/local/hadoop/etc/hadoop/works</code></p> <div class="language- extra-class"><pre class="language-text"><code>localhost #ä¸åŠ è¿™ä¸ªhadoop0å°±ä¸ä¼šè¢«ç”¨ä½œDataNode
hadoop1
hadoop2
</code></pre></div><br> <p>åœæ­¢é•œåƒ<code>docker stop hadoop0</code><br>
æäº¤æ–°é•œåƒ<code>docker commit -a &quot;ooowl&quot; -m &quot;ConfiguredHadoop&quot; Hadoop0çš„id centos-hadoop-confd</code><br> <code>docker images</code></p> <div class="language- extra-class"><pre class="language-text"><code>REPOSITORY                 TAG                 IMAGE ID            CREATED             SIZE
centos-hadoop-confd        latest              f4d641b36c39        4 minutes ago       2.86GB
centos-hadoop              latest              0775d9e8e35f        32 hours ago        2.79GB
centos-jdk                 latest              1fb53b406bea        32 hours ago        1.1GB
centos-ssh                 latest              636c9d7f103e        32 hours ago        297MB
mongo                      latest              a0e2e64ac939        5 days ago          364MB
redis                      latest              dcf9ec9265e0        4 weeks ago         98.2MB
mysql                      5.7                 1e4405fe1ea9        4 weeks ago         437MB
nginx                      latest              231d40e811cd        4 weeks ago         126MB
centos                     latest              0f3e07c0138f        2 months ago        220MB
docker4w/nsenter-dockerd   latest              2f1c802f322f        14 months ago       187kB
</code></pre></div><h3 id="åˆ›å»ºä»èŠ‚ç‚¹"><a href="#åˆ›å»ºä»èŠ‚ç‚¹" aria-hidden="true" class="header-anchor">#</a> åˆ›å»ºä»èŠ‚ç‚¹</h3> <p><em>å‘½ä»¤</em><br>
hadoop1</p> <div class="language- extra-class"><pre class="language-text"><code>docker run -v /C/Users/ooowl/AppData/Local/Packages/CanonicalGroupLimited.Ubuntu18.04onWindows_79rhkp1fndgsc/LocalState/rootfs/root/hadoopdata/:/data 
--name hadoop1 --hostname hadoop1 
--net hadoop --ip 192.168.2.11 -d -P -p 20023:22 -p 50071:50070 -p 8089:8088 -p 9001:9000 
centos-hadoop-confd
</code></pre></div><p>hadoop2</p> <div class="language- extra-class"><pre class="language-text"><code>docker run -v /C/Users/ooowl/AppData/Local/Packages/CanonicalGroupLimited.Ubuntu18.04onWindows_79rhkp1fndgsc/LocalState/rootfs/root/hadoopdata:/data 
--name hadoop2 --hostname hadoop2 
--net hadoop --ip 192.168.2.12 -d -P -p 20024:22 -p 50072:50070 -p 8090:8088 -p 9002:9000 
centos-hadoop-confd
</code></pre></div><h3 id="å…å¯†ç™»å½•"><a href="#å…å¯†ç™»å½•" aria-hidden="true" class="header-anchor">#</a> å…å¯†ç™»å½•</h3> <p>1 ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸‰ä¸ªå¤„åœ¨åŒä¸€å­ç½‘ä¸‹çš„å®Œå…¨ä¸€æ ·çš„é•œåƒ,æˆ‘ä»¬ä¸‹é¢è¦åšçš„æ˜¯é…ç½®sshå’Œå…å¯†ç™»å½•  <br></p> <p>2 <code>docker exec -it hadoop0 bin/bash</code>è¿›å…¥  <br></p> <p>3 <code>ping 192.168.2.11 -c 4</code>pingå¦å¤–ä¸¤ä¸ªipå’Œç™¾åº¦,èƒ½é€šå°±è¡Œäº†  <br></p> <p>4 å®‰è£…vimå’Œwhich<code>yum install vim which</code> <br></p> <p>5 ç¼–è¾‘<code>/etc/ssh/sshd_config</code>,ä¿è¯
RSAAuthenticationå’ŒPubkeyAuthentication,PermitRootLoginæ˜¯yesæ²¡æœ‰å°±æ·»åŠ ,Port 22  <br></p> <p>6 <code>ssh-keygen -t rsa</code>ä¸€è·¯å›è½¦,<code>cat ~/.ssh/id_rsa.pub</code>æ‹¿åˆ°å…¬é’¥  <br></p> <p>7 åœ¨dockeré•œåƒå¤–é¢hadoopdataä¸‹åˆ›å»º<code>authorized_keys</code>,æ·»åŠ è¿›å»  <br></p> <p>8 åœ¨ä¸‰ä¸ªé•œåƒé‡å¤ä¸€éæ“ä½œ,ä¹‹åæœ€å¥½èƒ½æ·»åŠ å®¿ä¸»æœºçš„å…¬é’¥,ä¸åŠ ä¹Ÿè¡Œ.<br>
æœ€åä¸‰ä¸ªé•œåƒä¸­æ‰§è¡Œ<code>cp /data/authorized_keys ~/.ssh</code><br>
ä¹‹åæµ‹è¯•ä¸€ä¸‹ssh<code>ssh root@192.168.2.11 -p22</code>æ¯ä¸ªé•œåƒéƒ½è¯•è¯•.</p> <div align="center"><img src="/assets/img/Snipaste_2019-12-24_16-32-35.7523f667.png" style="height: 400px"></div> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>å¯ä»¥åœ¨ç¬¬ä¸€ä¸ªé•œåƒé‡Œè¿è¡Œä¸€æ¬¡<code>ssh-keygen -t rsa</code>æ·»åŠ <code>authorized_keys</code>,è¿™æ ·ä¸‰ä¸ªé•œåƒåº”è¯¥ä¹Ÿèƒ½äº’é€š,ä¸è¡Œçš„è¯å†ç”¨ä¸Šé¢çš„åŠæ³•<br>
è¿™ä¸€æ­¥å¯ä»¥é˜²æ­¢livenodeæ•°é‡æ˜¾ç¤ºé”™è¯¯</p></div> <h3 id="å¯åŠ¨é›†ç¾¤"><a href="#å¯åŠ¨é›†ç¾¤" aria-hidden="true" class="header-anchor">#</a> å¯åŠ¨é›†ç¾¤</h3> <p>è¿›å…¥hadoop0<code>docker exec -it hadoop0 /bin/bash</code><br>
è¿›å…¥<code>/usr/local/hadoop/</code>,<code>sbin/start-all.sh</code><br>
åˆ†åˆ«åœ¨ä¸‰ä¸ªå®¹å™¨é‡Œè¿è¡Œ<code>jps</code>
hadoop0</p> <div class="language- extra-class"><pre class="language-text"><code>228 NameNode
1048 NodeManager
890 ResourceManager
378 DataNode
573 SecondaryNameNode
1247 Jps
</code></pre></div><p>hadoop1 hadoop2</p> <div class="language- extra-class"><pre class="language-text"><code>164 NodeManager
309 Jps
58 DataNode
</code></pre></div><p>å°±å¯åŠ¨æˆåŠŸäº†,æ¥ä¸‹æ¥è§£å†³UUIDçš„é—®é¢˜<br>
åˆ†åˆ«åˆ é™¤<code>/usr/local/hadoop/tmp/</code>ä¸‹çš„dfså’Œnmä»€ä¹ˆ,æŠŠtmpæ¸…ç©ºå°±è¡Œäº†.<br>
å›åˆ°<code>cd /usr/local/hadoop</code>,å†æ¬¡æ ¼å¼åŒ–<code>bin/hdfs namenode -format</code></p> <h3 id="éªŒè¯ä¸€ä¸‹"><a href="#éªŒè¯ä¸€ä¸‹" aria-hidden="true" class="header-anchor">#</a> éªŒè¯ä¸€ä¸‹</h3> <p>åœ¨50070åº”è¯¥æ˜¯è¿™æ ·
8088åº”è¯¥æ˜¯è¿™æ ·
åœ¨hadoop0çš„~ä¸­è·‘ä¸ªwordcountè¯•è¯•</p> <div class="language- extra-class"><pre class="language-text"><code>vi a.txt
hello you
hello me
</code></pre></div><p>ä¸Šä¼ a.txtåˆ°hdfsä¸Š</p> <div class="language- extra-class"><pre class="language-text"><code>hdfs dfs -put a.txt /
</code></pre></div><p>æ‰§è¡Œwordcountç¨‹åº</p> <div class="language- extra-class"><pre class="language-text"><code>cd /usr/local/hadoop/share/hadoop/mapreduce
hadoop jar hadoop-mapreduce-examples-3.1.3.jar wordcount /a.txt /out
</code></pre></div><p>çœ‹çœ‹ç»“æœ</p> <div class="language- extra-class"><pre class="language-text"><code>hdfs dfs -text /out/patr-r-00000

2019-12-25 01:45:21,449 INFO sasl.SaslDataTransferClient: SASL encryption trust check: localHostTrusted = false, remoteHostTrusted = false
hello   2
me      1
you     1   
</code></pre></div><div align="center"><img src="/assets/img/Snipaste_2019-12-25_16-21-02.aa09be30.png" style="height: 400px"></div> <h2 id="å‡ºç°çš„é—®é¢˜"><a href="#å‡ºç°çš„é—®é¢˜" aria-hidden="true" class="header-anchor">#</a> å‡ºç°çš„é—®é¢˜</h2> <h3 id="å®‰å…¨æ¨¡å¼"><a href="#å®‰å…¨æ¨¡å¼" aria-hidden="true" class="header-anchor">#</a> å®‰å…¨æ¨¡å¼</h3> <p>å®‰å…¨æ¨¡å¼çš„ç›¸å…³å‘½ä»¤:</p> <div class="language- extra-class"><pre class="language-text"><code>è·å–å®‰å…¨æ¨¡å¼çš„çŠ¶æ€:

hdfs dfsadmin -safemode get

å®‰å…¨æ¨¡å¼æ‰“å¼€

hdfs dfsadmin -safemode enter

å®‰å…¨æ¨¡å¼å…³é—­

hdfs dfsadmin -safemode leave
</code></pre></div><h3 id="æ–‡ä»¶å—ä¸¢å¤±"><a href="#æ–‡ä»¶å—ä¸¢å¤±" aria-hidden="true" class="header-anchor">#</a> æ–‡ä»¶å—ä¸¢å¤±</h3> <div class="danger custom-block"><p class="custom-block-title">WARNING</p> <p>hdfsåœ¨å•èŠ‚ç‚¹ä¸Šä¼ ä¹‹å,åœ¨å¼€å¯å¤šèŠ‚ç‚¹ä¹‹å‰è¦æŠŠæ–‡ä»¶åˆ é™¤å†é‡æ–°ä¸Šä¼ ä¸€æ¬¡,ä¸èƒ½ç›´æ¥åŠ èŠ‚ç‚¹,å—ä¸¢å¤±.</p></div> <p>åˆ é™¤:<code>hdfs dfs -rm /a.txt</code>,<code>hdfs dfs -rm -r /out</code></p> <h3 id="å†…å­˜ä¸è¶³å’Œå±æ€§æœªæŒ‡å®š"><a href="#å†…å­˜ä¸è¶³å’Œå±æ€§æœªæŒ‡å®š" aria-hidden="true" class="header-anchor">#</a> å†…å­˜ä¸è¶³å’Œå±æ€§æœªæŒ‡å®š</h3> <p>[5] <code>vim mapred-site.xml</code><br>
åœ¨ä¸Šé¢å·²ç»å†™è¿›å»äº†</p> <div class="language- extra-class"><pre class="language-text"><code>    &lt;property&gt;
        &lt;name&gt;yarn.app.mapreduce.am.env&lt;/name&gt;
        &lt;value&gt;HADOOP_MAPRED_HOME=$HADOOP_HOME&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.map.env&lt;/name&gt;
        &lt;value&gt;HADOOP_MAPRED_HOME=$HADOOP_HOME&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.reduce.env&lt;/name&gt;
        &lt;value&gt;HADOOP_MAPRED_HOME=$HADOOP_HOME&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
    &lt;name&gt;mapreduce.map.memory.mb&lt;/name&gt;
    &lt;value&gt;2048&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.map.java.opts&lt;/name&gt;
        &lt;value&gt;-Xmx2048M&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.reduce.memory.mb&lt;/name&gt;
        &lt;value&gt;4096&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;mapreduce.reduce.java.opts&lt;/name&gt;
        &lt;value&gt;-Xmx4096M&lt;/value&gt;
    &lt;/property&gt;
</code></pre></div><h3 id="livenodesæ•°é‡ä¸å¯¹"><a href="#livenodesæ•°é‡ä¸å¯¹" aria-hidden="true" class="header-anchor">#</a> LiveNodesæ•°é‡ä¸å¯¹</h3> <p>ä»»åŠ¡æ­£å¸¸è¿è¡Œæ²¡æœ‰ä»»ä½•æŠ¥é”™,8088æ­£å¸¸ä¸‰ä¸ªèŠ‚ç‚¹,50070åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ä¸”æ¯æ¬¡å¯åŠ¨èŠ‚ç‚¹éƒ½ä¼šéšæœºå˜åŒ–<br>
æ ¹æ®ç½‘ä¸Šæœ‰ä¸€ä¸ªå…‹éš†è™šæ‹Ÿæœºçš„å¸–å­,çŒœæµ‹å¯èƒ½æ˜¯datanodeuuidçš„é—®é¢˜.
ä¸‰ä¸ªèŠ‚ç‚¹éƒ½è¿›å…¥<code>/usr/local/hadoop/tmp/dfs/name/current</code>,ç„¶å<code>cat VERSION</code><br>
å‘ç°uuidä¸€æ ·.<br>
hadoop0</p> <div class="language- extra-class"><pre class="language-text"><code>[root@hadoop0 hadoop]# cd /usr/local/hadoop/tmp/dfs/name/current
[root@hadoop0 current]# cat VERSION 
#Wed Dec 25 07:12:37 UTC 2019
namespaceID=678964001
clusterID=CID-dc675f9a-7a43-4ee5-bcd1-669e58096734
cTime=1577257957962
storageType=NAME_NODE
blockpoolID=BP-1966795420-192.168.2.10-1577257957962
layoutVersion=-64
</code></pre></div><p>hadoop1</p> <div class="language- extra-class"><pre class="language-text"><code>[root@hadoop1 hadoop]# cd /usr/local/hadoop/tmp/dfs/name/current
[root@hadoop1 current]# cat VERSION 
#Wed Dec 25 07:12:37 UTC 2019
namespaceID=678964001
clusterID=CID-dc675f9a-7a43-4ee5-bcd1-669e58096734
cTime=1577257957962
storageType=NAME_NODE
blockpoolID=BP-1966795420-192.168.2.10-1577257957962
layoutVersion=-64
</code></pre></div><p>hadoop2</p> <div class="language- extra-class"><pre class="language-text"><code>[root@hadoop2 sbin]# cd /usr/local/hadoop/tmp/dfs/name/current
[root@hadoop2 current]# ls
VERSION                                        edits_inprogress_0000000000000000002  fsimage_0000000000000000000.md5
edits_0000000000000000001-0000000000000000001  fsimage_0000000000000000000           seen_txid
[root@hadoop2 current]# cat VERSION 
#Wed Dec 25 07:12:37 UTC 2019
namespaceID=678964001
clusterID=CID-dc675f9a-7a43-4ee5-bcd1-669e58096734
cTime=1577257957962
storageType=NAME_NODE
blockpoolID=BP-1966795420-192.168.2.10-1577257957962
layoutVersion=-64
</code></pre></div><p>åˆ†åˆ«åˆ é™¤<code>/usr/local/hadoop/tmp/temp</code>ä¸‹çš„dfså’Œnmä»€ä¹ˆ,æŠŠtempæ¸…ç©ºå°±è¡Œäº†.<br>
å›åˆ°<code>cd /usr/local/hadoop</code>,å†æ¬¡æ ¼å¼åŒ–<code>bin/hdfs namenode -format</code></p> <h2 id="å¼•ç”¨å‚è€ƒ"><a href="#å¼•ç”¨å‚è€ƒ" aria-hidden="true" class="header-anchor">#</a> å¼•ç”¨å‚è€ƒ</h2> <ul><li>https://blog.csdn.net/u011462318/article/details/80439160</li> <li>https://blog.csdn.net/xu470438000/article/details/50512442
<div id="vcomments"></div></li></ul></div> <!----> <!----> <!----> <div class="page-edit" data-v-cdcae5a4><!----> <div class="last-updated" data-v-cdcae5a4><span class="prefix" data-v-cdcae5a4>Last Updated: </span> <span class="time" data-v-cdcae5a4>12/26/2019, 2:36:54 PM</span></div></div> <!----> </div> <div class="valine-wrapper" data-v-63f18ac0><div id="valine" style="display:;" data-v-63f18ac0></div></div> <!----> <!----> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-41016a8b data-v-41016a8b><i class="iconfont reco-up" data-v-41016a8b></i></div></div></div></div>
    <script src="/assets/js/app.64171550.js" defer></script><script src="/assets/js/11.c050169c.js" defer></script><script src="/assets/js/38.34e99c36.js" defer></script>
  </body>
</html>
