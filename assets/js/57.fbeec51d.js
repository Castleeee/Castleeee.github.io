(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{434:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),a("p",[t._v("在url中引入")]),t._v(" "),t._m(41),t._m(42),t._v(" "),t._m(43),t._m(44),t._v(" "),a("p",[t._v('配置自定义500 404\n关闭DEBUG模式无法访问static文件需要自己配置STATIC_ROOT\n在全局url中handler404="users."')]),t._v(" "),t._m(45),t._v(" "),t._m(46),t._v(" "),t._m(47),t._v(" "),a("p",[t._v("在每个app下的admin中需要管理的类要引入并注册")]),t._v(" "),t._m(48),t._m(49),t._v(" "),t._m(50),t._v(" "),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._v(" "),t._m(54),t._v(" "),t._m(55),t._v(" "),a("p",[t._v("修改adminx文件")]),t._v(" "),t._m(56),t._m(57),t._v(" "),t._m(58),t._v(" "),a("p",[t._v("定义类")]),t._v(" "),t._m(59),t._m(60),t._v(" "),t._m(61),t._v(" "),t._m(62),t._v(" "),t._m(63),t._v(" "),t._m(64),t._m(65),t._v(" "),t._m(66),t._v(" "),t._m(67),t._v(" "),t._m(68),t._v(" "),a("Valine")],1)},[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"danger custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("写的太乱已废弃"),s("br")]),this._v(" "),s("p",[this._v("移步大型电视连续剧Django[0]-环境配置")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"django的基本用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#django的基本用法","aria-hidden":"true"}},[this._v("#")]),this._v(" Django的基本用法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"配置环境和ide"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置环境和ide","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置环境和IDE")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"创建env"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建env","aria-hidden":"true"}},[this._v("#")]),this._v(" 创建env")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[a("em",[t._v("我喜欢用Anaconda")]),a("br"),t._v("\nconda create -n xxxx python=3.6+/2.7"),a("br"),t._v("\n创建了一个conda的自带环境 "),a("br"),t._v("\n可以在Anconda中查看里面有啥"),a("br"),t._v("\nconda list查看所有的包"),a("br"),t._v("\nconda install xx 安装一个包"),a("br"),t._v("\nconda uninstall xx 卸载一个包"),a("br"),t._v("\nconda 存放在Anaconda/envs下"),a("br"),t._v("\nLinux:  source (de)activate name(虚拟环境名称)"),a("br"),t._v("\nWindows: (de)activate name(虚拟环境名称)"),a("br"),t._v("\nAnaconda真的很良心不用自己解决包冲突该有的都有还能兼容pip一块用【爽到"),a("br")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"环境搭建-创建工程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境搭建-创建工程","aria-hidden":"true"}},[this._v("#")]),this._v(" 环境搭建&创建工程")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v("这里默认你已经配置好python环境了")]),s("br")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("把django/bin/加入环境变量"),a("br")]),t._v(" "),a("li",[t._v("cmd 中输入进入到想要工程文件夹(最好是空的),"),a("em",[t._v("django-admin startproject name")]),a("br")]),t._v(" "),a("li",[t._v("该目录下会多一个文件夹即是我们的工程.此时可以用pycharm打开配置一下django的configuration"),a("br"),t._v("(最好单独创建一个conda env)"),a("br"),t._v(" "),a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/12620393-c7c9a11932192b4b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"选择配置好的conda环境"}}),t._v(" "),a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/12620393-f71e96ee5210278b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"配置configuration"}})]),t._v(" "),a("li",[t._v("接下来就可以愉快的撸代码啦"),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"django基本结构介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#django基本结构介绍","aria-hidden":"true"}},[this._v("#")]),this._v(" Django基本结构介绍")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"特性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特性","aria-hidden":"true"}},[this._v("#")]),this._v(" 特性")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("django灵活性比pyrimid稍微差一点,但是确实十分快速的一个框架,编写十分的快,虽然不如Flask小巧但是能承担很大的负载"),s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/12620393-383636fee043c224.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"django的基本过程"}}),this._v("\n也是一个MVC但是简化了model的操作,直接用django的engine代替了sql语句,更好写,自带了admin以及升级之后炫酷的的xadmin。"),s("br"),this._v(" "),s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/12620393-5c4ab58f87086c11.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400",alt:"在这里可以直接打开manage.py控制台"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"常用的命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用的命令","aria-hidden":"true"}},[this._v("#")]),this._v(" 常用的命令")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#记不住也先看一遍,会一直用")]),t._v("\ndjango"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("admin startproject xxx"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#前面提到的开始一个django的项目cmd进入目录之后")]),t._v("\npython manage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py startapp xxx"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建一个xxx的app")]),t._v("\npython manage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py makemigrations"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建更改的makemigrations文件")]),t._v("\npython manage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py migrate"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#应用你的更改到数据库")]),t._v("\npython manage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py runserver "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#在8000端口运行你的程序")]),t._v("\npython manage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py shell"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#django命令行")]),t._v("\npython manage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py flush"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#清空表")]),t._v("\npython manage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py createsuperuser"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#创建管理员账户可以直接登陆后台，填入用户名密码邮箱可以空")]),t._v("\npython manage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py dbshell"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#数据库命令行")]),t._v("\npython manage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py changepassword username"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#换密码")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("注意")]),this._v(" "),s("p",[this._v("在manage.py Tools下前面的python manage.py 不用加")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"新建一个工程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新建一个工程","aria-hidden":"true"}},[this._v("#")]),this._v(" 新建一个工程")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("安装拓展包："),a("br"),t._v("\nDjangoUeditor(源码安装)"),a("br"),t._v("\nxdamin(git源码安装)"),a("br"),t._v("\ndjango-cors-headers(解决跨域)"),a("br"),t._v("\ndjangorestframework(RESTful框架)"),a("br"),t._v("\nmysql-client(windows 拓展站下载轮子)"),a("br"),t._v("\ndjango-filter\nmarkdown")]),t._v(" "),a("li",[t._v("建立目录"),a("br"),t._v(" "),a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/12620393-390886d8368630df.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400",alt:"目录"}})]),t._v(" "),a("li",[t._v("修改setting文件")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("sys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("insert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("BASE_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inster"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BASE_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"apps"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inster"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BASE_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"extra_apps"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#BASE_DIR下面增加这三条将BASE_DIR apps extra_apps添加进搜索路径去")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("INSTALLED_APPS "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"crispy_forms"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xadmin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"corsheaders"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#注册插件")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("MIDDLEWARE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'corsheaders.middleware.CorsMiddleware'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#要放在django.middleware.common.CommonMiddleware之前,")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("DATABASES "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ENGINE'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'django.db.backends.mysql'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NAME'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blog"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USER"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PASSWORD"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1118"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HOST"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PORT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3306"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改默认数据库为Mysql")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("LANGUAGE_CODE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zh-hans'")]),t._v("\n\nTIME_ZONE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Asia/Shanghai'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\nUSE_TZ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改时区")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#下面是cors跨域配置")]),t._v("\nCORS_ALLOW_CREDENTIALS "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\nCORS_ORIGIN_ALLOW_ALL "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\nCORS_ORIGIN_WHITELIST "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nCORS_ALLOW_METHODS "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DELETE'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'OPTIONS'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PATCH'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PUT'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'VIEW'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nCORS_ALLOW_HEADERS "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'XMLHttpRequest'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'X_FILENAME'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'accept-encoding'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'authorization'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'content-type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dnt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'origin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user-agent'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'x-csrftoken'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'x-requested-with'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("这里有坑")]),t._v(" "),a("p",[a("em",[t._v("！数据库使用utf8_unicode 排序集使用utf8_general_ci"),a("br"),t._v("\ndjango也是默认unicode,content_type='application/json[json类型才加,必需加]charset=utf-8'才可以返回中文")]),a("br"),t._v(" "),a("em",[t._v('！AUTH_USER_MODEL = "app(AbstractUser使用者).UserProfile"继承AbstractUser时重复名字错误需要在setting中设置')]),a("br"),t._v(" "),a("em",[t._v("！出现migrateerror把数据库全删除，重新migrate一遍")]),a("br"),t._v(" "),a("em",[t._v("!开头标明#-")]),t._v("-coding:utf-8-*-,所有中文字符串前要有u"),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"django的m-v-c！"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#django的m-v-c！","aria-hidden":"true"}},[this._v("#")]),this._v(" Django的M V C！")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"模型-m"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模型-m","aria-hidden":"true"}},[this._v("#")]),this._v(" 模型-M")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("字段类型")]),t._v(" "),a("p",[t._v("CharField"),a("br"),t._v('\n(max_length=n,default="默认值",primary_key=True/False,blank=True/False,'),a("br"),t._v('\nnull=True/False,verbosename=u"管理界面中显示",unique=True/False)'),a("br"),t._v(" "),a("br"),t._v('\nEmailField(verbose_name=u"管理界面显示")'),a("br"),t._v(" "),a("br"),t._v('\nImageField(upload_to="一个媒体文件夹",default="默认头像",max_length=100)'),a("br"),t._v("\nmax_lengt=时路径最大长度)"),a("br"),t._v(" "),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("class Meta:"),a("br")]),t._v(" "),a("p",[t._v('   verbose_name="管理界面显示类的管理名称"'),a("br"),t._v("\n   verbose_name_plural=verbose_name"),a("br"),t._v('\n   db_table="自定义表名"'),a("br"),t._v('\n   ordering="选取一个字段用来排序可用+/-"'),a("br"),t._v("\n   def__str__(self):"),a("br"),t._v("\n     return self.管理中显示的字段"),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/12620393-94b0591c3953054e.png?imageMogr2/auto-orient/strip%7CimageView2/1/w/240",alt:"图片.png"}}),this._v(" "),s("br")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("查询模型:")]),t._v(" "),a("p",[t._v("查询方法\nmodel.objects.filter()#过滤器"),a("br"),t._v("\nmodel.object.all()[0:x]#从0-x的切片,不支持负索引"),a("br"),t._v("\nmodel.objects.all().exists() #判断tb中是否为空"),a("br"),t._v("\nmodel.objects.all().count() #查询tb中的对象数量"),a("br"),t._v("\nmodel.objects.all().order_by('-name') #对tb中的对象按照name倒序查询"),a("br"),t._v("\nmodel.objects.all().reverse() #倒序取值,但需要已经在model中进行了排序,否则无意义。"),a("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("过滤条件")]),t._v(" "),a("p",[t._v("条件选取querySet的时候，filter表示=，exclude表示!=。"),a("br"),t._v("\nquerySet.distinct() 去重复"),a("br"),t._v("\n__exact 精确等于 like 'aaa'"),a("br"),t._v("\n__iexact 精确等于 忽略大小写 ilike 'aaa'"),a("br"),t._v("\n__contains 包含 like '%aaa%'"),a("br"),t._v("\n__icontains 包含 忽略大小写 ilike '%aaa%'，对sqlite,contains的效果等于icontains"),a("br"),t._v("\n__gt 大于"),a("br"),t._v("\n__gte 大于等于"),a("br"),t._v("\n__lt 小于"),a("br"),t._v("\n__lte 小于等于"),a("br"),t._v("\n__in 存在于一个list范围内"),a("br"),t._v("\n__startswith 以...开头"),a("br"),t._v("\n__istartswith 以...开头 忽略大小写"),a("br"),t._v("\n__endswith 以...结尾"),a("br"),t._v("\n__iendswith 以...结尾，忽略大小写"),a("br"),t._v("\n__range 在...范围内"),a("br"),t._v("\n__year 日期字段的年份"),a("br"),t._v("\n__month 日期字段的月份"),a("br"),t._v("\n__day 日期字段的日"),a("br"),t._v("\n__isnull=True/False"),a("br"),t._v('\n__regex="^ $"正则'),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("高级查询"),s("br")]),this._v(" "),s("p",[this._v("from django.db.models import Q可以进行多连接查询筛选查询子句等"),s("br"),this._v("\nQ(OS_mark='wd') | Q(OS_mark='wa')可以和关键字混用但"),s("em",[this._v("Q必须在前面")]),s("br")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"danger custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("取回结果和操作"),a("br")]),t._v(" "),a("p",[t._v("model.values()#返回字典组成的列表"),a("br"),t._v("\nmodel.values_list()#元组组成的列表没有键"),a("br"),t._v("\nmodel.values_list('name','ip')#只返回想要字段组成的元组的列表"),a("br"),t._v("\nitem=model.objects.get(name='name')#查询出为name的结果一般返回单个"),a("br"),t._v("\nitem.key=value#变更"),a("br"),t._v("\nitem.save()#保存到数据库"),a("br"),t._v("\nitem.delete()#删除记录"),a("br"),t._v("\nvm.objects.create(name='name',key='value')#创建新对象，调用save直接保存到数据库"),a("br"),t._v('\nvm.get_or_create(k="v")#返回一个二元组，若查询到了返回(结果,True)or(None,False)'),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"queryset"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#queryset","aria-hidden":"true"}},[this._v("#")]),this._v(" QuerySet"),s("br")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("查询出来的结果是一个QuerySet,是一个结果元组组成的列表"),s("br"),this._v('\norder_by("key")按照key进行排序，再进行reverse'),s("br"),this._v("\n可以切片不支持负索引，可调用reverse()将顺序倒过来"),s("br"),this._v("\n同一model和不同model都可以取并集")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"danger custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("小心")]),this._v(" "),s("p",[this._v("记得做缓存查询，避免重复")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"视图-url-v"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#视图-url-v","aria-hidden":"true"}},[this._v("#")]),this._v(" 视图&url-V")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"url"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url","aria-hidden":"true"}},[this._v("#")]),this._v(" URL:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("引入")]),this._v(" "),s("p",[this._v("from django.urls import include,path")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("include把app的urls包含进来"),s("br"),this._v("\n类视图在引入的时候，直接传入类的.as_view()方法"),s("br")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"view"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#view","aria-hidden":"true"}},[this._v("#")]),this._v(" view:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("view中处理Httprequest有函数视图和类视图"),s("br"),this._v(" "),s("em",[this._v("函数视图")]),s("br")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("root_page")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" HttpResponse"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello world"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("views "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" root_page\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#your class here")]),t._v("\n\nurlpatterns"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('r""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("root_page"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v("类视图")]),s("br"),this._v("\n类视图更加灵活,"),s("br"),this._v("可以继承复用")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("views"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("generic "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" View\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("view_class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Viwe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#注意此处是个元组")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("kw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#注意关键词的传入")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" HttpResponse "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#post一般不需要kw,要对表单进行验证,用model中的form")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#首先要在urls中引入")]),t._v("\nurlpatterns"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('r"/view_calss"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("view_calss"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("as_view"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"名字,在Django的templates中使用"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"路由-中间件-c"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#路由-中间件-c","aria-hidden":"true"}},[this._v("#")]),this._v(" 路由&中间件-C")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"danger custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("留坑")]),this._v(" "),s("p",[this._v("留坑，modelfrom验证器，跟着DRF过一遍\nTemplate")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"admin转xadmin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#admin转xadmin","aria-hidden":"true"}},[this._v("#")]),this._v(" admin转Xadmin")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"admin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#admin","aria-hidden":"true"}},[this._v("#")]),this._v(" admin")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" UserProfile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Banner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("EmailVerifyCode"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#引入类")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Register your models here.")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserProfileAdmin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("admin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ModelAdmin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#定义管理类")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pass")]),t._v("\nadmin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("site"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("register"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("UserProfile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("UserProfileAdmin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#注册管理类")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"xadmin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xadmin","aria-hidden":"true"}},[this._v("#")]),this._v(" Xadmin")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("把git xadmin下的包xadmin放到extra_apps下"),s("br")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/12620393-722177e46ddaaba9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/300",alt:"xadmin"}}),s("br"),this._v('xadmin需要"crispy_forms"注册进app中'),s("br"),this._v("\n使用xadmin的时候把原先的admin的操作注释，不再需要"),s("br")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("url中引入xadmin"),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/12620393-f95dca91cbda0bec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/440",alt:"配置url"}}),s("br"),this._v("\n接下来访问admin就可以了"),s("br"),this._v(" "),s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/12620393-a0b771270230b85b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/640",alt:"注册完毕的"}}),s("br")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("注意")]),this._v(" "),s("p",[this._v('外键字段要写成"foreign__keyword"会对外键的字段进行搜索'),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"自定义界面和显示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义界面和显示","aria-hidden":"true"}},[this._v("#")]),this._v(" 自定义界面和显示")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" xadmin "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" views\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#global seeting class")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseSetting")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    enable_themes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#启用主题")]),t._v("\n    use_bootswatch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#boots主题视图")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#注册管理视图")]),t._v("\nxadmin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("site"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("register"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("views"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BaseAdminView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("BaseSetting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GlobalSettings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    site_title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"年轻人的管理系统"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#左上角的标志")]),t._v("\n    site_footer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"我的论坛"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#页脚显示")]),t._v("\n    menu_style"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"accordion"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#折叠apps类")]),t._v("\n    model_icon "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fa fa-clone"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#显示什么图标")]),t._v("\n    ordering"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#按照index从小到大排序")]),t._v("\n    readonly_fields"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"add_time"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#设置只读不可修改字段")]),t._v("\n    exclude"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"add_time"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#不显示某些字段")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#注册管理视图")]),t._v("\nxadmin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("site"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("register"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("views"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CommAdminView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("GlobalSettings"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v('在app下的apps里添加命名verbose_name=u"自己定义的名称"'),a("br"),t._v('\n在__init__.py里添加 default_app_config="users.apps.UserConfig"#app名称.apps.名称的Config'),a("br"),t._v("\n图标"),a("a",{attrs:{href:"https://fontawesome.com/"}},[t._v("下载4.7版本")]),t._v("（xadmin暂时不支持5以上），解压css和font覆盖文件"),a("br"),t._v("\n目录在'.\\extra_apps\\xadmin\\static\\xadmin\\vendor\\font-awesome'下"),a("br"),t._v("\n去这个网站找到对应版本的icon，想要哪个直接复制css给model_icon"),a("br"),t._v(" "),a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/12620393-19db3a524cf6bdd7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/640",alt:"图片.png"}}),a("br"),t._v('\n这个类在做外键的时候设置relfield_style="fk-ajax"即可在其它表中作为ajax和联想查询不再使用默认下拉式'),a("br")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"嵌套管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#嵌套管理","aria-hidden":"true"}},[this._v("#")]),this._v(" 嵌套管理")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BannerInline")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("object")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\nmodel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Banner"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#想要被嵌套的model")]),t._v("\nextra"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#在管理class中注册")]),t._v("\ninlines"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("BannerInline"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#列表式的，可以有多个inline")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"字段分组管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字段分组管理","aria-hidden":"true"}},[this._v("#")]),this._v(" 字段分组管理")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在model中创建新的类继承想要被管理的类\n"),s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/12620393-75b7d5c4eb9e949e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/840",alt:"model"}}),s("br"),this._v("\n在xadmin中引入创建admin类重载queryset方法,绑定新的管理类\n"),s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/12620393-c04de43dac670615.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"adminx"}}),s("br"),this._v("\n再重载queryset方法，会使符合条件的留下")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"其他几个小功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他几个小功能","aria-hidden":"true"}},[this._v("#")]),this._v(" 其他几个小功能")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("p",[this._v('列表页直接编辑\nlist_editable=["字段名"]')])]),this._v(" "),s("li",[s("p",[this._v('将函数直接作为字段，句柄传入字段列表将函数的返回值显示\n可以直接在adminx中定义\n定义描述和排序 function(函数句柄).short_description="xxx"后台显示名称就是自己定义的')])]),this._v(" "),s("li",[s("p",[this._v("定时刷新\nrefresh_times=[3,2]\n在配置了的Admin类中才会显示\n会多出一个选项选择两秒或者三秒刷新一次")])]),this._v(" "),s("li",[s("p",[this._v("外链接作为字段\n在model中定义(不知道为什么不能跳转不过链接倒是个真链接  ：\\")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("outer_connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("safestring "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" mark_safe\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" mark_safe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"<a href='http://www.baidu.com'>跳转</a>\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nouter_connect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("short_description"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"后台字段名称"')]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"安装djangoueditor使用富文本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装djangoueditor使用富文本","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装DjangoUeditor使用富文本")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("python3不能直接pip版本不兼容，去git把"),s("a",{attrs:{href:"https://github.com/twz915/DjangoUeditor3/"}},[this._v("源码包")]),this._v("下载回家"),s("br"),this._v("\n解压之后命令行cd进目录激活虚拟环境，python setup.py install秒安完。"),s("br"),this._v("\n配置url：'ueditor/',include(\"DjangoUeditor.urls\")'"),s("br"),this._v("\n使用from DjangoUeditor.models import UEditorField在model中引入"),s("br"),this._v("\n可以代替TextField不过需要额外配置参数我只列出常用的，它是继承自TextField的"),s("br")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("UEditorField的属性")]),this._v(" "),s("p",[this._v("Content=UEditorField(verbose_name='内容',#别名"),s("br"),this._v("\nwidth=600, height=300,#编辑器宽高"),s("br"),this._v('\nimagePath="图片/ueditor/", '),s("br"),this._v("\nfilePath=\"文件路径/ueditor/\", #路径如果不加前面的' / '默认media_root为相对路径"),s("br"),this._v('\ndefalut="",#默认为空migrate才不会出错)'),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"danger custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("留坑")]),this._v(" "),s("p",[this._v("导入xlsx json csv 插件的开发+外键自增似懂非懂留坑先填其他的 404 500 页面")])])}],!1,null,null,null);s.default=e.exports}}]);