(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{203:function(t,s,e){t.exports=e.p+"assets/img/截图2019-04-04_21-02-03.15401f24.png"},204:function(t,s,e){t.exports=e.p+"assets/img/截图2019-04-04_21-03-17.cd59d415.png"},205:function(t,s,e){t.exports=e.p+"assets/img/截图2019-04-04_21-07-46.b1847c33.png"},206:function(t,s,e){t.exports=e.p+"assets/img/截图2019-04-04_21-09-30.29baa4c5.png"},207:function(t,s,e){t.exports=e.p+"assets/img/截图2019-04-04_21-21-56.bcce9d59.png"},208:function(t,s,e){t.exports=e.p+"assets/img/截图2019-04-04_21-20-14.dc393f3f.png"},209:function(t,s,e){t.exports=e.p+"assets/img/125C7BB7-A457-4DA1-877C-9932BB4BA520.e85fe07d.jpeg"},210:function(t,s,e){t.exports=e.p+"assets/img/屏幕快照 2019-04-05 上午9.18.07.cd09bd4b.png"},211:function(t,s,e){t.exports=e.p+"assets/img/屏幕快照 2019-04-05 上午9.39.41.31317108.png"},212:function(t,s,e){t.exports=e.p+"assets/img/屏幕快照 2019-04-05 上午10.26.27.36026595.png"},213:function(t,s,e){t.exports=e.p+"assets/img/QQ20190405-0.7d0b909b.png"},214:function(t,s,e){t.exports=e.p+"assets/img/屏幕快照 2019-04-05 上午11.01.57.d20b29fa.png"},215:function(t,s,e){t.exports=e.p+"assets/img/屏幕快照 2019-04-05 上午10.57.34.c7bd0a0c.png"},216:function(t,s,e){t.exports=e.p+"assets/img/截图2019-07-28_09-43-35.590b292f.png"},217:function(t,s,e){t.exports=e.p+"assets/img/截图2019-07-28_10-13-14.066a0a50.png"},218:function(t,s,e){t.exports=e.p+"assets/img/截图2019-07-28_10-17-49.670dfb33.png"},471:function(t,s,e){"use strict";e.r(s);var a=[function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"travisci"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#travisci","aria-hidden":"true"}},[this._v("#")]),this._v(" travisCI")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概念","aria-hidden":"true"}},[this._v("#")]),this._v(" 概念")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("a",{attrs:{href:"https://www.redhat.com/zh/topics/devops/what-is-ci-cd"}},[this._v("看这里")]),this._v(",CI工具有很多，不过我不是devops，用的也很少，这里因为博客一直是写在vuepress上\n"),s("br"),this._v("每次发布提交的流程：npm build->提交到git->然后使用ftp传到blog目录下。"),s("br"),this._v("\n每次都这样很麻烦，而且必须攒攒一大块更新才发，有了CI就方便多了。"),s("br"),this._v("\n常用工具:")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[e("a",{attrs:{href:"https://about.gitlab.com/product/continuous-integration/"}},[t._v("GitLabCI")]),t._v(" "),e("ul",[e("li",[t._v("标准企业级CI/CD,不过需要gitlab，后面再学现在用不到")])])]),t._v(" "),e("li",[e("a",{attrs:{href:"https://circleci.com/"}},[t._v("CircleCI")]),t._v(" "),e("ul",[e("li",[t._v("对github支持很友好的CI，而且功能很强支持自定义的CI，如果有更高的需求可以试一下")])])]),t._v(" "),e("li",[e("a",{attrs:{href:"https://travis-ci.org/"}},[t._v("travisCI")]),t._v(" "),e("ul",[e("li",[t._v("我所使用的CI")])])]),t._v(" "),e("li",[e("a",{attrs:{href:"https://jenkins.io/"}},[t._v("jenkins")]),t._v(" "),e("ul",[e("li",[t._v("重量级的CI，java写的插件丰富。不过我好像也用不到")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("工具选择上我的需要是我提交代码之后让他不用再本机上就能自动build，然后复制到我服务器的blog目录下。"),s("br"),this._v("\ntravisCI已经完全满足我的需求，对公有仓库免费，私有收费。因为是博客也没什么好隐藏的，直接把仓库弄成公有的。"),s("br")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"代码之外的配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码之外的配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 代码之外的配置")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[t._v("注册一个"),e("a",{attrs:{href:"https://github.com/"}},[t._v("Github")]),t._v("账号,并使用账号登录"),e("a",{attrs:{href:"https://travis-ci.org/"}},[t._v("travisCI")])]),t._v(" "),e("li",[t._v("通过webstorm在Github创建你的工程")]),t._v(" "),e("li",[t._v("添加文件，让travisCI监听该repo")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"250px"},attrs:{src:e(203)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"250px"},attrs:{src:e(204)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"450px"},attrs:{src:e(205)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"250px"},attrs:{src:e(206)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"280px"},attrs:{src:e(207)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"290px"},attrs:{src:e(208)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"自定义规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义规则","aria-hidden":"true"}},[this._v("#")]),this._v(" 自定义规则")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v(".travis.yml")]),this._v("有默认的语法和选项，不过我们要配置一下才能适应自己的工程。")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#node_js#使用node环境")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_js")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#node大版本")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'10'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branchs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#监听哪个分支")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("only")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("addons")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#额外的嘱咐，添加下面的ip可以第一次登录不需要你输入yes")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ssh_known_hosts")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 你的.服务.器的.地址\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("before_install")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#这个先不要管他怎么来的")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" openssl aes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("256"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cbc "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("K $encrypted_xxxxxxxx_key "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("iv $encrypted_xxxxxxxx_iv\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("in id_rsa.enc "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("out ~/.ssh/id_rsa "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("d\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" chmod "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("R 600 ~/.ssh/id_rsa "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#注意改权限")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#你平时怎么build的")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm run docs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("build\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("notifications")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#邮件提醒，太他妈人性化了")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("email")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("recipients")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xxxxxx@qq.com\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on_success")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on_failure")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("after_success")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#构建成功后的动作")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" chmod "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("R 600 ~/.ssh/id_rsa"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#权限")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" scp "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("o StrictHostKeyChecking=no "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("v "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("r docs/.vuepress/dist/* travis@你的.服务.器的.地址"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/你的/博客目录 "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#一会着重讲解scp命令，先不说")]),t._v("\n\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("需要其他语句自己去查，阮一峰的blog和官网上有"),s("br")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node_js"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#使用node环境")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_js")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'10'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branchs")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("only")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("addons")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ssh_known_hosts")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" 你的.服务.器的.地址\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm run docs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("build\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("notifications")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("email")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("recipients")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" xxxxxx@qq.com\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on_success")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on_failure")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("after_success")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ls docs/.vuepress/dist\n\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("把这个复制到你的"),s("code",[this._v(".travis.yml")]),this._v("里，过几分钟（监听有延迟）刷新travisCI那个页面应该就出日志了，最后应该给passing了就可以了。\n")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"300px"},attrs:{src:e(209)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"上传到服务器指定目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传到服务器指定目录","aria-hidden":"true"}},[this._v("#")]),this._v(" 上传到服务器指定目录")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("mv和cp是在本机上操作文件，scp是用ssh连接远程传输文件，上传必定要登陆，但是在自动化构建过程中不允许交互，\nssh和scp都需要"),e("a",{attrs:{href:"https://blog.csdn.net/mmd0308/article/details/73825953"}},[t._v("免密登陆")]),t._v("。 "),e("br"),e("br"),t._v("\n传统免密登陆过程"),e("code",[t._v("ssh-keygen")]),t._v("互相交换公钥，放到"),e("code",[t._v("authorized_keys")]),t._v(" 中，客户端发起连接请求时，服务器发送一个字符串给客户端，\n客户端用本地的私钥对字符串进行加密然后发送给服务器，服务器将收到的加密字符串用公钥解密，如果能解密成功就登陆成功。\n下次登陆直接"),e("code",[t._v("ssh username@ip")]),t._v("就可以了。 "),e("br"),t._v(" "),e("br"),t._v(" 但是我们无法控制travis的主机，自然就无法交换，\n况且这也是不安全的暴露在公网上。这时候就需要让Travis伪装成一个受信的客户端去连接。也就是我们\n需要有一对公钥/私钥对，公钥已经保存在我们的Linux服务器中，私钥保存在某个Travis能访问到的地方，在必要的时候\n用这个私钥去连接服务器，这里我们可以把私钥放在Git代码仓库中，但是直接把私钥放代码中不安全，\n所以Travis提供了对私钥进行加密的功能，我们可以把私钥加密之后放在代码仓库，在登陆的时候Travis解密该私钥用于连接。\n")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[t._v("新建用户，改权限")]),t._v(" "),e("li",[t._v("服务器生成公钥和私钥")]),t._v(" "),e("li",[t._v("将公钥添加进"),e("code",[t._v("authorized_keys")]),t._v(" 中")]),t._v(" "),e("li",[t._v("私钥用"),e("code",[t._v("两个特殊字符串")]),t._v("加密放到"),e("code",[t._v("repository")]),t._v("的"),e("code",[t._v("id_rsa.enc")]),t._v("中让travis可以通过保存在网站后台的"),e("code",[t._v("两个特殊字符串")]),t._v("拿到私钥")]),t._v(" "),e("li",[t._v("在脚本中测试能不能免密登陆")]),t._v(" "),e("li",[t._v("上传文件")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("新建用户，修改权限")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("#新建用户\nuseradd travis\n#修改密码,按照提示设置密码。\npasswd travis\n#为用户添加添加权限\nvim /etc/sudoers\n#找到#Allow root to run any commands anywhere这一段注释，在下面新增一行：\n\ntravis  ALL=(ALL)   ALL\n#切换到travis用户\nsu travis\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"2"}},[s("li",[this._v("在travis用户下，～目录生成rsa密钥对，passphase留空\n"),s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"360px"},attrs:{src:e(210)}})]),this._v("\n更改ssh文件夹的权限，.ssh目录设置为700权限，.ssh目录下面的所有文件设置为600权限")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("chmod -R 700 ~/.ssh/\n\nchmod 600 ~/.ssh/*\n\n#看一下改成功了没\nls -al\n\nls ~/.ssh/ -al\n\n总用量 28\ndrwx------  2 travis travis 4096 4月   4 16:15 .\ndrwx------ 11 travis travis 4096 4月   4 16:21 ..\n-rw-------  1 travis travis  412 4月   4 16:12 authorized_keys\n-rw-------  1 travis travis  135 4月   3 18:41 config\n-rw-------  1 travis travis 1679 4月   3 18:28 id_rsa\n-rw-------  1 travis travis  412 4月   3 18:28 id_rsa.pub\n-rw-------  1 travis travis 1372 4月   3 20:11 known_hosts\n\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[this._v("在～/.ssh目录下把公钥添加进信任列表"),s("code",[this._v("authorized_keys")]),this._v("里面")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("cd .ssh/\n#将公钥内容输出到authorized_keys中\ncat id_rsa.pub >> authorized_keys\ncat authorized_keys \n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("这样我们就能以travis用户身份用私钥登陆服务器了"),s("br"),this._v("\n测试一下能否免密登陆")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("cd ~/.ssh\n\nvim config\n\n#config文件中的内容\n\nHost test\nHostName 你的.服务.器的.地址\n#登陆的用户名\nUser travis\nIdentitiesOnly yes\n#登陆使用的密钥\nIdentityFile ~/.ssh/id_rsa\n\n#config文件中的内容结束，下面回到shell\n\n#一定要更该权限\nchmod -R 600 config \nchmod -R 600 authorized_keys \n\n#测试\nssh test\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"360px"},attrs:{src:e(211)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("接下来我们要把加密的私钥"),s("code",[this._v("id_rsa.enc")]),this._v("放到"),s("code",[this._v("repository")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"4"}},[s("li",[this._v("安装rvm->ruby->gem->travis客户端工具，真够麻烦的，为了用这个工具必须用gem和ruby")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("#安装rvm\ncurl -sSL https://get.rvm.io | bash -s stable\n#测试一下\nrvm version\n#rvm 1.29.3 (master) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io]\n\n#安装ruby，我看的博客上不成功换了root，我的成功了\nrvm install ruby\n#测试一下\n\nruby --version\n#ruby 2.6.0p0 (2018-12-25 revision 66547) [x86_64-linux]\n\ngem\n#RubyGems is a sophisticated package manager for Ruby.  This is a\n#basic help message containing pointers to more information.\n#\n#  Usage:\n#    gem -h/--help\n#    gem -v/--version\n#    gem comma....(输出太长了不写\n\n#查看gem的源\ngem sources -l\n# *** CURRENT SOURCES ***\n\n\n# 啥也没有，添加一个国内源\ngem sources --add https://gems.ruby-china.org/ --remove https://rubygems.org/\ngem sources -l\n\n# *** CURRENT SOURCES ***\n# https://rubygems.org/\n\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("# 安装客户端，没权限就用root\ngem install travis\n\n# 完事看一下能用吗\ntravis\n# Usage: travis COMMAND ...\n# \n# Available commands:\n#   accoout....\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"5"}},[s("li",[this._v("在travis用户下从git拉下你的"),s("code",[this._v("repository")]),this._v("，放在～目录下 "),s("code",[this._v("git clone xxxx.git")]),s("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("travis login\n# We need your GitHub login to identify you.\n# This information will not be sent to Travis CI, only to api.github.com.\n# The password will not be displayed.\n# \n# Try running with --github-token or --auto if you dont want to enter your password anyway.\n# \n# Username: 241****18@qq.com\n# Password for 241****18@qq.com: ******\n# Successfully logged in as Ca****le\n\ntravis encrypt-file ~/.ssh/id_rsa --add\n\n# 让你填yes你就填，不要乱按以免生成一些奇怪的文件\n\n")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("运行完就已经生成好了id_rsa.enc，并且你的"),e("code",[t._v(".travis.yml")]),t._v("已经被更改了\n它会自动添上,手动chmod一下，然后把 "),e("em",[t._v("自动添加的2")]),t._v(" 前面的"),e("code",[t._v("\\")]),t._v(" 去掉，"),e("code",[t._v("~\\/.ssh/id_rsa -d")]),t._v("->"),e("code",[t._v("~/.ssh/id_rsa -d")]),t._v("(不去掉可能会找不到目录等等的奇怪问题)")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("before_install")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" openssl aes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("256"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cbc "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("K $encrypted_xxxxxxxx_key "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("iv $encrypted_xxxxxxxx_iv "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自动添加的1")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("in id_rsa.enc "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("out ~\\/.ssh/id_rsa "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("d "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自动添加的2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" chmod "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("R 600 ~/.ssh/id_rsa "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意改权限")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("-in 参数指定待解密的文件，位于仓库的根目录(Travis执行任务时会先把代码拉到Travis自己的服务器上，并进入仓库更目录)")]),this._v(" "),s("li",[this._v("-out 参数指定解密后的密钥存放在Travis服务器的~/.ssh/id_rsa，如果你的后面需要的话可以取这个路径，我看到网上有的SSH登陆方式用到了这个文件")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("small",[this._v("-----from掘金listener")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("br"),this._v("之后把这两个文件添加进git，commit，push。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),s("p",[this._v("git提交信息最好每次都不同，这样travis容易检测会更快构建")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"6"}},[s("li",[this._v("使用"),s("a",{attrs:{href:"http://www.runoob.com/linux/linux-comm-scp.html"}},[this._v("scp命令")]),this._v("免密登陆传输文件。先测试下密钥对能正常使用不"),s("br"),this._v("\n构建成功后先使用ssh看能登陆不")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("after_success")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#构建成功后的动作")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" chmod "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("R 600 ~/.ssh/id_rsa"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#权限")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ssh travis@你的.服务.器的.地址 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("o StrictHostKeyChecking=no "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("i ~/.ssh/id_rsa\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"150px"},attrs:{src:e(212)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果要求输入密码的话那么你需要重新生成密钥对，重新加密，然后添加到git commit push"),s("br"),this._v("\n如果ssh登陆成功了，将ssh替换成scp命令，你可以在本机上先把scp命令写好，确保这条命令能从目录A传送文件到远程目录B，中间输入密码没关系，因为没有私钥。"),s("br"),this._v("\n然后将"),s("code",[this._v(".travis.yaml")]),this._v("的ssh替换成scp。")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("after_success")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#构建成功后的动作")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" chmod "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("R 600 ~/.ssh/id_rsa"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#权限")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" scp "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("o StrictHostKeyChecking=no "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("v "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("r docs/.vuepress/dist/* travis@你的.服务.器的.地址"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/你的/博客目录 "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#一会着重讲解scp命令，先不说")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("提交上去试试就可以了。,"),s("strong",[this._v("千万别忘了加"),s("code",[this._v("chmod -R 600 ~/.ssh/id_rsa")])]),s("br"),this._v("\nssh命令别忘了删掉，我在做的时候先ssh然后scp一块用发现scp需要输入密码，ssh不需要。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"150px"},attrs:{src:e(213)}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("ul",[e("li",[t._v("nginx读取文件夹内的静态文件，如果该文件夹被删除，然后重新上传了一个同名文件夹，有时会报403，最好不要动。\n"),e("br"),t._v("替换掉文件夹里的静态文件就可以了。")]),t._v(" "),e("li",[t._v("rvm默认是不启用的，gem和ruby不能直接在命令行中使用。使用"),e("code",[t._v("source ~/.bash_profile")]),t._v("激活当前ssh窗口的rvm在当前的session可以使用。也就是关闭了窗口重新启动想要使用travis工具就要运行这个命令")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"奖励"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#奖励","aria-hidden":"true"}},[this._v("#")]),this._v(" 奖励")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("打开"),s("code",[this._v("travis这个工程的页面")]),this._v("，有个小绿标，点一下复制"),s("code",[this._v("那个网址")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"350px"},attrs:{src:e(214)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在你的项目的（不是vuepress的）"),s("code",[this._v("README.md")]),this._v("里面第一行最加入")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-markdown extra-class"},[s("pre",{pre:!0,attrs:{class:"language-markdown"}},[s("code",[s("span",{pre:!0,attrs:{class:"token url"}},[this._v("[![](那个网址)")]),this._v("](travis这个工程的页面地址)\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"200px"},attrs:{src:e(215)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"gitea"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gitea","aria-hidden":"true"}},[this._v("#")]),this._v(" gitea")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("docker run -d --name=gitea -p 2222:22 -p 8000:3000 -v $PWD/giteastore:/data gitea/gitea:latest\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("我在~目录下运行的，所以直接把/data映射到了~/giteastore。8000是外部访问端口，相当于访问内部的3000，就是主要页面，2222是ssh，用作ssh传输repo的。"),s("br"),this._v("\n按完之后访问public address:8000 就可以看到首页了")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"450px"},attrs:{src:e(216)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"自定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义","aria-hidden":"true"}},[this._v("#")]),this._v(" 自定义")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("我只放我改动的配置,目录在"),s("code",[this._v("~/giteastore/gitea/conf/app.ini")]),this._v("。  "),s("br")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[e("code",[t._v("APP_NAME = 年轻人的代码库")]),e("br"),t._v("\n这是显示在首页上最大的文字和html标签上面的文字"),e("br"),t._v(" "),e("code",[t._v("SSH_DOMAIN = 47.101.52.xxx")]),e("br"),t._v("\n显示在ssh的地址 "),e("em",[t._v("ssh://git@47.101.52.xxx:2222/root/wbooks.git")]),t._v(" "),e("br"),t._v(" "),e("code",[t._v("ROOT_URL = http://git.ooowl.fun/")]),e("br"),t._v("\nHTTP传输的域名或地址，我直接分了个二级域名所以没加端口 "),e("em",[t._v("http://git.ooowl.fun/root/wbooks.git")]),t._v(" "),e("br"),t._v(" "),e("code",[t._v("SSH_PORT = 2222")]),e("br"),t._v("\nssh传输时的端口"),e("br"),t._v(" "),e("code",[t._v("DOMAIN = git.ooowl.fun")]),e("br"),t._v("\n主域名"),e("br"),t._v(" "),e("code",[t._v("HOST = smtp.qq.com:465")]),e("br"),t._v("\nqq的smtp地址，别忘了端口"),e("br")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("进入容器中，输入 $GITEA_CUSTOM一般没被脚本改动的就指向/data被映射到外面(/giteastore)去了.")]),t._v(" "),a("li",[t._v("这个目录/gitea文件夹下面有些文件,自带的不用管。")]),t._v(" "),a("li",[t._v("文件使用的是"),a("a",{attrs:{href:"https://github.com/go-gitea/gitea"}},[t._v("gitea的repo")]),t._v("里默认的.比如我想改动首页(在templates/home.tmpl)，我就在这repo下载templates文件夹，改动完home.tmpl把这个文件夹放到gitea文件夹下，读取的时候就优先读取本地的templates，就生效了")]),t._v(" "),a("li",[t._v("不用全下载整个repo想改哪个改完对应的放到目录下重启docker就生效")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://docs.gitea.io/zh-cn/"}},[t._v("官方文档")]),t._v("给出了支持的UI以及更多信息\n"),a("br"),t._v("\n放一张我的首页\n"),a("div",{attrs:{align:"center"}},[a("img",{staticStyle:{height:"450px"},attrs:{src:e(217)}})])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{align:"center"}},[s("img",{staticStyle:{height:"250px"},attrs:{src:e(218)}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),s("p",[this._v("一开始总是验证失败 ，后来发现除了pycharm其他的海龟或者gitbash都可以。"),s("br"),this._v("\n把时设置->git里的ssh从native改为build-in就好了，应该是pycharm自带的ssh问题。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"备份"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#备份","aria-hidden":"true"}},[this._v("#")]),this._v(" 备份")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[t._v("首先把正在运行的gitea容器停下(因为两个容器不能同时写一个文件夹)")]),t._v(" "),e("li",[e("em",[e("strong",[t._v("docker run -d --name=gitea -p 2300:22 -p 8100:3000 -v $PWD/giteastore/code:/data --name TEST  gitea/gitea")])]),t._v(" "),e("ul",[e("li",[t._v("重新运行了一个容器，挂载已有的外部data文件夹，访问8100")]),t._v(" "),e("li",[t._v("完整的还原了回来数据也没丢，如果重新改了端口记得改配置和域名。\n"),e("br"),t._v("\n这样只要这个文件夹不丢所有东西就都有，可以写个shell备份。")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"gitlabci"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gitlabci","aria-hidden":"true"}},[this._v("#")]),this._v(" GitLabCI")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"有时间再看"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#有时间再看","aria-hidden":"true"}},[this._v("#")]),this._v(" 有时间再看")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"jenkins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jenkins","aria-hidden":"true"}},[this._v("#")]),this._v(" Jenkins")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考资料")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("li",[t._v("travis-ci的\n"),e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/nahancy/article/details/79059135"}},[t._v("Linux安全之SSH 密钥创建及密钥登录")])]),t._v(" "),e("li",[e("a",{attrs:{href:"https://juejin.im/post/5a9e1a5751882555712bd8e1"}},[t._v("Travis-CI自动化测试并部署至自己的CentOS服务器")]),t._v("这篇好")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://blog.csdn.net/u014374031/article/details/80268514"}},[t._v("travis自动化部署续篇")])]),t._v(" "),e("li",[e("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html"}},[t._v("持续集成服务 Travis CI 教程")]),t._v("阮一峰的")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://blog.gunxueqiu.site/2018/06/02/2018-06-02-travis%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E9%98%BF%E9%87%8C%E4%BA%91/"}},[t._v("travis阿里云自动部署")])]),t._v(" "),e("li",[e("a",{attrs:{href:"https://juejin.im/post/5c9b3934f265da60d429046d"}},[t._v("用 Travis CI 打造大前端持续集成和自动化部署")])]),t._v(" "),e("li",[e("a",{attrs:{href:"没有脑子:-）"}},[t._v("丢失的智力")])])])])}],n=e(0),r=Object(n.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),e("p",[t._v("假设你现在有一个本地的(vuepress)工程并且受git控制，你的发布流程应该和我是差不多的。要使用CI接下来要做的这么几件事")]),t._v(" "),t._m(6),t._v(" "),e("p",[t._v("在这里点击右上角登陆，按照提示注册一个账号，登进来应该是这样的。\n")]),t._m(7),t._v("\n然后进入CircleCI再sing in with Github\n"),t._m(8),t._v("\n在webstorm打开本地工程，配置一下github\n"),t._m(9),t._v(" "),t._m(10),t._v("\n我的已经发布过了所以会报错，没发布过的不会报错不要紧。别点private。"),e("br"),t._v("\n一会就发布完了，现在登陆github和travisCI会发现自己多了工程。"),e("br"),t._v("\n这时候试一下能不能正常的push，pull，commit。如果不能，在github的sshkey管理中"),e("a",{attrs:{href:"https://blog.csdn.net/fenghuibian/article/details/73350890"}},[t._v("添加公钥")]),t._v("\n然后工程根目录下新建一个空的"),e("code",[t._v(".travis.yml")]),t._v("文件，commit，push"),e("br"),t._v(" "),t._m(11),t._v("\n在travisCI中打开监听，然后点进去\n"),t._m(12),t._v("\n这时候我们已经完成了代码托管，travisCI监听，当你push到GitHub，travisCI就会自动按照"),e("code",[t._v(".travis.yml")]),t._v("的规则给你构建。\n接下来我们就要自定义规则和推送到服务器"),e("p"),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._m(16),t._v(" "),e("p",[t._v("先试一下这个脚本看看监听构建成功不")]),t._v(" "),t._m(17),t._m(18),t._m(19),e("p"),t._v(" "),e("p",[t._v("现在我们已经可以提交到git之后自己build了，但是我们需要上传到自己服务器。前面可能很好做，下面会有坑。")]),t._v(" "),t._m(20),t._v(" "),e("h3",[t._v("登陆原理")]),t._v(" "),t._m(21),e("h3",[t._v("服务器操作")]),e("p"),t._v(" "),e("p",[t._v("公钥私钥是成对的，直接在服务器上操作就可以。我们要做的：")]),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._m(25),t._v(" "),t._m(26),t._m(27),t._v(" "),t._m(28),t._m(29),t._v(" "),t._m(30),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),e("p",[t._v("rvm安完了我们来安装和配置travis客户端，客户端走的git服务，不用担心泄露")]),t._v(" "),t._m(35),t._m(36),t._v(" "),e("p",[t._v("进入你刚下载的repo里面(现在你的目录应该是～/你的repo)")]),t._v(" "),t._m(37),t._m(38),t._v(" "),t._m(39),e("p",[t._v("解释下解密命令中 -in 和 -out 参数:")]),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),e("p",[t._v("等待自动构建一次，这时候ssh应该不会输出任何日志才对，如果要你输入密码，说明密钥没登陆成功")]),t._v(" "),t._m(46),t._v(" "),t._m(47),t._v(" "),t._m(48),t._m(49),t._v(" "),t._m(50),t._v(" "),e("p",[t._v("遇到这种情况就再重新生成密钥对。")]),t._v(" "),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._v(" "),t._m(54),t._v(" "),t._m(55),t._v(" "),t._m(56),e("p",[t._v("之后你的repo上会出现一个passing的小绿标\n像这样:")]),t._v(" "),t._m(57),t._v(" "),e("p",[t._v("爽到～")]),t._v(" "),t._m(58),t._v(" "),t._m(59),t._v(" "),e("p",[t._v("直接docker省时省力简单。")]),t._v(" "),t._m(60),t._m(61),t._v(" "),t._m(62),t._v(" "),e("p",[t._v("点登陆或者注册第一次会有个设置向导，能设置的设置一下，集的smtp要带端口号465，QQ邮箱的密码在网页版qq邮箱账户中开启smtp和pop3之后获取授权码作为密码而不是单纯用密码，推荐sqlite备份好备份")]),t._v(" "),t._m(63),t._v(" "),e("br"),t._v("\n自定义包括自定义配置->自定义html页面->在idea中使用。  "),e("br"),t._v(" "),t._m(64),t._v(" "),t._m(65),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("其实不仅能自定义html页面，啥都可以自定义。")]),t._v(" "),t._m(66),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("在idea中，使用这个东西要先设置。顶上的工具栏->VCS->git->remotes添加。然后add，commit，push不能直接githubshare，也不能添加账户，只能在push的时候输入账号密码。\n")]),t._m(67),e("p"),t._v(" "),t._m(68),t._v(" "),e("p",[t._v("应该能正常push，pull，clone了，简单的团队协作应该还不错，除了CI没有之外其他的没什么了。")]),t._v(" "),t._m(69),t._v(" "),e("p",[t._v("备份非常见简单，昨天一个群里讨论这个事来着，我拿这个做了个实验。")]),t._v(" "),t._m(70),t._v(" "),t._m(71),t._v(" "),t._m(72),t._v(" "),e("p",[t._v("Gitlab吃内存太疯狂了8G才够看，工具又重，不是很想弄。最近找到了一个Gitea。一个开源的github项目，原先有个类似的项目Gogs，但是作者不想让别人维护，只允许自己管控整个项目，导致处理速度太慢然后一些人不满意又创立了gitea")]),t._v(" "),t._m(73),t._v(" "),e("p",[t._v("鸽了")]),t._v(" "),t._m(74),t._v(" "),e("ul",[t._m(75),t._v(" "),e("li",[t._v("gitlab-ci的\n"),e("ul",[e("li",[t._v("咕咕咕咕咕～\n"),e("Valine")],1)])])])])},a,!1,null,null,null);s.default=r.exports}}]);